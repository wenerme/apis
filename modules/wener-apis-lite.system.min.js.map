{"version":3,"file":"wener-apis-lite.system.min.js","sources":["../../src/modules/lite/index.ts"],"sourcesContent":["export { default as metadata } from './metadata.json';\n\n/**\n * System configuration\n */\n\nif (!window['process']) {\n  window['process'] = { env: { NODE_ENV: isDev() ? 'development' : 'production' } } as any;\n}\nconst System = window['System'];\n\nconst start = Date.now();\nlet chain: Promise<any> = Promise.resolve();\nif (!isGeneratorSupported()) {\n  // FIXME this is kinda useless, need multi bundle\n  chain = chain\n    .then(System.import(resolveModule({ name: '@wener/apis-polyfill', dev: isDev() })))\n    .then(({ load }) => load());\n}\nchain = chain\n  // import('src/modules/boot') // not inject resolve yet\n  .then(() => System.import(resolveModule({ name: '@wener/apis-boot', dev: isDev() })))\n  .then(({ boot }) =>\n    boot({\n      dev: isDev(),\n      internals: [/^@wener[/]apis-(.+)/, /^@wener[/]ui([/]\\w+)?/, /^@wener[/]utils/],\n      baselUrl: getBaseUrl(),\n      resolver: resolveModule,\n      System,\n    }),\n  );\nchain = chain.then(() => import('src/modules/root'));\nchain.then(() => console.log(`Started in ${Date.now() - start}ms`));\nchain.catch((e) => {\n  console.error(`Failed to setup application`, e);\n});\n\nfunction isDev(): boolean {\n  if (localStorage['devtools']) {\n    return localStorage['devtools'] === 'true';\n  }\n  return Boolean(location.origin.match(/localhost|127\\.0\\.0|192\\.168/));\n}\n\nfunction resolveModule({ name, dev }) {\n  const fn = `./modules/${name.replace('@', '').replace(/[/]/g, '-')}.system${dev ? '' : '.min'}.js`;\n  return new URL(fn, getBaseUrl()).href;\n}\n\nfunction getBaseUrl() {\n  // allowed override base url\n  return localStorage['BASE_URL'] || location.href;\n}\n\nfunction isGeneratorSupported() {\n  let supported = true;\n  try {\n    eval('(function *() {})');\n  } catch (e) {\n    supported = false;\n  }\n  return supported;\n}\n"],"names":["window","env","NODE_ENV","isDev","System","start","Date","now","chain","Promise","resolve","localStorage","Boolean","location","origin","match","resolveModule","name","dev","fn","replace","URL","getBaseUrl","href","isGeneratorSupported","supported","eval","e","then","import","load","boot","internals","baselUrl","resolver","module","console","log","catch","error"],"mappings":"kQAMKA,OAAM,UACTA,OAAM,QAAc,CAAEC,IAAK,CAAEC,SAAUC,QAAU,cAAgB,gBAEnE,MAAMC,OAASJ,OAAM,OAEfK,MAAQC,KAAKC,MACnB,IAAIC,MAAsBC,QAAQC,UAyBlC,SAASP,eACHQ,aAAY,SACsB,SAA7BA,aAAY,SAEdC,QAAQC,SAASC,OAAOC,MAAM,iCAGvC,SAASC,eAAcC,KAAEA,EAAFC,IAAQA,UACvBC,EAAM,aAAYF,EAAKG,QAAQ,IAAK,IAAIA,QAAQ,OAAQ,cAAcF,EAAM,GAAK,mBAChF,IAAIG,IAAIF,EAAIG,cAAcC,KAGnC,SAASD,oBAEAX,aAAY,UAAgBE,SAASU,KAG9C,SAASC,2BACHC,WAAY,MAEdC,KAAK,qBACL,MAAOC,GACPF,WAAY,SAEPA,UAhDJD,yBAEHhB,MAAQA,MACLoB,KAAKxB,OAAOyB,OAAOb,cAAc,CAAEC,KAAM,uBAAwBC,IAAKf,YACtEyB,KAAK,EAAGE,KAAAA,KAAWA,MAExBtB,MAAQA,MAELoB,KAAK,IAAMxB,OAAOyB,OAAOb,cAAc,CAAEC,KAAM,mBAAoBC,IAAKf,YACxEyB,KAAK,EAAGG,KAAAA,KACPA,EAAK,CACHb,IAAKf,QACL6B,UAAW,CAAC,sBAAuB,wBAAyB,mBAC5DC,SAAUX,aACVY,SAAUlB,cACVZ,OAAAA,UAGNI,MAAQA,MAAMoB,KAAK,IAAMO,cAAO,qBAChC3B,MAAMoB,KAAK,IAAMQ,QAAQC,IAAK,cAAa/B,KAAKC,MAAQF,YACxDG,MAAM8B,MAAOX,IACXS,QAAQG,MAAO,8BAA8BZ"}