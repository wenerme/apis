{"version":3,"file":"wener-apis-webrtc.system.js","sources":["../../../../.yarn/cache/immer-npm-6.0.9-1cab3ed201-e55b0d70c9.zip/node_modules/immer/dist/immer.esm.js","../../src/libs/webrtc/rtcs.ts","../../src/modules/webrtc/components/WebRTCChecker.tsx"],"sourcesContent":["function n(n){for(var t=arguments.length,r=Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=L[n],o=i?\"function\"==typeof i?i.apply(null,r):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(r.length?\" \"+r.join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function t(n){return!!n&&!!n[G]}function r(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var t=Object.getPrototypeOf(n);return!t||t===Object.prototype}(n)||Array.isArray(n)||!!n[B]||!!n.constructor[B]||c(n)||s(n))}function e(n){if(n&&n[G])return n[G].t}function i(n,t,r){void 0===r&&(r=!1),0===o(n)?(r?Object.keys:Q)(n).forEach((function(r){return t(r,n[r],n)})):n.forEach((function(r,e){return t(e,r,n)}))}function o(n){var t=n[G];return t?t.i>3?t.i-4:t.i:Array.isArray(n)?1:c(n)?2:s(n)?3:0}function u(n,t){return 2===o(n)?n.has(t):Object.prototype.hasOwnProperty.call(n,t)}function a(n,t){return 2===o(n)?n.get(t):n[t]}function f(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t}function c(n){return U&&n instanceof Map}function s(n){return W&&n instanceof Set}function v(n){return n.o||n.t}function p(t,r){if(void 0===r&&(r=!1),Array.isArray(t))return t.slice();var e=Object.create(Object.getPrototypeOf(t));return i(t,(function(i){if(i!==G){var o=Object.getOwnPropertyDescriptor(t,i),u=o.value;o.get&&(r||n(1),u=o.get.call(t)),o.enumerable?e[i]=u:Object.defineProperty(e,i,{value:u,writable:!0,configurable:!0})}})),e}function d(n,e){t(n)||h(n)||!r(n)||(o(n)>1&&(n.set=n.add=n.clear=n.delete=l),Object.freeze(n),e&&i(n,(function(n,t){return d(t,!0)}),!0))}function l(){n(2)}function h(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function y(t){var r=V[t];return r||n(\"production\"!==process.env.NODE_ENV?18:19,t),r}function b(n,t){V[n]=t}function m(){return\"production\"===process.env.NODE_ENV||K||n(0),K}function _(n,t){t&&(y(\"Patches\"),n.u=[],n.s=[],n.v=t)}function j(n){O(n),n.p.forEach(w),n.p=null}function O(n){n===K&&(K=n.l)}function g(n){return K={p:[],l:K,h:n,m:!0,_:0}}function w(n){var t=n[G];0===t.i||1===t.i?t.j():t.O=!0}function S(t,e){e._=e.p.length;var i=e.p[0],o=void 0!==t&&t!==i;return e.h.g||y(\"ES5\").S(e,t,o),o?(i[G].P&&(j(e),n(4)),r(t)&&(t=P(e,t),e.l||A(e,t)),e.u&&y(\"Patches\").M(i[G],t,e.u,e.s)):t=P(e,i,[]),j(e),e.u&&e.v(e.u,e.s),t!==q?t:void 0}function P(n,t,r){if(h(t))return t;var e=t[G];if(!e)return i(t,(function(i,o){return M(n,e,t,i,o,r)}),!0),t;if(e.A!==n)return t;if(!e.P)return A(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=p(e.k,!0):e.o;i(o,(function(t,i){return M(n,e,o,t,i,r)})),A(n,o,!1),r&&n.u&&y(\"Patches\").R(e,r,n.u,n.s)}return e.o}function M(e,i,c,s,v,p){if(\"production\"!==process.env.NODE_ENV&&v===c&&n(5),t(v)){var d=P(e,v,p&&i&&3!==i.i&&!u(i.D,s)?p.concat(s):void 0);if(h=s,y=d,2===(b=o(l=c))?l.set(h,y):3===b?(l.delete(h),l.add(y)):l[h]=y,!t(d))return;e.m=!1}var l,h,y,b;if((!i||!f(v,a(i.t,s)))&&r(v)){if(!e.h.N&&e._<1)return;P(e,v),i&&i.A.l||A(e,v)}}function A(n,t,r){void 0===r&&(r=!1),n.h.N&&n.m&&d(t,r)}function x(n,t){var r=n[G],e=Reflect.getOwnPropertyDescriptor(r?v(r):n,t);return e&&e.value}function z(n){if(!n.P){if(n.P=!0,0===n.i||1===n.i){var t=n.o=p(n.t);i(n.p,(function(n,r){t[n]=r})),n.p=void 0}n.l&&z(n.l)}}function I(n){n.o||(n.o=p(n.t))}function E(n,t,r){var e=c(t)?y(\"MapSet\").T(t,r):s(t)?y(\"MapSet\").F(t,r):n.g?function(n,t){var r=Array.isArray(n),e={i:r?1:0,A:t?t.A:m(),P:!1,I:!1,D:{},l:t,t:n,k:null,p:{},o:null,j:null,C:!1},i=e,o=Y;r&&(i=[e],o=Z);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(t,r):y(\"ES5\").J(t,r);return(r?r.A:m()).p.push(e),e}function k(n,t){n.g?z(t):y(\"ES5\").K(t)}function R(){function e(n,t){var r=n[G];if(r&&!r.$){r.$=!0;var e=n[t];return r.$=!1,e}return n[t]}function o(n){n.P||(n.P=!0,n.l&&o(n.l))}function a(n){n.o||(n.o=c(n.t))}function c(n){var t=n&&n[G];if(t){t.$=!0;var r=p(t.k,!0);return t.$=!1,r}return p(n)}function s(n){for(var t=n.length-1;t>=0;t--){var r=n[t][G];if(!r.P)switch(r.i){case 5:l(r)&&o(r);break;case 4:d(r)&&o(r)}}}function d(n){for(var t=n.t,r=n.k,e=Object.keys(r),i=e.length-1;i>=0;i--){var o=e[i],a=t[o];if(void 0===a&&!u(t,o))return!0;var c=r[o],s=c&&c[G];if(s?s.t!==a:!f(c,a))return!0}return e.length!==Object.keys(t).length}function l(n){var t=n.k;if(t.length!==n.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}function h(t){t.O&&n(3,JSON.stringify(v(t)))}var y={};b(\"ES5\",{J:function(n,t){var u=Array.isArray(n),s=c(n);i(s,(function(t){!function(n,t,i){var u=y[t];u?u.enumerable=i:y[t]=u={enumerable:i,get:function(){return function(n,t){h(n);var i=e(v(n),t);return n.$?i:i===e(n.t,t)&&r(i)?(a(n),n.o[t]=E(n.A.h,i,n)):i}(this[G],t)},set:function(n){!function(n,t,r){if(h(n),n.D[t]=!0,!n.P){if(f(r,e(v(n),t)))return;o(n),a(n)}n.o[t]=r}(this[G],t,n)}},Object.defineProperty(n,t,u)}(s,t,u||function(n,t){var r=Object.getOwnPropertyDescriptor(n,t);return!(!r||!r.enumerable)}(n,t))}));var p={i:u?5:4,A:t?t.A:m(),P:!1,$:!1,I:!1,D:{},l:t,t:n,k:s,o:null,O:!1,C:!1};return Object.defineProperty(s,G,{value:p,writable:!0}),s},K:o,S:function(n,r,e){n.p.forEach((function(n){n[G].$=!0})),e?t(r)&&r[G].A===n&&s(n.p):(n.u&&function n(t){if(t&&\"object\"==typeof t){var r=t[G];if(r){var e=r.t,a=r.k,f=r.D,c=r.i;if(4===c)i(a,(function(t){t!==G&&(void 0!==e[t]||u(e,t)?f[t]||n(a[t]):(f[t]=!0,o(r)))})),i(e,(function(n){void 0!==a[n]||u(a,n)||(f[n]=!1,o(r))}));else if(5===c){if(l(r)&&(o(r),f.length=!0),a.length<e.length)for(var s=a.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<a.length;v++)f[v]=!0;for(var p=Math.min(a.length,e.length),d=0;d<p;d++)void 0===f[d]&&n(a[d])}}}}(n.p[0]),s(n.p))}})}function D(){function r(n){if(!n||\"object\"!=typeof n)return n;if(Array.isArray(n))return n.map(r);if(c(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],r(n[1])]})));if(s(n))return new Set(Array.from(n).map(r));var t=Object.create(Object.getPrototypeOf(n));for(var e in n)t[e]=r(n[e]);return t}function e(n){return t(n)?r(n):n}var f=\"add\";b(\"Patches\",{U:function(t,e){return e.forEach((function(e){for(var i=e.path,u=e.op,c=t,s=0;s<i.length-1;s++)\"object\"!=typeof(c=a(c,i[s]))&&n(15,i.join(\"/\"));var v=o(c),p=r(e.value),d=i[i.length-1];switch(u){case\"replace\":switch(v){case 2:return c.set(d,p);case 3:n(16);default:return c[d]=p}case f:switch(v){case 1:return c.splice(d,0,p);case 2:return c.set(d,p);case 3:return c.add(p);default:return c[d]=p}case\"remove\":switch(v){case 1:return c.splice(d,1);case 2:return c.delete(d);case 3:return c.delete(e.value);default:return delete c[d]}default:n(17,u)}})),t},R:function(n,t,r,o){switch(n.i){case 0:case 4:case 2:return function(n,t,r,o){var c=n.t,s=n.o;i(n.D,(function(n,i){var v=a(c,n),p=a(s,n),d=i?u(c,n)?\"replace\":f:\"remove\";if(v!==p||\"replace\"!==d){var l=t.concat(n);r.push(\"remove\"===d?{op:d,path:l}:{op:d,path:l,value:p}),o.push(d===f?{op:\"remove\",path:l}:\"remove\"===d?{op:f,path:l,value:e(v)}:{op:\"replace\",path:l,value:e(v)})}}))}(n,t,r,o);case 5:case 1:return function(n,t,r,i){var o=n.t,u=n.D,a=n.o;if(a.length<o.length){var c=[a,o];o=c[0],a=c[1];var s=[i,r];r=s[0],i=s[1]}for(var v=a.length-o.length,p=0;o[p]===a[p]&&p<o.length;)++p;for(var d=o.length;d>p&&o[d-1]===a[d+v-1];)--d;for(var l=p;l<d;++l)if(u[l]&&a[l]!==o[l]){var h=t.concat([l]);r.push({op:\"replace\",path:h,value:e(a[l])}),i.push({op:\"replace\",path:h,value:e(o[l])})}for(var y=r.length,b=d+v-1;b>=d;--b){var m=t.concat([b]);r[y+b-d]={op:f,path:m,value:e(a[b])},i.push({op:\"remove\",path:m})}}(n,t,r,o);case 3:return function(n,t,r,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=t.concat([u]);r.push({op:\"remove\",path:i,value:n}),e.unshift({op:f,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=t.concat([u]);r.push({op:f,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,t,r,o)}},M:function(n,t,r,e){r.push({op:\"replace\",path:[],value:t}),e.push({op:\"replace\",path:[],value:n.t})}})}function N(){function t(n,t){function r(){this.constructor=n}u(n,t),n.prototype=(r.prototype=t.prototype,new r)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function i(n){n.o||(n.o=new Set,n.t.forEach((function(t){if(r(t)){var e=E(n.A.h,t,n);n.p.set(t,e),n.o.add(e)}else n.o.add(t)})))}function o(t){t.O&&n(3,JSON.stringify(v(t)))}var u=function(n,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])})(n,t)},a=function(){function n(n,t){return this[G]={i:2,l:t,A:t?t.A:m(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}t(n,Map);var i=n.prototype;return Object.defineProperty(i,\"size\",{get:function(){return v(this[G]).size}}),i.has=function(n){return v(this[G]).has(n)},i.set=function(n,t){var r=this[G];return o(r),v(r).get(n)!==t&&(e(r),k(r.A.h,r),r.D.set(n,!0),r.o.set(n,t),r.D.set(n,!0)),this},i.delete=function(n){if(!this.has(n))return!1;var t=this[G];return o(t),e(t),k(t.A.h,t),t.D.set(n,!1),t.o.delete(n),!0},i.clear=function(){var n=this[G];return o(n),e(n),k(n.A.h,n),n.D=new Map,n.o.clear()},i.forEach=function(n,t){var r=this;v(this[G]).forEach((function(e,i){n.call(t,r.get(i),i,r)}))},i.get=function(n){var t=this[G];o(t);var i=v(t).get(n);if(t.I||!r(i))return i;if(i!==t.t.get(n))return i;var u=E(t.A.h,i,t);return e(t),t.o.set(n,u),u},i.keys=function(){return v(this[G]).keys()},i.values=function(){var n,t=this,r=this.keys();return(n={})[H]=function(){return t.values()},n.next=function(){var n=r.next();return n.done?n:{done:!1,value:t.get(n.value)}},n},i.entries=function(){var n,t=this,r=this.keys();return(n={})[H]=function(){return t.entries()},n.next=function(){var n=r.next();if(n.done)return n;var e=t.get(n.value);return{done:!1,value:[n.value,e]}},n},i[H]=function(){return this.entries()},n}(),f=function(){function n(n,t){return this[G]={i:3,l:t,A:t?t.A:m(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}t(n,Set);var r=n.prototype;return Object.defineProperty(r,\"size\",{get:function(){return v(this[G]).size}}),r.has=function(n){var t=this[G];return o(t),t.o?!!t.o.has(n)||!(!t.p.has(n)||!t.o.has(t.p.get(n))):t.t.has(n)},r.add=function(n){var t=this[G];return o(t),this.has(n)||(i(t),k(t.A.h,t),t.o.add(n)),this},r.delete=function(n){if(!this.has(n))return!1;var t=this[G];return o(t),i(t),k(t.A.h,t),t.o.delete(n)||!!t.p.has(n)&&t.o.delete(t.p.get(n))},r.clear=function(){var n=this[G];return o(n),i(n),k(n.A.h,n),n.o.clear()},r.values=function(){var n=this[G];return o(n),i(n),n.o.values()},r.entries=function(){var n=this[G];return o(n),i(n),n.o.entries()},r.keys=function(){return this.values()},r[H]=function(){return this.values()},r.forEach=function(n,t){for(var r=this.values(),e=r.next();!e.done;)n.call(t,e.value,e.value,this),e=r.next()},n}();b(\"MapSet\",{T:function(n,t){return new a(n,t)},F:function(n,t){return new f(n,t)}})}function T(){R(),N(),D()}function F(n){return n}function C(n){return n}var J,K,$=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),U=\"undefined\"!=typeof Map,W=\"undefined\"!=typeof Set,X=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,q=$?Symbol(\"immer-nothing\"):((J={})[\"immer-nothing\"]=!0,J),B=$?Symbol(\"immer-draftable\"):\"__$immer_draftable\",G=$?Symbol(\"immer-state\"):\"__$immer_state\",H=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",L={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},19:function(n){return\"plugin not loaded: \"+n},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\"},Q=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,V={},Y={get:function(n,t){if(t===G)return n;var e=n.p;if(!n.P&&u(e,t))return e[t];var i=v(n)[t];if(n.I||!r(i))return i;if(n.P){if(i!==x(n.t,t))return i;e=n.o}return e[t]=E(n.A.h,i,n)},has:function(n,t){return t in v(n)},ownKeys:function(n){return Reflect.ownKeys(v(n))},set:function(n,t,r){if(!n.P){var e=x(n.t,t);if(r?f(e,r)||r===n.p[t]:f(e,r)&&t in n.t)return!0;I(n),z(n)}return n.D[t]=!0,n.o[t]=r,!0},deleteProperty:function(n,t){return void 0!==x(n.t,t)||t in n.t?(n.D[t]=!1,I(n),z(n)):n.D[t]&&delete n.D[t],n.o&&delete n.o[t],!0},getOwnPropertyDescriptor:function(n,t){var r=v(n),e=Reflect.getOwnPropertyDescriptor(r,t);return e&&(e.writable=!0,e.configurable=1!==n.i||\"length\"!==t),e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},Z={};i(Y,(function(n,t){Z[n]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Z.deleteProperty=function(t,r){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(r))&&n(13),Y.deleteProperty.call(this,t[0],r)},Z.set=function(t,r,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==r&&isNaN(parseInt(r))&&n(14),Y.set.call(this,t[0],r,e,t[0])};var nn=function(){function e(n){this.g=X,this.N=\"production\"!==process.env.NODE_ENV,\"boolean\"==typeof(null==n?void 0:n.useProxies)&&this.setUseProxies(n.useProxies),\"boolean\"==typeof(null==n?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var i=e.prototype;return i.produce=function(t,e,i){if(\"function\"==typeof t&&\"function\"!=typeof e){var o=e;e=t;var u=this;return function(n){var t=this;void 0===n&&(n=o);for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return u.produce(n,(function(n){var r;return(r=e).call.apply(r,[t,n].concat(i))}))}}var a;if(\"function\"!=typeof e&&n(6),void 0!==i&&\"function\"!=typeof i&&n(7),r(t)){var f=g(this),c=E(this,t,void 0),s=!0;try{a=e(c),s=!1}finally{s?j(f):O(f)}return\"undefined\"!=typeof Promise&&a instanceof Promise?a.then((function(n){return _(f,i),S(n,f)}),(function(n){throw j(f),n})):(_(f,i),S(a,f))}if((a=e(t))!==q)return void 0===a&&(a=t),this.N&&d(a,!0),a},i.produceWithPatches=function(n,t){var r,e,i=this;return\"function\"==typeof n?function(t){for(var r=arguments.length,e=Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return i.produceWithPatches(t,(function(t){return n.apply(void 0,[t].concat(e))}))}:[this.produce(n,t,(function(n,t){r=n,e=t})),r,e]},i.createDraft=function(t){r(t)||n(8);var e=g(this),i=E(this,t,void 0);return i[G].C=!0,O(e),i},i.finishDraft=function(t,r){var e=t&&t[G];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return _(i,r),S(void 0,i)},i.setAutoFreeze=function(n){this.N=n},i.setUseProxies=function(t){X||n(20),this.g=t},i.applyPatches=function(n,r){var e;for(e=r.length-1;e>=0;e--){var i=r[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}var o=y(\"Patches\").U;return t(n)?o(n,r):this.produce(n,(function(n){return o(n,r.slice(e+1))}))},e}(),tn=new nn,rn=tn.produce,en=tn.produceWithPatches.bind(tn),on=tn.setAutoFreeze.bind(tn),un=tn.setUseProxies.bind(tn),an=tn.applyPatches.bind(tn),fn=tn.createDraft.bind(tn),cn=tn.finishDraft.bind(tn);export default rn;export{nn as Immer,an as applyPatches,F as castDraft,C as castImmutable,fn as createDraft,T as enableAllPlugins,R as enableES5,N as enableMapSet,D as enablePatches,cn as finishDraft,B as immerable,t as isDraft,r as isDraftable,q as nothing,e as original,rn as produce,en as produceWithPatches,on as setAutoFreeze,un as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","import produce from 'immer';\nimport { PeerConnectionState } from './types';\nimport { createLazyPromise } from '@wener/utils';\n\nexport function getCandidates(conn: RTCPeerConnection): Promise<RTCIceCandidate[]> {\n  const candidatesPromise = createLazyPromise();\n  const candidates = [];\n  const handler = (e) => {\n    if (e.candidate) {\n      candidates.push(e.candidate);\n    }\n\n    if (conn.iceGatheringState === 'complete') {\n      candidatesPromise.resolve(candidates);\n    }\n  };\n\n  conn.addEventListener('icecandidate', handler);\n  conn.addEventListener('icegatheringstatechange', handler);\n\n  candidatesPromise.finally?.(() => {\n    conn.removeEventListener('icecandidate', handler);\n    conn.removeEventListener('icegatheringstatechange', handler);\n  });\n  return candidatesPromise;\n}\n\nconst ConnectionEvents = [\n  'connectionstatechange',\n  'datachannel',\n  'icecandidate',\n  'icecandidateerror',\n  'iceconnectionstatechange',\n  'negotiationneeded',\n  'signalingstatechange',\n  'statsended',\n  'track',\n];\nexport const ChannelEvents = ['bufferedamountlow', 'close', 'error', 'message', 'open'];\n\nexport function addConnectionEventLogger({ name, connection, excludes = [] }) {\n  ConnectionEvents.filter((v) => !excludes.includes(v)).map((v) =>\n    connection.addEventListener(v, (e) => {\n      const conn = e.target as RTCPeerConnection;\n      const { signalingState, iceGatheringState, iceConnectionState, connectionState } = conn;\n      const { state: sctpState } = conn?.sctp ?? {};\n      console.log(\n        `${name} Connection EVENT ${v}`,\n        {\n          signalingState,\n          iceGatheringState,\n          iceConnectionState,\n          connectionState,\n          sctpState,\n        },\n        e.target,\n        e,\n      );\n    }),\n  );\n}\n\nexport function addChannelEventLogger({ name, channel, excludes = [] }) {\n  ChannelEvents.filter((v) => !excludes.includes(v)).map((v) =>\n    channel.addEventListener(v, (e) => {\n      const target = e.target as RTCDataChannel;\n      const {\n        id,\n        label,\n        readyState,\n        negotiated,\n        bufferedAmount,\n        bufferedAmountLowThreshold,\n        maxPacketLifeTime,\n        maxRetransmits,\n      } = target;\n      console.log(\n        `${name} Channel EVENT ${v}`,\n        {\n          id,\n          label,\n          readyState,\n          negotiated,\n          bufferedAmount,\n          bufferedAmountLowThreshold,\n          maxPacketLifeTime,\n          maxRetransmits,\n        },\n        e.target,\n        e,\n      );\n    }),\n  );\n}\n\nexport function getPeerConnectionState(conn: RTCPeerConnection): PeerConnectionState {\n  const {\n    connectionState,\n    iceGatheringState,\n    iceConnectionState,\n    signalingState,\n\n    idpErrorInfo,\n  } = conn;\n\n  return {\n    connectionState,\n    iceGatheringState,\n    iceConnectionState,\n    signalingState,\n\n    idpErrorInfo,\n    //\n    sctpState: conn.sctp?.state,\n    sctpTransportState: conn.sctp?.transport?.state,\n  };\n}\n\nexport function addPeerConnectionStateListener(\n  conn: RTCPeerConnection,\n  onStateChange: (s: PeerConnectionState) => void,\n): () => void {\n  let state = getPeerConnectionState(conn);\n  const handler = (e) => {\n    const neo = produce(state, (s) => {\n      Object.assign(s, getPeerConnectionState(conn));\n    });\n    if (neo !== state) {\n      state = neo;\n      onStateChange(state);\n    }\n  };\n  onStateChange(state);\n\n  const events = ['connectionstatechange', 'icegatheringstatechange', 'signalingstatechange', 'negotiationneeded'];\n  events.forEach((v) => conn.addEventListener(v, handler));\n\n  return () => {\n    events.forEach((v) => conn.removeEventListener(v, handler));\n  };\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Descriptions } from 'antd';\nimport { addPeerConnectionStateListener, getCandidates } from 'src/libs/webrtc/rtcs';\nimport { PeerConnectionState } from 'src/libs/webrtc/types';\nimport { useAsyncEffect } from '@wener/ui';\nimport produce from 'immer';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { createLazyPromise, getGlobalThis } from '@wener/utils';\n\nconst CandidateErrorLine: React.FC<{ candidate }> = ({ candidate }) => {\n  const { url, errorCode, errorText, hostCandidate } = candidate;\n  if (errorCode) {\n    return (\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <span>❌</span>\n        <span>\n          {url} - 错误码 {errorCode} - {errorText} - {hostCandidate}\n        </span>\n      </div>\n    );\n  }\n  return null;\n};\n\nexport const WebRTCChecker: React.FC = () => {\n  const [phase, setPhase] = useState('N/A');\n\n  const [connState, setConnState] = useState<PeerConnectionState>({} as any);\n  const [candidates, setCandidates] = useState<any[]>([]);\n  // https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/\n  const [iceServers, setIceServers] = useState<RTCIceServer[]>([\n    { urls: ['stun:stun.wener.me'] },\n    { urls: ['stun:stun2.wener.me'] },\n  ]);\n\n  const [devices, setDevices] = useState<MediaDeviceInfo[]>([]);\n\n  const connRef = useRef<RTCPeerConnection>();\n  const remoteRef = useRef<RTCPeerConnection>();\n  const metaRef = useRef<RTCDataChannel>();\n\n  const globalThis = getGlobalThis();\n\n  useAsyncEffect(async () => {\n    if (navigator.mediaDevices?.enumerateDevices) {\n      setDevices(await navigator.mediaDevices.enumerateDevices());\n    }\n  }, []);\n\n  useAsyncEffect(async ({ setCloser }) => {\n    if (!globalThis.RTCPeerConnection) {\n      return;\n    }\n    const closer = [];\n    setCloser(() => closer.forEach((v) => v()));\n\n    setPhase('初始化');\n    const configuration = {\n      iceServers,\n    };\n    const conn = (connRef.current = new RTCPeerConnection(configuration));\n    closer.push(addPeerConnectionStateListener(conn, setConnState));\n    closer.push(conn.close.bind(conn));\n\n    window['WebRTCCheckerTest'] = { conn };\n\n    const candidates = [];\n    const gatherReady = createLazyPromise();\n    const connectionReady = createLazyPromise();\n    conn.addEventListener('icegatheringstatechange', (e) => {\n      if (conn.iceGatheringState === 'complete') {\n        gatherReady.resolve('');\n      }\n    });\n    conn.addEventListener('connectionstatechange', (e) => {\n      if (['failed', 'connected'].includes(conn.connectionState)) {\n        connectionReady.resolve(conn.connectionState);\n      }\n    });\n\n    conn.addEventListener('icecandidate', (e) => {\n      console.log('WebRTC Checker local candidate', e.candidate);\n\n      if (e.candidate) {\n        candidates.push(e.candidate);\n\n        const {\n          foundation,\n          candidate,\n          address,\n          component,\n          ip,\n          port,\n          priority,\n          protocol,\n          relatedAddress,\n          relatedPort,\n          sdpMLineIndex,\n          sdpMid,\n          tcpType,\n          type,\n          usernameFragment,\n        } = e.candidate as any;\n\n        setCandidates(\n          produce((s) => {\n            s.push({\n              url: e.url,\n              candidate,\n              address,\n              component,\n              foundation,\n              ip,\n              port,\n              priority,\n              protocol,\n              relatedAddress,\n              relatedPort,\n              sdpMLineIndex,\n              sdpMid,\n              tcpType,\n              type,\n              usernameFragment,\n            });\n          }),\n        );\n      }\n    });\n    conn.addEventListener('icecandidateerror', (e) => {\n      const { url, errorCode, errorText, hostCandidate } = e;\n\n      setCandidates(\n        produce((s) => {\n          s.push({ url, errorCode, errorText, hostCandidate });\n        }),\n      );\n    });\n\n    const meta = (metaRef.current = conn.createDataChannel('meta', {\n      ordered: true,\n    }));\n    closer.push(meta.close.bind(meta));\n\n    const offer = await conn.createOffer({\n      offerToReceiveAudio: true,\n      offerToReceiveVideo: true,\n    });\n    await conn.setLocalDescription(offer);\n\n    //\n    setPhase('等待待选信息');\n    await gatherReady;\n\n    //\n    setPhase('应答');\n    const remote = (remoteRef.current = new RTCPeerConnection(configuration));\n    const remoteCandidates = getCandidates(remote);\n    closer.push(remote.close.bind(remote));\n\n    await remote.setRemoteDescription(offer);\n\n    const answer = await remote.createAnswer();\n    await remote.setLocalDescription(answer);\n\n    setPhase('添加待选信息');\n    for (const candidate of candidates) {\n      await remote.addIceCandidate(candidate);\n    }\n\n    setPhase('等待应答待选信息');\n    await remoteCandidates;\n\n    setPhase('接受应答');\n    await conn.setRemoteDescription(answer);\n\n    setPhase('添加应答待选信息');\n    for (const candidate of await remoteCandidates) {\n      await conn.addIceCandidate(candidate);\n    }\n\n    //\n    setPhase('等待链接');\n    await connectionReady;\n\n    setPhase((await connectionReady) === 'connected' ? '已链接' : '链接失败');\n  }, []);\n\n  const ConnectionStates = [\n    { label: '链接状态', name: 'connectionState' },\n    { label: 'ICE 链接状态', name: 'iceConnectionState' },\n    { label: 'ICE 收集状态', name: 'iceGatheringState' },\n    { label: '信令状态', name: 'signalingState' },\n    { label: 'SCTP 状态', name: 'sctpState' },\n    { label: 'SCTP 传输状态', name: 'sctpTransportState' },\n  ];\n\n  const columns = useBreakpoints({ values: [1, 2, 3] });\n  const supportColumns = useBreakpoints({ values: [2, 2, 4, 4] });\n\n  return (\n    <div>\n      <h3>WebRTC 支持</h3>\n      <Descriptions column={supportColumns} layout=\"vertical\" bordered>\n        <Descriptions.Item label=\"RTCPeerConnection\">{emojiOfBoolean(globalThis.RTCPeerConnection)}</Descriptions.Item>\n        <Descriptions.Item label=\"RTCDataChannel\">{emojiOfBoolean(globalThis.RTCDataChannel)}</Descriptions.Item>\n        <Descriptions.Item label=\"getUserMedia\">\n          {emojiOfBoolean(globalThis.navigator?.mediaDevices?.getUserMedia)}\n        </Descriptions.Item>\n        <Descriptions.Item label=\"getDisplayMedia\">\n          {emojiOfBoolean(globalThis.navigator?.mediaDevices?.['getDisplayMedia'])}\n        </Descriptions.Item>\n      </Descriptions>\n\n      <h3>WebRTC 链接 - {phase}</h3>\n\n      <Descriptions className=\"descriptions-table-fixed\" column={columns} layout=\"vertical\" bordered>\n        {ConnectionStates.map(({ name, label }) => (\n          <Descriptions.Item label={label} key={name}>\n            {connState[name] ?? 'N/A'}\n          </Descriptions.Item>\n        ))}\n\n        <Descriptions.Item span={columns} label=\"媒体信息\">\n          <div>\n            <table className=\"media\">\n              <thead>\n                <tr>\n                  <th>索引</th>\n                  <th>媒体</th>\n                  <th>端口</th>\n                  <th className=\"protocol\">协议</th>\n                  <th className=\"format\">格式</th>\n                </tr>\n              </thead>\n              <tbody>\n                {parseMediaDescription(connRef.current?.localDescription?.sdp).map(\n                  ({ media, port, protocol, format }, i) => (\n                    <tr key={i}>\n                      <td>{i}</td>\n                      <td>{media}</td>\n                      <td>{port}</td>\n                      <td className=\"protocol\">{protocol}</td>\n                      <td className=\"format\">{format}</td>\n                    </tr>\n                  ),\n                )}\n              </tbody>\n            </table>\n          </div>\n        </Descriptions.Item>\n\n        <Descriptions.Item span={columns} label=\"编码格式\">\n          <div>\n            <table className=\"encoding\">\n              <thead>\n                <tr>\n                  <th>类型</th>\n                  <th>编码</th>\n                  <th>频率</th>\n                </tr>\n              </thead>\n              <tbody>\n                {parsePayloadType(connRef.current?.localDescription?.sdp ?? '')\n                  .sort(({ type: a }, { type: b }) => a - b)\n                  .map(({ type, encodingName, encodingParameter, clockRate }, i) => (\n                    <tr key={type}>\n                      <td>{type}</td>\n                      <td>{encodingName}</td>\n                      <td>\n                        {clockRate}/{clockRate / 1000}Khz\n                      </td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n          </div>\n        </Descriptions.Item>\n\n        <Descriptions.Item\n          span={columns}\n          label={\n            <div>\n              链接待选信息 / candidates / {candidates.length}\n              {connState.iceGatheringState === 'gathering' ? <LoadingOutlined /> : null}\n            </div>\n          }\n        >\n          <div>\n            <table className=\"candidate\">\n              <thead>\n                <tr>\n                  <th className=\"sdp-mid\">媒体</th>\n                  <th className=\"address\">地址</th>\n                  <th>协议</th>\n                  <th>类型</th>\n                  <th>用户</th>\n                  <th className=\"priority\">Foundation</th>\n                  <th className=\"priority\">优先级</th>\n                </tr>\n              </thead>\n              <tbody>\n                {candidates\n                  .filter(({ errorCode }) => !errorCode)\n                  .sort(({ sdpMid: a }, { sdpMid: b }) => a - b)\n                  .map(\n                    (\n                      {\n                        ip,\n                        address,\n                        port,\n                        protocol,\n                        type,\n                        component,\n                        relatedAddress,\n                        relatePort,\n                        priority,\n                        foundation,\n                        usernameFragment,\n\n                        sdpMid,\n                      },\n                      i,\n                    ) => (\n                      <tr key={i}>\n                        <td className=\"sdp-mid\">{sdpMid}</td>\n                        <td className=\"address\">\n                          {ip || address}:{port}\n                        </td>\n                        <td>{protocol}</td>\n                        <td>\n                          {type}/{component}\n                        </td>\n                        <td>{usernameFragment}</td>\n                        <td className=\"priority\">{foundation}</td>\n                        <td className=\"priority\">{priority}</td>\n                      </tr>\n                    ),\n                  )}\n              </tbody>\n            </table>\n\n            <h4>异常</h4>\n\n            {candidates\n              .filter(({ errorCode }) => errorCode)\n              .map((candidate, i) => (\n                <CandidateErrorLine candidate={candidate} key={i} />\n              ))}\n          </div>\n        </Descriptions.Item>\n\n        <Descriptions.Item span={columns} label=\"设备信息\">\n          <div>\n            <table style={{ tableLayout: 'auto' }}>\n              <thead>\n                <tr>\n                  <th style={{ minWidth: 40 }}>标签</th>\n                  <th>类型</th>\n                  <th>分组ID</th>\n                  <th>设备ID</th>\n                </tr>\n              </thead>\n              <tbody>\n                {devices.map(({ label, kind, groupId, deviceId }, i) => (\n                  <tr key={i}>\n                    <td style={{ minWidth: 40 }}>{label || 'N/A'}</td>\n                    <td>{kind}</td>\n                    <td>{renderSummary(groupId)}</td>\n                    <td>{renderSummary(deviceId)}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </Descriptions.Item>\n\n        <Descriptions.Item label=\"支持的设备限制\" span={columns}>\n          <div>\n            <pre>\n              {JSON.stringify(globalThis?.navigator?.mediaDevices?.getSupportedConstraints?.() ?? {}, null, '  ')}\n            </pre>\n          </div>\n        </Descriptions.Item>\n\n        <Descriptions.Item span={columns} label=\"请求方描述信息 / offer\">\n          <div style={{ width: '100%', overflowX: 'scroll' }}>\n            <pre>{connRef.current?.localDescription?.sdp}</pre>\n          </div>\n        </Descriptions.Item>\n\n        <Descriptions.Item span={columns} label=\"接受方描述信息 / answer\">\n          <div style={{ width: '100%', overflowX: 'scroll' }}>\n            <pre>{remoteRef.current?.localDescription?.sdp}</pre>\n          </div>\n        </Descriptions.Item>\n      </Descriptions>\n\n      <style jsx global>{`\n        @media (max-width: 576px) {\n          .descriptions-table-fixed .ant-descriptions-view > table {\n            table-layout: fixed !important;\n          }\n\n          table.media,\n          table.candidate,\n          table.encoding {\n            display: block !important;\n          }\n        }\n      `}</style>\n      <style jsx>{`\n        h3,\n        h4 {\n          margin-top: 16px;\n          margin-bottom: 8px;\n        }\n\n        table.media,\n        table.candidate,\n        table.encoding {\n          overflow-x: auto;\n          white-space: nowrap;\n          table-layout: unset;\n        }\n\n        table tr:hover {\n          background-color: #edf0f4;\n        }\n\n        table.candidate td,\n        table.candidate th,\n        table.media td,\n        table.media th,\n        table.encoding td,\n        table.encoding th {\n          width: 70px;\n          text-align: center;\n        }\n        .candidate td.address,\n        .candidate th.address {\n          white-space: nowrap;\n\n          width: unset;\n          text-align: left;\n        }\n        .candidate td.priority,\n        .candidate th.priority {\n          width: 140px;\n          text-align: right;\n        }\n        .candidate td.sdp-mid,\n        .candidate th.sdp-mid {\n          width: 40px;\n        }\n\n        table.media td.format,\n        table.media th.format {\n          width: auto;\n          text-align: left;\n        }\n        table.media td.protocol,\n        table.media th.protocol {\n          width: 200px;\n        }\n\n        pre {\n          white-space: pre-wrap;\n          word-break: break-word;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nfunction emojiOfBoolean(s) {\n  return s ? '✅ - 支持' : '❌ - 不支持';\n}\n\nfunction parseMediaDescription(sdp) {\n  return (sdp ?? '')\n    .split('\\n')\n    .filter((v) => v.startsWith('m='))\n    .map((v) => v.substring(2))\n    .map((v) => v.match(/^(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(.*)/))\n    .map(([_, media, port, protocol, format]) => ({\n      media,\n      port,\n      protocol,\n      format,\n    }));\n}\n\nfunction parsePayloadType(sdp) {\n  return (sdp ?? '')\n    .split('\\n')\n    .filter((v) => v.startsWith('a=rtpmap:'))\n    .map((v) => v.substring('a=rtpmap:'.length))\n    .map((v) => v.match(/^(\\S+)\\s+([^/]+)[/]([^/]+)(\\s+(.*))?/))\n    .map(([_, type, encodingName, clockRate, encodingParameter]) => ({\n      type,\n      encodingName,\n      clockRate,\n      encodingParameter,\n    }));\n}\n\n/// https://getbootstrap.com/docs/4.1/layout/overview/\n/// xm md lg xl\nfunction useBreakpoints({ breaks = [575.98, 768.98, 991.98, 1199.98], values = null } = {}) {\n  const onResize = () => {\n    const w = getGlobalThis()['innerWidth'] || 0;\n    let i = breaks.findIndex((v) => v > w);\n    i = i === -1 ? breaks.length : i;\n    let v = i;\n    if (values) {\n      if (i > values.length - 1) {\n        v = values[values.length - 1];\n      } else {\n        v = values[i];\n      }\n    }\n    return v;\n  };\n\n  const [val, setVal] = useState(onResize);\n\n  useEffect(() => {\n    setVal(onResize());\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n\n  return val;\n}\n\nfunction renderSummary(s: string) {\n  if (s.length < 10) {\n    return s;\n  }\n  return (\n    <details>\n      <summary title={s}>{s.substring(0, 8)}</summary>\n      {s}\n    </details>\n  );\n}\n"],"names":["die","error","args","e","errors","msg","apply","Error","length","join","data","path","op","plugin","getCandidates","conn","candidatesPromise","createLazyPromise","candidates","handler","candidate","push","iceGatheringState","resolve","addEventListener","finally","removeEventListener","getPeerConnectionState","connectionState","iceConnectionState","signalingState","idpErrorInfo","sctpState","sctp","state","sctpTransportState","transport","addPeerConnectionStateListener","onStateChange","neo","produce","s","Object","assign","events","forEach","v","CandidateErrorLine","url","errorCode","errorText","hostCandidate","display","alignItems","WebRTCChecker","phase","setPhase","useState","connState","setConnState","setCandidates","iceServers","setIceServers","urls","devices","setDevices","connRef","useRef","remoteRef","metaRef","globalThis","getGlobalThis","useAsyncEffect","navigator","mediaDevices","enumerateDevices","setCloser","RTCPeerConnection","closer","configuration","current","close","bind","window","gatherReady","connectionReady","includes","console","log","foundation","address","component","ip","port","priority","protocol","relatedAddress","relatedPort","sdpMLineIndex","sdpMid","tcpType","type","usernameFragment","meta","createDataChannel","ordered","offer","createOffer","offerToReceiveAudio","offerToReceiveVideo","setLocalDescription","remote","remoteCandidates","setRemoteDescription","answer","createAnswer","addIceCandidate","ConnectionStates","label","name","columns","useBreakpoints","values","supportColumns","emojiOfBoolean","RTCDataChannel","getUserMedia","map","parseMediaDescription","localDescription","sdp","media","format","i","parsePayloadType","sort","a","b","encodingName","encodingParameter","clockRate","filter","relatePort","tableLayout","minWidth","kind","groupId","deviceId","renderSummary","JSON","stringify","getSupportedConstraints","width","overflowX","split","startsWith","substring","match","_","breaks","onResize","w","findIndex","val","setVal","useEffect"],"mappings":"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"}