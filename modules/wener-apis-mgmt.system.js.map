{"version":3,"file":"wener-apis-mgmt.system.js","sources":["../../src/modules/mgmt/ModuleManagementService.ts","../../../../.yarn/cache/immer-npm-6.0.9-1cab3ed201-e55b0d70c9.zip/node_modules/immer/dist/immer.esm.js","../../../../.yarn/$$virtual/use-immer-virtual-125d4b5db4/0/cache/use-immer-npm-0.4.0-49af8e1014-ec02caa3b2.zip/node_modules/use-immer/dist/use-immer.module.js","../../../../.yarn/cache/numeral-npm-2.0.6-75938e5791-962d3200e2.zip/node_modules/numeral/numeral.js","../../src/modules/mgmt/components/ModuleList.tsx","../../src/modules/mgmt/components/ModuleManagementPanel.tsx"],"sourcesContent":["import { getBootService, loadImportOverrides, ModuleService, persistImportOverrides } from 'src/modules/boot';\nimport ModuleMetas from './modules.json';\n\nexport interface ModuleInfo {\n  name;\n  resolved?;\n  internal?: boolean;\n  predefined?: boolean;\n  override?: boolean;\n  loaded?;\n  metadata?;\n  hasMetadata?: boolean;\n\n  loading?;\n  version?;\n\n  source?: string;\n\n  dependencies?: string[];\n  dependents?: string[];\n\n  loadingSize?: boolean;\n  size?: number;\n}\n\nexport function getVersionFromResolvedUrl(url) {\n  const jsdelivr = 'https://cdn.jsdelivr.net/npm/';\n  if (url.startsWith(jsdelivr)) {\n    const m = url.substr(jsdelivr.length).match(/(^@[^/]+[/])?[^/@]+@([^/]+)/);\n    if (m) {\n      return m[2];\n    }\n  }\n\n  return 'latest';\n}\n\nexport function getSourceFromResolvedUrl(url) {\n  const jsdelivr = 'https://cdn.jsdelivr.net/npm/';\n  if (url.startsWith(jsdelivr)) {\n    return 'jsdelivr';\n  }\n  const unpkg = 'https://unpkg.com/';\n  if (url.startsWith(unpkg)) {\n    return 'unpkg';\n  }\n  if (url.startsWith(location.origin)) {\n    return 'site';\n  }\n  // ignore 172\n  if (/^https?:\\/\\/(localhost|127\\.0\\.0|192\\.168|10\\.)/.test(url)) {\n    return 'localhost';\n  }\n  return 'unknown';\n}\n\nexport class ModuleManagementService {\n  private _boot = getBootService();\n  private _modules: ModuleService = this._boot.modules;\n  private System = this._boot.System;\n\n  async addOverrideModule({ name, resolved }) {\n    this._modules.overrides[name] = resolved;\n    await this.persistImportOverrides();\n  }\n  async removeOverrideModule({ name }) {\n    delete this._modules.overrides[name];\n    await this.persistImportOverrides();\n  }\n  async resetOverrideModules() {\n    this._modules.overrides = {};\n    await this.persistImportOverrides();\n  }\n\n  async loadImportOverrides() {\n    Object.assign(this._modules.overrides, await loadImportOverrides());\n  }\n\n  async persistImportOverrides() {\n    return await persistImportOverrides(this._modules.overrides);\n  }\n\n  getModules(): ModuleInfo[] {\n    const { System, _modules } = this;\n\n    let all: ModuleInfo[] = [];\n    all = all.concat(\n      Object.entries(_modules.imports).map(([name, resolved]) => ({\n        name,\n        resolved,\n        predefined: true,\n      })),\n    );\n    {\n      // 使用预先有的元数据覆盖\n      const byName = keyBy(all, 'name');\n      for (const v of ModuleMetas) {\n        const m = (byName[v.name] = byName[v.name] || { name: v.name, resolved: _modules.tryResolve(v.name) });\n        Object.assign(m, v);\n      }\n      // 添加 override 信息\n      for (const [name, resolved] of Object.entries(_modules.overrides)) {\n        byName[name] = Object.assign(byName[name] || {}, { name, resolved, override: true });\n      }\n      all = Object.values(byName);\n    }\n\n    const byResolved = keyBy(all, 'resolved');\n\n    for (const [url, mod] of System.entries()) {\n      // maybe deleted\n      if (!mod) {\n        continue;\n      }\n      const info = (byResolved[url] = byResolved[url] || { name: _modules.resolveName(url) || url, resolved: url });\n      info.loaded = true;\n\n      // load metadata\n      if (_modules.isInternal(info.name)) {\n        info.metadata = mod.metadata || {};\n      }\n    }\n\n    all = Object.values(byResolved);\n    all.forEach((v) => {\n      v.internal = _modules.isInternal(v.name);\n      v.hasMetadata = Boolean(Object.keys(v.metadata || {}).length);\n      v.source = getSourceFromResolvedUrl(v.resolved);\n      v.version = getVersionFromResolvedUrl(v.resolved);\n      v.dependencies = Array.from(_modules.dependencies[v.name] || []);\n    });\n\n    const dependents = {};\n    all\n      .flatMap(({ name, dependencies }) => dependencies.map((v) => [v, name]))\n      .reduce((v, [a, b]) => {\n        (v[a] = v[a] || []).push(b);\n        return v;\n      }, dependents);\n    all.forEach((v) => {\n      v.dependents = dependents[v.name] || [];\n    });\n    return all;\n  }\n}\n\nfunction keyBy(o: any[], key) {\n  return Object.fromEntries(o.map((v) => [v[key], v]));\n}\n","function n(n){for(var t=arguments.length,r=Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=L[n],o=i?\"function\"==typeof i?i.apply(null,r):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(r.length?\" \"+r.join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function t(n){return!!n&&!!n[G]}function r(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var t=Object.getPrototypeOf(n);return!t||t===Object.prototype}(n)||Array.isArray(n)||!!n[B]||!!n.constructor[B]||c(n)||s(n))}function e(n){if(n&&n[G])return n[G].t}function i(n,t,r){void 0===r&&(r=!1),0===o(n)?(r?Object.keys:Q)(n).forEach((function(r){return t(r,n[r],n)})):n.forEach((function(r,e){return t(e,r,n)}))}function o(n){var t=n[G];return t?t.i>3?t.i-4:t.i:Array.isArray(n)?1:c(n)?2:s(n)?3:0}function u(n,t){return 2===o(n)?n.has(t):Object.prototype.hasOwnProperty.call(n,t)}function a(n,t){return 2===o(n)?n.get(t):n[t]}function f(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t}function c(n){return U&&n instanceof Map}function s(n){return W&&n instanceof Set}function v(n){return n.o||n.t}function p(t,r){if(void 0===r&&(r=!1),Array.isArray(t))return t.slice();var e=Object.create(Object.getPrototypeOf(t));return i(t,(function(i){if(i!==G){var o=Object.getOwnPropertyDescriptor(t,i),u=o.value;o.get&&(r||n(1),u=o.get.call(t)),o.enumerable?e[i]=u:Object.defineProperty(e,i,{value:u,writable:!0,configurable:!0})}})),e}function d(n,e){t(n)||h(n)||!r(n)||(o(n)>1&&(n.set=n.add=n.clear=n.delete=l),Object.freeze(n),e&&i(n,(function(n,t){return d(t,!0)}),!0))}function l(){n(2)}function h(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function y(t){var r=V[t];return r||n(\"production\"!==process.env.NODE_ENV?18:19,t),r}function b(n,t){V[n]=t}function m(){return\"production\"===process.env.NODE_ENV||K||n(0),K}function _(n,t){t&&(y(\"Patches\"),n.u=[],n.s=[],n.v=t)}function j(n){O(n),n.p.forEach(w),n.p=null}function O(n){n===K&&(K=n.l)}function g(n){return K={p:[],l:K,h:n,m:!0,_:0}}function w(n){var t=n[G];0===t.i||1===t.i?t.j():t.O=!0}function S(t,e){e._=e.p.length;var i=e.p[0],o=void 0!==t&&t!==i;return e.h.g||y(\"ES5\").S(e,t,o),o?(i[G].P&&(j(e),n(4)),r(t)&&(t=P(e,t),e.l||A(e,t)),e.u&&y(\"Patches\").M(i[G],t,e.u,e.s)):t=P(e,i,[]),j(e),e.u&&e.v(e.u,e.s),t!==q?t:void 0}function P(n,t,r){if(h(t))return t;var e=t[G];if(!e)return i(t,(function(i,o){return M(n,e,t,i,o,r)}),!0),t;if(e.A!==n)return t;if(!e.P)return A(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=p(e.k,!0):e.o;i(o,(function(t,i){return M(n,e,o,t,i,r)})),A(n,o,!1),r&&n.u&&y(\"Patches\").R(e,r,n.u,n.s)}return e.o}function M(e,i,c,s,v,p){if(\"production\"!==process.env.NODE_ENV&&v===c&&n(5),t(v)){var d=P(e,v,p&&i&&3!==i.i&&!u(i.D,s)?p.concat(s):void 0);if(h=s,y=d,2===(b=o(l=c))?l.set(h,y):3===b?(l.delete(h),l.add(y)):l[h]=y,!t(d))return;e.m=!1}var l,h,y,b;if((!i||!f(v,a(i.t,s)))&&r(v)){if(!e.h.N&&e._<1)return;P(e,v),i&&i.A.l||A(e,v)}}function A(n,t,r){void 0===r&&(r=!1),n.h.N&&n.m&&d(t,r)}function x(n,t){var r=n[G],e=Reflect.getOwnPropertyDescriptor(r?v(r):n,t);return e&&e.value}function z(n){if(!n.P){if(n.P=!0,0===n.i||1===n.i){var t=n.o=p(n.t);i(n.p,(function(n,r){t[n]=r})),n.p=void 0}n.l&&z(n.l)}}function I(n){n.o||(n.o=p(n.t))}function E(n,t,r){var e=c(t)?y(\"MapSet\").T(t,r):s(t)?y(\"MapSet\").F(t,r):n.g?function(n,t){var r=Array.isArray(n),e={i:r?1:0,A:t?t.A:m(),P:!1,I:!1,D:{},l:t,t:n,k:null,p:{},o:null,j:null,C:!1},i=e,o=Y;r&&(i=[e],o=Z);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(t,r):y(\"ES5\").J(t,r);return(r?r.A:m()).p.push(e),e}function k(n,t){n.g?z(t):y(\"ES5\").K(t)}function R(){function e(n,t){var r=n[G];if(r&&!r.$){r.$=!0;var e=n[t];return r.$=!1,e}return n[t]}function o(n){n.P||(n.P=!0,n.l&&o(n.l))}function a(n){n.o||(n.o=c(n.t))}function c(n){var t=n&&n[G];if(t){t.$=!0;var r=p(t.k,!0);return t.$=!1,r}return p(n)}function s(n){for(var t=n.length-1;t>=0;t--){var r=n[t][G];if(!r.P)switch(r.i){case 5:l(r)&&o(r);break;case 4:d(r)&&o(r)}}}function d(n){for(var t=n.t,r=n.k,e=Object.keys(r),i=e.length-1;i>=0;i--){var o=e[i],a=t[o];if(void 0===a&&!u(t,o))return!0;var c=r[o],s=c&&c[G];if(s?s.t!==a:!f(c,a))return!0}return e.length!==Object.keys(t).length}function l(n){var t=n.k;if(t.length!==n.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}function h(t){t.O&&n(3,JSON.stringify(v(t)))}var y={};b(\"ES5\",{J:function(n,t){var u=Array.isArray(n),s=c(n);i(s,(function(t){!function(n,t,i){var u=y[t];u?u.enumerable=i:y[t]=u={enumerable:i,get:function(){return function(n,t){h(n);var i=e(v(n),t);return n.$?i:i===e(n.t,t)&&r(i)?(a(n),n.o[t]=E(n.A.h,i,n)):i}(this[G],t)},set:function(n){!function(n,t,r){if(h(n),n.D[t]=!0,!n.P){if(f(r,e(v(n),t)))return;o(n),a(n)}n.o[t]=r}(this[G],t,n)}},Object.defineProperty(n,t,u)}(s,t,u||function(n,t){var r=Object.getOwnPropertyDescriptor(n,t);return!(!r||!r.enumerable)}(n,t))}));var p={i:u?5:4,A:t?t.A:m(),P:!1,$:!1,I:!1,D:{},l:t,t:n,k:s,o:null,O:!1,C:!1};return Object.defineProperty(s,G,{value:p,writable:!0}),s},K:o,S:function(n,r,e){n.p.forEach((function(n){n[G].$=!0})),e?t(r)&&r[G].A===n&&s(n.p):(n.u&&function n(t){if(t&&\"object\"==typeof t){var r=t[G];if(r){var e=r.t,a=r.k,f=r.D,c=r.i;if(4===c)i(a,(function(t){t!==G&&(void 0!==e[t]||u(e,t)?f[t]||n(a[t]):(f[t]=!0,o(r)))})),i(e,(function(n){void 0!==a[n]||u(a,n)||(f[n]=!1,o(r))}));else if(5===c){if(l(r)&&(o(r),f.length=!0),a.length<e.length)for(var s=a.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<a.length;v++)f[v]=!0;for(var p=Math.min(a.length,e.length),d=0;d<p;d++)void 0===f[d]&&n(a[d])}}}}(n.p[0]),s(n.p))}})}function D(){function r(n){if(!n||\"object\"!=typeof n)return n;if(Array.isArray(n))return n.map(r);if(c(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],r(n[1])]})));if(s(n))return new Set(Array.from(n).map(r));var t=Object.create(Object.getPrototypeOf(n));for(var e in n)t[e]=r(n[e]);return t}function e(n){return t(n)?r(n):n}var f=\"add\";b(\"Patches\",{U:function(t,e){return e.forEach((function(e){for(var i=e.path,u=e.op,c=t,s=0;s<i.length-1;s++)\"object\"!=typeof(c=a(c,i[s]))&&n(15,i.join(\"/\"));var v=o(c),p=r(e.value),d=i[i.length-1];switch(u){case\"replace\":switch(v){case 2:return c.set(d,p);case 3:n(16);default:return c[d]=p}case f:switch(v){case 1:return c.splice(d,0,p);case 2:return c.set(d,p);case 3:return c.add(p);default:return c[d]=p}case\"remove\":switch(v){case 1:return c.splice(d,1);case 2:return c.delete(d);case 3:return c.delete(e.value);default:return delete c[d]}default:n(17,u)}})),t},R:function(n,t,r,o){switch(n.i){case 0:case 4:case 2:return function(n,t,r,o){var c=n.t,s=n.o;i(n.D,(function(n,i){var v=a(c,n),p=a(s,n),d=i?u(c,n)?\"replace\":f:\"remove\";if(v!==p||\"replace\"!==d){var l=t.concat(n);r.push(\"remove\"===d?{op:d,path:l}:{op:d,path:l,value:p}),o.push(d===f?{op:\"remove\",path:l}:\"remove\"===d?{op:f,path:l,value:e(v)}:{op:\"replace\",path:l,value:e(v)})}}))}(n,t,r,o);case 5:case 1:return function(n,t,r,i){var o=n.t,u=n.D,a=n.o;if(a.length<o.length){var c=[a,o];o=c[0],a=c[1];var s=[i,r];r=s[0],i=s[1]}for(var v=a.length-o.length,p=0;o[p]===a[p]&&p<o.length;)++p;for(var d=o.length;d>p&&o[d-1]===a[d+v-1];)--d;for(var l=p;l<d;++l)if(u[l]&&a[l]!==o[l]){var h=t.concat([l]);r.push({op:\"replace\",path:h,value:e(a[l])}),i.push({op:\"replace\",path:h,value:e(o[l])})}for(var y=r.length,b=d+v-1;b>=d;--b){var m=t.concat([b]);r[y+b-d]={op:f,path:m,value:e(a[b])},i.push({op:\"remove\",path:m})}}(n,t,r,o);case 3:return function(n,t,r,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=t.concat([u]);r.push({op:\"remove\",path:i,value:n}),e.unshift({op:f,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=t.concat([u]);r.push({op:f,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,t,r,o)}},M:function(n,t,r,e){r.push({op:\"replace\",path:[],value:t}),e.push({op:\"replace\",path:[],value:n.t})}})}function N(){function t(n,t){function r(){this.constructor=n}u(n,t),n.prototype=(r.prototype=t.prototype,new r)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function i(n){n.o||(n.o=new Set,n.t.forEach((function(t){if(r(t)){var e=E(n.A.h,t,n);n.p.set(t,e),n.o.add(e)}else n.o.add(t)})))}function o(t){t.O&&n(3,JSON.stringify(v(t)))}var u=function(n,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])})(n,t)},a=function(){function n(n,t){return this[G]={i:2,l:t,A:t?t.A:m(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}t(n,Map);var i=n.prototype;return Object.defineProperty(i,\"size\",{get:function(){return v(this[G]).size}}),i.has=function(n){return v(this[G]).has(n)},i.set=function(n,t){var r=this[G];return o(r),v(r).get(n)!==t&&(e(r),k(r.A.h,r),r.D.set(n,!0),r.o.set(n,t),r.D.set(n,!0)),this},i.delete=function(n){if(!this.has(n))return!1;var t=this[G];return o(t),e(t),k(t.A.h,t),t.D.set(n,!1),t.o.delete(n),!0},i.clear=function(){var n=this[G];return o(n),e(n),k(n.A.h,n),n.D=new Map,n.o.clear()},i.forEach=function(n,t){var r=this;v(this[G]).forEach((function(e,i){n.call(t,r.get(i),i,r)}))},i.get=function(n){var t=this[G];o(t);var i=v(t).get(n);if(t.I||!r(i))return i;if(i!==t.t.get(n))return i;var u=E(t.A.h,i,t);return e(t),t.o.set(n,u),u},i.keys=function(){return v(this[G]).keys()},i.values=function(){var n,t=this,r=this.keys();return(n={})[H]=function(){return t.values()},n.next=function(){var n=r.next();return n.done?n:{done:!1,value:t.get(n.value)}},n},i.entries=function(){var n,t=this,r=this.keys();return(n={})[H]=function(){return t.entries()},n.next=function(){var n=r.next();if(n.done)return n;var e=t.get(n.value);return{done:!1,value:[n.value,e]}},n},i[H]=function(){return this.entries()},n}(),f=function(){function n(n,t){return this[G]={i:3,l:t,A:t?t.A:m(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}t(n,Set);var r=n.prototype;return Object.defineProperty(r,\"size\",{get:function(){return v(this[G]).size}}),r.has=function(n){var t=this[G];return o(t),t.o?!!t.o.has(n)||!(!t.p.has(n)||!t.o.has(t.p.get(n))):t.t.has(n)},r.add=function(n){var t=this[G];return o(t),this.has(n)||(i(t),k(t.A.h,t),t.o.add(n)),this},r.delete=function(n){if(!this.has(n))return!1;var t=this[G];return o(t),i(t),k(t.A.h,t),t.o.delete(n)||!!t.p.has(n)&&t.o.delete(t.p.get(n))},r.clear=function(){var n=this[G];return o(n),i(n),k(n.A.h,n),n.o.clear()},r.values=function(){var n=this[G];return o(n),i(n),n.o.values()},r.entries=function(){var n=this[G];return o(n),i(n),n.o.entries()},r.keys=function(){return this.values()},r[H]=function(){return this.values()},r.forEach=function(n,t){for(var r=this.values(),e=r.next();!e.done;)n.call(t,e.value,e.value,this),e=r.next()},n}();b(\"MapSet\",{T:function(n,t){return new a(n,t)},F:function(n,t){return new f(n,t)}})}function T(){R(),N(),D()}function F(n){return n}function C(n){return n}var J,K,$=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),U=\"undefined\"!=typeof Map,W=\"undefined\"!=typeof Set,X=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,q=$?Symbol(\"immer-nothing\"):((J={})[\"immer-nothing\"]=!0,J),B=$?Symbol(\"immer-draftable\"):\"__$immer_draftable\",G=$?Symbol(\"immer-state\"):\"__$immer_state\",H=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",L={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},19:function(n){return\"plugin not loaded: \"+n},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\"},Q=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,V={},Y={get:function(n,t){if(t===G)return n;var e=n.p;if(!n.P&&u(e,t))return e[t];var i=v(n)[t];if(n.I||!r(i))return i;if(n.P){if(i!==x(n.t,t))return i;e=n.o}return e[t]=E(n.A.h,i,n)},has:function(n,t){return t in v(n)},ownKeys:function(n){return Reflect.ownKeys(v(n))},set:function(n,t,r){if(!n.P){var e=x(n.t,t);if(r?f(e,r)||r===n.p[t]:f(e,r)&&t in n.t)return!0;I(n),z(n)}return n.D[t]=!0,n.o[t]=r,!0},deleteProperty:function(n,t){return void 0!==x(n.t,t)||t in n.t?(n.D[t]=!1,I(n),z(n)):n.D[t]&&delete n.D[t],n.o&&delete n.o[t],!0},getOwnPropertyDescriptor:function(n,t){var r=v(n),e=Reflect.getOwnPropertyDescriptor(r,t);return e&&(e.writable=!0,e.configurable=1!==n.i||\"length\"!==t),e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},Z={};i(Y,(function(n,t){Z[n]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Z.deleteProperty=function(t,r){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(r))&&n(13),Y.deleteProperty.call(this,t[0],r)},Z.set=function(t,r,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==r&&isNaN(parseInt(r))&&n(14),Y.set.call(this,t[0],r,e,t[0])};var nn=function(){function e(n){this.g=X,this.N=\"production\"!==process.env.NODE_ENV,\"boolean\"==typeof(null==n?void 0:n.useProxies)&&this.setUseProxies(n.useProxies),\"boolean\"==typeof(null==n?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var i=e.prototype;return i.produce=function(t,e,i){if(\"function\"==typeof t&&\"function\"!=typeof e){var o=e;e=t;var u=this;return function(n){var t=this;void 0===n&&(n=o);for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return u.produce(n,(function(n){var r;return(r=e).call.apply(r,[t,n].concat(i))}))}}var a;if(\"function\"!=typeof e&&n(6),void 0!==i&&\"function\"!=typeof i&&n(7),r(t)){var f=g(this),c=E(this,t,void 0),s=!0;try{a=e(c),s=!1}finally{s?j(f):O(f)}return\"undefined\"!=typeof Promise&&a instanceof Promise?a.then((function(n){return _(f,i),S(n,f)}),(function(n){throw j(f),n})):(_(f,i),S(a,f))}if((a=e(t))!==q)return void 0===a&&(a=t),this.N&&d(a,!0),a},i.produceWithPatches=function(n,t){var r,e,i=this;return\"function\"==typeof n?function(t){for(var r=arguments.length,e=Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return i.produceWithPatches(t,(function(t){return n.apply(void 0,[t].concat(e))}))}:[this.produce(n,t,(function(n,t){r=n,e=t})),r,e]},i.createDraft=function(t){r(t)||n(8);var e=g(this),i=E(this,t,void 0);return i[G].C=!0,O(e),i},i.finishDraft=function(t,r){var e=t&&t[G];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return _(i,r),S(void 0,i)},i.setAutoFreeze=function(n){this.N=n},i.setUseProxies=function(t){X||n(20),this.g=t},i.applyPatches=function(n,r){var e;for(e=r.length-1;e>=0;e--){var i=r[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}var o=y(\"Patches\").U;return t(n)?o(n,r):this.produce(n,(function(n){return o(n,r.slice(e+1))}))},e}(),tn=new nn,rn=tn.produce,en=tn.produceWithPatches.bind(tn),on=tn.setAutoFreeze.bind(tn),un=tn.setUseProxies.bind(tn),an=tn.applyPatches.bind(tn),fn=tn.createDraft.bind(tn),cn=tn.finishDraft.bind(tn);export default rn;export{nn as Immer,an as applyPatches,F as castDraft,C as castImmutable,fn as createDraft,T as enableAllPlugins,R as enableES5,N as enableMapSet,D as enablePatches,cn as finishDraft,B as immerable,t as isDraft,r as isDraftable,q as nothing,e as original,rn as produce,en as produceWithPatches,on as setAutoFreeze,un as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","import r from\"immer\";import{useState as n,useReducer as t,useCallback as o,useMemo as i}from\"react\";function u(t){var i=n(t),u=i[1];return[i[0],o(function(n){u(r(n))},[])]}function e(n,o,u){var e=i(function(){return r(n)},[n]);return t(e,o,u)}export{u as useImmer,e as useImmerReducer};\n//# sourceMappingURL=use-immer.module.js.map\n","/*! @preserve\n * numeral.js\n * version : 2.0.6\n * author : Adam Draper\n * license : MIT\n * http://adamwdraper.github.com/Numeral-js/\n */\n\n(function (global, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(factory);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = factory();\n    } else {\n        global.numeral = factory();\n    }\n}(this, function () {\n    /************************************\n        Variables\n    ************************************/\n\n    var numeral,\n        _,\n        VERSION = '2.0.6',\n        formats = {},\n        locales = {},\n        defaults = {\n            currentLocale: 'en',\n            zeroFormat: null,\n            nullFormat: null,\n            defaultFormat: '0,0',\n            scalePercentBy100: true\n        },\n        options = {\n            currentLocale: defaults.currentLocale,\n            zeroFormat: defaults.zeroFormat,\n            nullFormat: defaults.nullFormat,\n            defaultFormat: defaults.defaultFormat,\n            scalePercentBy100: defaults.scalePercentBy100\n        };\n\n\n    /************************************\n        Constructors\n    ************************************/\n\n    // Numeral prototype object\n    function Numeral(input, number) {\n        this._input = input;\n\n        this._value = number;\n    }\n\n    numeral = function(input) {\n        var value,\n            kind,\n            unformatFunction,\n            regexp;\n\n        if (numeral.isNumeral(input)) {\n            value = input.value();\n        } else if (input === 0 || typeof input === 'undefined') {\n            value = 0;\n        } else if (input === null || _.isNaN(input)) {\n            value = null;\n        } else if (typeof input === 'string') {\n            if (options.zeroFormat && input === options.zeroFormat) {\n                value = 0;\n            } else if (options.nullFormat && input === options.nullFormat || !input.replace(/[^0-9]+/g, '').length) {\n                value = null;\n            } else {\n                for (kind in formats) {\n                    regexp = typeof formats[kind].regexps.unformat === 'function' ? formats[kind].regexps.unformat() : formats[kind].regexps.unformat;\n\n                    if (regexp && input.match(regexp)) {\n                        unformatFunction = formats[kind].unformat;\n\n                        break;\n                    }\n                }\n\n                unformatFunction = unformatFunction || numeral._.stringToNumber;\n\n                value = unformatFunction(input);\n            }\n        } else {\n            value = Number(input)|| null;\n        }\n\n        return new Numeral(input, value);\n    };\n\n    // version number\n    numeral.version = VERSION;\n\n    // compare numeral object\n    numeral.isNumeral = function(obj) {\n        return obj instanceof Numeral;\n    };\n\n    // helper functions\n    numeral._ = _ = {\n        // formats numbers separators, decimals places, signs, abbreviations\n        numberToFormat: function(value, format, roundingFunction) {\n            var locale = locales[numeral.options.currentLocale],\n                negP = false,\n                optDec = false,\n                leadingCount = 0,\n                abbr = '',\n                trillion = 1000000000000,\n                billion = 1000000000,\n                million = 1000000,\n                thousand = 1000,\n                decimal = '',\n                neg = false,\n                abbrForce, // force abbreviation\n                abs,\n                min,\n                max,\n                power,\n                int,\n                precision,\n                signed,\n                thousands,\n                output;\n\n            // make sure we never format a null value\n            value = value || 0;\n\n            abs = Math.abs(value);\n\n            // see if we should use parentheses for negative number or if we should prefix with a sign\n            // if both are present we default to parentheses\n            if (numeral._.includes(format, '(')) {\n                negP = true;\n                format = format.replace(/[\\(|\\)]/g, '');\n            } else if (numeral._.includes(format, '+') || numeral._.includes(format, '-')) {\n                signed = numeral._.includes(format, '+') ? format.indexOf('+') : value < 0 ? format.indexOf('-') : -1;\n                format = format.replace(/[\\+|\\-]/g, '');\n            }\n\n            // see if abbreviation is wanted\n            if (numeral._.includes(format, 'a')) {\n                abbrForce = format.match(/a(k|m|b|t)?/);\n\n                abbrForce = abbrForce ? abbrForce[1] : false;\n\n                // check for space before abbreviation\n                if (numeral._.includes(format, ' a')) {\n                    abbr = ' ';\n                }\n\n                format = format.replace(new RegExp(abbr + 'a[kmbt]?'), '');\n\n                if (abs >= trillion && !abbrForce || abbrForce === 't') {\n                    // trillion\n                    abbr += locale.abbreviations.trillion;\n                    value = value / trillion;\n                } else if (abs < trillion && abs >= billion && !abbrForce || abbrForce === 'b') {\n                    // billion\n                    abbr += locale.abbreviations.billion;\n                    value = value / billion;\n                } else if (abs < billion && abs >= million && !abbrForce || abbrForce === 'm') {\n                    // million\n                    abbr += locale.abbreviations.million;\n                    value = value / million;\n                } else if (abs < million && abs >= thousand && !abbrForce || abbrForce === 'k') {\n                    // thousand\n                    abbr += locale.abbreviations.thousand;\n                    value = value / thousand;\n                }\n            }\n\n            // check for optional decimals\n            if (numeral._.includes(format, '[.]')) {\n                optDec = true;\n                format = format.replace('[.]', '.');\n            }\n\n            // break number and format\n            int = value.toString().split('.')[0];\n            precision = format.split('.')[1];\n            thousands = format.indexOf(',');\n            leadingCount = (format.split('.')[0].split(',')[0].match(/0/g) || []).length;\n\n            if (precision) {\n                if (numeral._.includes(precision, '[')) {\n                    precision = precision.replace(']', '');\n                    precision = precision.split('[');\n                    decimal = numeral._.toFixed(value, (precision[0].length + precision[1].length), roundingFunction, precision[1].length);\n                } else {\n                    decimal = numeral._.toFixed(value, precision.length, roundingFunction);\n                }\n\n                int = decimal.split('.')[0];\n\n                if (numeral._.includes(decimal, '.')) {\n                    decimal = locale.delimiters.decimal + decimal.split('.')[1];\n                } else {\n                    decimal = '';\n                }\n\n                if (optDec && Number(decimal.slice(1)) === 0) {\n                    decimal = '';\n                }\n            } else {\n                int = numeral._.toFixed(value, 0, roundingFunction);\n            }\n\n            // check abbreviation again after rounding\n            if (abbr && !abbrForce && Number(int) >= 1000 && abbr !== locale.abbreviations.trillion) {\n                int = String(Number(int) / 1000);\n\n                switch (abbr) {\n                    case locale.abbreviations.thousand:\n                        abbr = locale.abbreviations.million;\n                        break;\n                    case locale.abbreviations.million:\n                        abbr = locale.abbreviations.billion;\n                        break;\n                    case locale.abbreviations.billion:\n                        abbr = locale.abbreviations.trillion;\n                        break;\n                }\n            }\n\n\n            // format number\n            if (numeral._.includes(int, '-')) {\n                int = int.slice(1);\n                neg = true;\n            }\n\n            if (int.length < leadingCount) {\n                for (var i = leadingCount - int.length; i > 0; i--) {\n                    int = '0' + int;\n                }\n            }\n\n            if (thousands > -1) {\n                int = int.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1' + locale.delimiters.thousands);\n            }\n\n            if (format.indexOf('.') === 0) {\n                int = '';\n            }\n\n            output = int + decimal + (abbr ? abbr : '');\n\n            if (negP) {\n                output = (negP && neg ? '(' : '') + output + (negP && neg ? ')' : '');\n            } else {\n                if (signed >= 0) {\n                    output = signed === 0 ? (neg ? '-' : '+') + output : output + (neg ? '-' : '+');\n                } else if (neg) {\n                    output = '-' + output;\n                }\n            }\n\n            return output;\n        },\n        // unformats numbers separators, decimals places, signs, abbreviations\n        stringToNumber: function(string) {\n            var locale = locales[options.currentLocale],\n                stringOriginal = string,\n                abbreviations = {\n                    thousand: 3,\n                    million: 6,\n                    billion: 9,\n                    trillion: 12\n                },\n                abbreviation,\n                value,\n                i,\n                regexp;\n\n            if (options.zeroFormat && string === options.zeroFormat) {\n                value = 0;\n            } else if (options.nullFormat && string === options.nullFormat || !string.replace(/[^0-9]+/g, '').length) {\n                value = null;\n            } else {\n                value = 1;\n\n                if (locale.delimiters.decimal !== '.') {\n                    string = string.replace(/\\./g, '').replace(locale.delimiters.decimal, '.');\n                }\n\n                for (abbreviation in abbreviations) {\n                    regexp = new RegExp('[^a-zA-Z]' + locale.abbreviations[abbreviation] + '(?:\\\\)|(\\\\' + locale.currency.symbol + ')?(?:\\\\))?)?$');\n\n                    if (stringOriginal.match(regexp)) {\n                        value *= Math.pow(10, abbreviations[abbreviation]);\n                        break;\n                    }\n                }\n\n                // check for negative number\n                value *= (string.split('-').length + Math.min(string.split('(').length - 1, string.split(')').length - 1)) % 2 ? 1 : -1;\n\n                // remove non numbers\n                string = string.replace(/[^0-9\\.]+/g, '');\n\n                value *= Number(string);\n            }\n\n            return value;\n        },\n        isNaN: function(value) {\n            return typeof value === 'number' && isNaN(value);\n        },\n        includes: function(string, search) {\n            return string.indexOf(search) !== -1;\n        },\n        insert: function(string, subString, start) {\n            return string.slice(0, start) + subString + string.slice(start);\n        },\n        reduce: function(array, callback /*, initialValue*/) {\n            if (this === null) {\n                throw new TypeError('Array.prototype.reduce called on null or undefined');\n            }\n\n            if (typeof callback !== 'function') {\n                throw new TypeError(callback + ' is not a function');\n            }\n\n            var t = Object(array),\n                len = t.length >>> 0,\n                k = 0,\n                value;\n\n            if (arguments.length === 3) {\n                value = arguments[2];\n            } else {\n                while (k < len && !(k in t)) {\n                    k++;\n                }\n\n                if (k >= len) {\n                    throw new TypeError('Reduce of empty array with no initial value');\n                }\n\n                value = t[k++];\n            }\n            for (; k < len; k++) {\n                if (k in t) {\n                    value = callback(value, t[k], k, t);\n                }\n            }\n            return value;\n        },\n        /**\n         * Computes the multiplier necessary to make x >= 1,\n         * effectively eliminating miscalculations caused by\n         * finite precision.\n         */\n        multiplier: function (x) {\n            var parts = x.toString().split('.');\n\n            return parts.length < 2 ? 1 : Math.pow(10, parts[1].length);\n        },\n        /**\n         * Given a variable number of arguments, returns the maximum\n         * multiplier that must be used to normalize an operation involving\n         * all of them.\n         */\n        correctionFactor: function () {\n            var args = Array.prototype.slice.call(arguments);\n\n            return args.reduce(function(accum, next) {\n                var mn = _.multiplier(next);\n                return accum > mn ? accum : mn;\n            }, 1);\n        },\n        /**\n         * Implementation of toFixed() that treats floats more like decimals\n         *\n         * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\n         * problems for accounting- and finance-related software.\n         */\n        toFixed: function(value, maxDecimals, roundingFunction, optionals) {\n            var splitValue = value.toString().split('.'),\n                minDecimals = maxDecimals - (optionals || 0),\n                boundedPrecision,\n                optionalsRegExp,\n                power,\n                output;\n\n            // Use the smallest precision value possible to avoid errors from floating point representation\n            if (splitValue.length === 2) {\n              boundedPrecision = Math.min(Math.max(splitValue[1].length, minDecimals), maxDecimals);\n            } else {\n              boundedPrecision = minDecimals;\n            }\n\n            power = Math.pow(10, boundedPrecision);\n\n            // Multiply up by precision, round accurately, then divide and use native toFixed():\n            output = (roundingFunction(value + 'e+' + boundedPrecision) / power).toFixed(boundedPrecision);\n\n            if (optionals > maxDecimals - boundedPrecision) {\n                optionalsRegExp = new RegExp('\\\\.?0{1,' + (optionals - (maxDecimals - boundedPrecision)) + '}$');\n                output = output.replace(optionalsRegExp, '');\n            }\n\n            return output;\n        }\n    };\n\n    // avaliable options\n    numeral.options = options;\n\n    // avaliable formats\n    numeral.formats = formats;\n\n    // avaliable formats\n    numeral.locales = locales;\n\n    // This function sets the current locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    numeral.locale = function(key) {\n        if (key) {\n            options.currentLocale = key.toLowerCase();\n        }\n\n        return options.currentLocale;\n    };\n\n    // This function provides access to the loaded locale data.  If\n    // no arguments are passed in, it will simply return the current\n    // global locale object.\n    numeral.localeData = function(key) {\n        if (!key) {\n            return locales[options.currentLocale];\n        }\n\n        key = key.toLowerCase();\n\n        if (!locales[key]) {\n            throw new Error('Unknown locale : ' + key);\n        }\n\n        return locales[key];\n    };\n\n    numeral.reset = function() {\n        for (var property in defaults) {\n            options[property] = defaults[property];\n        }\n    };\n\n    numeral.zeroFormat = function(format) {\n        options.zeroFormat = typeof(format) === 'string' ? format : null;\n    };\n\n    numeral.nullFormat = function (format) {\n        options.nullFormat = typeof(format) === 'string' ? format : null;\n    };\n\n    numeral.defaultFormat = function(format) {\n        options.defaultFormat = typeof(format) === 'string' ? format : '0.0';\n    };\n\n    numeral.register = function(type, name, format) {\n        name = name.toLowerCase();\n\n        if (this[type + 's'][name]) {\n            throw new TypeError(name + ' ' + type + ' already registered.');\n        }\n\n        this[type + 's'][name] = format;\n\n        return format;\n    };\n\n\n    numeral.validate = function(val, culture) {\n        var _decimalSep,\n            _thousandSep,\n            _currSymbol,\n            _valArray,\n            _abbrObj,\n            _thousandRegEx,\n            localeData,\n            temp;\n\n        //coerce val to string\n        if (typeof val !== 'string') {\n            val += '';\n\n            if (console.warn) {\n                console.warn('Numeral.js: Value is not string. It has been co-erced to: ', val);\n            }\n        }\n\n        //trim whitespaces from either sides\n        val = val.trim();\n\n        //if val is just digits return true\n        if (!!val.match(/^\\d+$/)) {\n            return true;\n        }\n\n        //if val is empty return false\n        if (val === '') {\n            return false;\n        }\n\n        //get the decimal and thousands separator from numeral.localeData\n        try {\n            //check if the culture is understood by numeral. if not, default it to current locale\n            localeData = numeral.localeData(culture);\n        } catch (e) {\n            localeData = numeral.localeData(numeral.locale());\n        }\n\n        //setup the delimiters and currency symbol based on culture/locale\n        _currSymbol = localeData.currency.symbol;\n        _abbrObj = localeData.abbreviations;\n        _decimalSep = localeData.delimiters.decimal;\n        if (localeData.delimiters.thousands === '.') {\n            _thousandSep = '\\\\.';\n        } else {\n            _thousandSep = localeData.delimiters.thousands;\n        }\n\n        // validating currency symbol\n        temp = val.match(/^[^\\d]+/);\n        if (temp !== null) {\n            val = val.substr(1);\n            if (temp[0] !== _currSymbol) {\n                return false;\n            }\n        }\n\n        //validating abbreviation symbol\n        temp = val.match(/[^\\d]+$/);\n        if (temp !== null) {\n            val = val.slice(0, -1);\n            if (temp[0] !== _abbrObj.thousand && temp[0] !== _abbrObj.million && temp[0] !== _abbrObj.billion && temp[0] !== _abbrObj.trillion) {\n                return false;\n            }\n        }\n\n        _thousandRegEx = new RegExp(_thousandSep + '{2}');\n\n        if (!val.match(/[^\\d.,]/g)) {\n            _valArray = val.split(_decimalSep);\n            if (_valArray.length > 2) {\n                return false;\n            } else {\n                if (_valArray.length < 2) {\n                    return ( !! _valArray[0].match(/^\\d+.*\\d$/) && !_valArray[0].match(_thousandRegEx));\n                } else {\n                    if (_valArray[0].length === 1) {\n                        return ( !! _valArray[0].match(/^\\d+$/) && !_valArray[0].match(_thousandRegEx) && !! _valArray[1].match(/^\\d+$/));\n                    } else {\n                        return ( !! _valArray[0].match(/^\\d+.*\\d$/) && !_valArray[0].match(_thousandRegEx) && !! _valArray[1].match(/^\\d+$/));\n                    }\n                }\n            }\n        }\n\n        return false;\n    };\n\n\n    /************************************\n        Numeral Prototype\n    ************************************/\n\n    numeral.fn = Numeral.prototype = {\n        clone: function() {\n            return numeral(this);\n        },\n        format: function(inputString, roundingFunction) {\n            var value = this._value,\n                format = inputString || options.defaultFormat,\n                kind,\n                output,\n                formatFunction;\n\n            // make sure we have a roundingFunction\n            roundingFunction = roundingFunction || Math.round;\n\n            // format based on value\n            if (value === 0 && options.zeroFormat !== null) {\n                output = options.zeroFormat;\n            } else if (value === null && options.nullFormat !== null) {\n                output = options.nullFormat;\n            } else {\n                for (kind in formats) {\n                    if (format.match(formats[kind].regexps.format)) {\n                        formatFunction = formats[kind].format;\n\n                        break;\n                    }\n                }\n\n                formatFunction = formatFunction || numeral._.numberToFormat;\n\n                output = formatFunction(value, format, roundingFunction);\n            }\n\n            return output;\n        },\n        value: function() {\n            return this._value;\n        },\n        input: function() {\n            return this._input;\n        },\n        set: function(value) {\n            this._value = Number(value);\n\n            return this;\n        },\n        add: function(value) {\n            var corrFactor = _.correctionFactor.call(null, this._value, value);\n\n            function cback(accum, curr, currI, O) {\n                return accum + Math.round(corrFactor * curr);\n            }\n\n            this._value = _.reduce([this._value, value], cback, 0) / corrFactor;\n\n            return this;\n        },\n        subtract: function(value) {\n            var corrFactor = _.correctionFactor.call(null, this._value, value);\n\n            function cback(accum, curr, currI, O) {\n                return accum - Math.round(corrFactor * curr);\n            }\n\n            this._value = _.reduce([value], cback, Math.round(this._value * corrFactor)) / corrFactor;\n\n            return this;\n        },\n        multiply: function(value) {\n            function cback(accum, curr, currI, O) {\n                var corrFactor = _.correctionFactor(accum, curr);\n                return Math.round(accum * corrFactor) * Math.round(curr * corrFactor) / Math.round(corrFactor * corrFactor);\n            }\n\n            this._value = _.reduce([this._value, value], cback, 1);\n\n            return this;\n        },\n        divide: function(value) {\n            function cback(accum, curr, currI, O) {\n                var corrFactor = _.correctionFactor(accum, curr);\n                return Math.round(accum * corrFactor) / Math.round(curr * corrFactor);\n            }\n\n            this._value = _.reduce([this._value, value], cback);\n\n            return this;\n        },\n        difference: function(value) {\n            return Math.abs(numeral(this._value).subtract(value).value());\n        }\n    };\n\n    /************************************\n        Default Locale && Format\n    ************************************/\n\n    numeral.register('locale', 'en', {\n        delimiters: {\n            thousands: ',',\n            decimal: '.'\n        },\n        abbreviations: {\n            thousand: 'k',\n            million: 'm',\n            billion: 'b',\n            trillion: 't'\n        },\n        ordinal: function(number) {\n            var b = number % 10;\n            return (~~(number % 100 / 10) === 1) ? 'th' :\n                (b === 1) ? 'st' :\n                (b === 2) ? 'nd' :\n                (b === 3) ? 'rd' : 'th';\n        },\n        currency: {\n            symbol: '$'\n        }\n    });\n\n    \n\n(function() {\n        numeral.register('format', 'bps', {\n            regexps: {\n                format: /(BPS)/,\n                unformat: /(BPS)/\n            },\n            format: function(value, format, roundingFunction) {\n                var space = numeral._.includes(format, ' BPS') ? ' ' : '',\n                    output;\n\n                value = value * 10000;\n\n                // check for space before BPS\n                format = format.replace(/\\s?BPS/, '');\n\n                output = numeral._.numberToFormat(value, format, roundingFunction);\n\n                if (numeral._.includes(output, ')')) {\n                    output = output.split('');\n\n                    output.splice(-1, 0, space + 'BPS');\n\n                    output = output.join('');\n                } else {\n                    output = output + space + 'BPS';\n                }\n\n                return output;\n            },\n            unformat: function(string) {\n                return +(numeral._.stringToNumber(string) * 0.0001).toFixed(15);\n            }\n        });\n})();\n\n\n(function() {\n        var decimal = {\n            base: 1000,\n            suffixes: ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n        },\n        binary = {\n            base: 1024,\n            suffixes: ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\n        };\n\n    var allSuffixes =  decimal.suffixes.concat(binary.suffixes.filter(function (item) {\n            return decimal.suffixes.indexOf(item) < 0;\n        }));\n        var unformatRegex = allSuffixes.join('|');\n        // Allow support for BPS (http://www.investopedia.com/terms/b/basispoint.asp)\n        unformatRegex = '(' + unformatRegex.replace('B', 'B(?!PS)') + ')';\n\n    numeral.register('format', 'bytes', {\n        regexps: {\n            format: /([0\\s]i?b)/,\n            unformat: new RegExp(unformatRegex)\n        },\n        format: function(value, format, roundingFunction) {\n            var output,\n                bytes = numeral._.includes(format, 'ib') ? binary : decimal,\n                suffix = numeral._.includes(format, ' b') || numeral._.includes(format, ' ib') ? ' ' : '',\n                power,\n                min,\n                max;\n\n            // check for space before\n            format = format.replace(/\\s?i?b/, '');\n\n            for (power = 0; power <= bytes.suffixes.length; power++) {\n                min = Math.pow(bytes.base, power);\n                max = Math.pow(bytes.base, power + 1);\n\n                if (value === null || value === 0 || value >= min && value < max) {\n                    suffix += bytes.suffixes[power];\n\n                    if (min > 0) {\n                        value = value / min;\n                    }\n\n                    break;\n                }\n            }\n\n            output = numeral._.numberToFormat(value, format, roundingFunction);\n\n            return output + suffix;\n        },\n        unformat: function(string) {\n            var value = numeral._.stringToNumber(string),\n                power,\n                bytesMultiplier;\n\n            if (value) {\n                for (power = decimal.suffixes.length - 1; power >= 0; power--) {\n                    if (numeral._.includes(string, decimal.suffixes[power])) {\n                        bytesMultiplier = Math.pow(decimal.base, power);\n\n                        break;\n                    }\n\n                    if (numeral._.includes(string, binary.suffixes[power])) {\n                        bytesMultiplier = Math.pow(binary.base, power);\n\n                        break;\n                    }\n                }\n\n                value *= (bytesMultiplier || 1);\n            }\n\n            return value;\n        }\n    });\n})();\n\n\n(function() {\n        numeral.register('format', 'currency', {\n        regexps: {\n            format: /(\\$)/\n        },\n        format: function(value, format, roundingFunction) {\n            var locale = numeral.locales[numeral.options.currentLocale],\n                symbols = {\n                    before: format.match(/^([\\+|\\-|\\(|\\s|\\$]*)/)[0],\n                    after: format.match(/([\\+|\\-|\\)|\\s|\\$]*)$/)[0]\n                },\n                output,\n                symbol,\n                i;\n\n            // strip format of spaces and $\n            format = format.replace(/\\s?\\$\\s?/, '');\n\n            // format the number\n            output = numeral._.numberToFormat(value, format, roundingFunction);\n\n            // update the before and after based on value\n            if (value >= 0) {\n                symbols.before = symbols.before.replace(/[\\-\\(]/, '');\n                symbols.after = symbols.after.replace(/[\\-\\)]/, '');\n            } else if (value < 0 && (!numeral._.includes(symbols.before, '-') && !numeral._.includes(symbols.before, '('))) {\n                symbols.before = '-' + symbols.before;\n            }\n\n            // loop through each before symbol\n            for (i = 0; i < symbols.before.length; i++) {\n                symbol = symbols.before[i];\n\n                switch (symbol) {\n                    case '$':\n                        output = numeral._.insert(output, locale.currency.symbol, i);\n                        break;\n                    case ' ':\n                        output = numeral._.insert(output, ' ', i + locale.currency.symbol.length - 1);\n                        break;\n                }\n            }\n\n            // loop through each after symbol\n            for (i = symbols.after.length - 1; i >= 0; i--) {\n                symbol = symbols.after[i];\n\n                switch (symbol) {\n                    case '$':\n                        output = i === symbols.after.length - 1 ? output + locale.currency.symbol : numeral._.insert(output, locale.currency.symbol, -(symbols.after.length - (1 + i)));\n                        break;\n                    case ' ':\n                        output = i === symbols.after.length - 1 ? output + ' ' : numeral._.insert(output, ' ', -(symbols.after.length - (1 + i) + locale.currency.symbol.length - 1));\n                        break;\n                }\n            }\n\n\n            return output;\n        }\n    });\n})();\n\n\n(function() {\n        numeral.register('format', 'exponential', {\n        regexps: {\n            format: /(e\\+|e-)/,\n            unformat: /(e\\+|e-)/\n        },\n        format: function(value, format, roundingFunction) {\n            var output,\n                exponential = typeof value === 'number' && !numeral._.isNaN(value) ? value.toExponential() : '0e+0',\n                parts = exponential.split('e');\n\n            format = format.replace(/e[\\+|\\-]{1}0/, '');\n\n            output = numeral._.numberToFormat(Number(parts[0]), format, roundingFunction);\n\n            return output + 'e' + parts[1];\n        },\n        unformat: function(string) {\n            var parts = numeral._.includes(string, 'e+') ? string.split('e+') : string.split('e-'),\n                value = Number(parts[0]),\n                power = Number(parts[1]);\n\n            power = numeral._.includes(string, 'e-') ? power *= -1 : power;\n\n            function cback(accum, curr, currI, O) {\n                var corrFactor = numeral._.correctionFactor(accum, curr),\n                    num = (accum * corrFactor) * (curr * corrFactor) / (corrFactor * corrFactor);\n                return num;\n            }\n\n            return numeral._.reduce([value, Math.pow(10, power)], cback, 1);\n        }\n    });\n})();\n\n\n(function() {\n        numeral.register('format', 'ordinal', {\n        regexps: {\n            format: /(o)/\n        },\n        format: function(value, format, roundingFunction) {\n            var locale = numeral.locales[numeral.options.currentLocale],\n                output,\n                ordinal = numeral._.includes(format, ' o') ? ' ' : '';\n\n            // check for space before\n            format = format.replace(/\\s?o/, '');\n\n            ordinal += locale.ordinal(value);\n\n            output = numeral._.numberToFormat(value, format, roundingFunction);\n\n            return output + ordinal;\n        }\n    });\n})();\n\n\n(function() {\n        numeral.register('format', 'percentage', {\n        regexps: {\n            format: /(%)/,\n            unformat: /(%)/\n        },\n        format: function(value, format, roundingFunction) {\n            var space = numeral._.includes(format, ' %') ? ' ' : '',\n                output;\n\n            if (numeral.options.scalePercentBy100) {\n                value = value * 100;\n            }\n\n            // check for space before %\n            format = format.replace(/\\s?\\%/, '');\n\n            output = numeral._.numberToFormat(value, format, roundingFunction);\n\n            if (numeral._.includes(output, ')')) {\n                output = output.split('');\n\n                output.splice(-1, 0, space + '%');\n\n                output = output.join('');\n            } else {\n                output = output + space + '%';\n            }\n\n            return output;\n        },\n        unformat: function(string) {\n            var number = numeral._.stringToNumber(string);\n            if (numeral.options.scalePercentBy100) {\n                return number * 0.01;\n            }\n            return number;\n        }\n    });\n})();\n\n\n(function() {\n        numeral.register('format', 'time', {\n        regexps: {\n            format: /(:)/,\n            unformat: /(:)/\n        },\n        format: function(value, format, roundingFunction) {\n            var hours = Math.floor(value / 60 / 60),\n                minutes = Math.floor((value - (hours * 60 * 60)) / 60),\n                seconds = Math.round(value - (hours * 60 * 60) - (minutes * 60));\n\n            return hours + ':' + (minutes < 10 ? '0' + minutes : minutes) + ':' + (seconds < 10 ? '0' + seconds : seconds);\n        },\n        unformat: function(string) {\n            var timeArray = string.split(':'),\n                seconds = 0;\n\n            // turn hours and minutes into seconds and add them all up\n            if (timeArray.length === 3) {\n                // hours\n                seconds = seconds + (Number(timeArray[0]) * 60 * 60);\n                // minutes\n                seconds = seconds + (Number(timeArray[1]) * 60);\n                // seconds\n                seconds = seconds + Number(timeArray[2]);\n            } else if (timeArray.length === 2) {\n                // minutes\n                seconds = seconds + (Number(timeArray[0]) * 60);\n                // seconds\n                seconds = seconds + Number(timeArray[1]);\n            }\n            return Number(seconds);\n        }\n    });\n})();\n\nreturn numeral;\n}));\n","import React from 'react';\nimport { List, Skeleton, Tag } from 'antd';\nimport { ModuleInfo } from 'src/modules/mgmt/ModuleManagementService';\nimport numeral from 'numeral';\n\nexport const ModuleList: React.FC<{\n  loading?;\n  renderActions?;\n  modules: ModuleInfo[];\n  onModuleLoad?;\n  onModuleUnload?;\n}> = ({ loading, modules, renderActions = (v) => [] }) => {\n  return (\n    <div>\n      <List\n        loading={loading}\n        itemLayout=\"horizontal\"\n        dataSource={modules}\n        renderItem={(item) => (\n          <List.Item actions={[...renderActions(item)]}>\n            <Skeleton avatar title={false} loading={item.loading} active>\n              <List.Item.Meta\n                title={\n                  <div>\n                    <span>{item.name + (item.metadata?.title ? ` / ${item.metadata?.title}` : '')}</span>\n                    <span style={{ paddingLeft: 10 }}>\n                      {item.loaded && <Tag color=\"magenta\">已加载</Tag>}\n                      {item.predefined && <Tag color=\"green\">预定义</Tag>}\n                      {item.internal && <Tag color=\"lime\">内部模块</Tag>}\n                      {item.hasMetadata && <Tag color=\"gold\">含元数据</Tag>}\n                      {item.override && <Tag color=\"geekblue\">覆盖</Tag>}\n                    </span>\n                  </div>\n                }\n                description={item.metadata?.description}\n              />\n              <div>\n                <div>\n                  <small>{item.resolved}</small>\n                  <span style={{ paddingLeft: 8 }}>\n                    <Tag>{item.version}</Tag>\n                    <Tag>{item.source}</Tag>\n                    {item.size && <Tag>{numeral(item.size).format('0.00b')}</Tag>}\n                  </span>\n                </div>\n                <div style={{ maxWidth: '30vw' }}>\n                  {Boolean(item.dependencies.length) && (\n                    <div>\n                      <small>依赖: {item.dependencies.join(',')}</small>\n                    </div>\n                  )}\n                  {Boolean(item.dependents.length) && (\n                    <div>\n                      <small>被依赖: {item.dependents.join(',')}</small>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </Skeleton>\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n};\n","import React, { useEffect, useRef } from 'react';\nimport { Button, Dropdown, Form, Input, Menu, message, Modal, notification } from 'antd';\nimport { ModuleInfo, ModuleManagementService } from 'src/modules/mgmt/ModuleManagementService';\nimport { useImmer } from 'use-immer';\nimport { getBootService } from 'src/modules/boot';\nimport { ClearOutlined, PlusSquareOutlined, ReloadOutlined } from '@ant-design/icons';\nimport { ModuleList } from 'src/modules/mgmt/components/ModuleList';\nimport { DownOutlined, EditOutlined, MinusSquareOutlined, UploadOutlined } from '@ant-design/icons/lib';\n\nlet _svc;\n\nfunction getModuleMgmtService(): ModuleManagementService {\n  return (_svc = _svc || new ModuleManagementService());\n}\n\nfunction getContentLength(url): Promise<number> {\n  return fetch(url).then((v) => {\n    const len = v.headers.get('content-length');\n    if (len) {\n      return parseInt(len, 10);\n    }\n    return v.arrayBuffer().then((v) => v.byteLength);\n  });\n}\nasync function refreshSize(modules: ModuleInfo[], updater, all = false) {\n  for (let i = 0; i < modules.length; i++) {\n    const module = modules[i];\n    if (!module.size) {\n      if (module.loaded && !all) {\n        continue;\n      }\n      const j = i;\n      updater((s) => {\n        s[j].loadingSize = true;\n      });\n      try {\n        const size = await getContentLength(module.resolved);\n        updater((s) => {\n          s[j].size = size;\n          s[j].loadingSize = false;\n        });\n      } catch (e) {\n        console.error(`failed to get size of`, module.name, module.resolved);\n        updater((s) => {\n          s[j].loadingSize = false;\n        });\n      }\n    }\n  }\n}\n\nexport const ModuleManagementPanel: React.FC = () => {\n  const svc = getModuleMgmtService();\n  const System = getBootService().System;\n\n  const [modules, updateModules] = useImmer<ModuleInfo[]>(() =>\n    svc.getModules().sort((a, b) => a.name.localeCompare(b.name)),\n  );\n  useEffect(() => {\n    refreshSize(modules, updateModules);\n  }, []);\n  const doRefresh = () => {\n    updateModules((s) => svc.getModules().sort((a, b) => a.name.localeCompare(b.name)));\n  };\n  const doAddLocalModule = async (module) => {\n    await svc.addOverrideModule(module);\n    doRefresh();\n  };\n  const doResetLocalModule = async () => {\n    await svc.resetOverrideModules();\n    doRefresh();\n  };\n\n  const doModuleLoad = async (name) => {\n    updateModules((modules) => {\n      modules.find((v) => v.name === name).loading = true;\n    });\n    try {\n      await System.import(name);\n      updateModules((modules) => {\n        const m = modules.find((v) => v.name === name);\n        m.loading = false;\n        m.loaded = true;\n        //\n        m.dependencies = Array.from(getBootService().modules.dependencies[name] || []);\n\n        for (const depName of m.dependencies) {\n          const dep = modules.find((v) => v.name === depName);\n          if (dep && !dep.dependents.includes(name)) {\n            dep.dependents = [...dep.dependents, name];\n          }\n        }\n      });\n    } catch (e) {\n      notification.error({ message: String(e) });\n\n      updateModules((modules) => {\n        const m = modules.find((v) => v.name === name);\n        m.loading = false;\n        m.loaded = false;\n      });\n    }\n  };\n\n  const doModuleUnload = (name) => {\n    updateModules((modules) => {\n      const m = modules.find((v) => v.name === name);\n      System.delete(m.resolved);\n\n      m.loading = false;\n      m.loaded = System.has(m.resolved);\n    });\n  };\n  const [edit, updateEdit] = useImmer({ editing: false, module: undefined });\n  const onModuleEdit = (module) => {\n    updateEdit((s) => {\n      s.editing = true;\n      s.module = module;\n    });\n  };\n  const onModulePublish = (module) => {\n    message.warn('尚未实现');\n  };\n  const onModuleReset = async (module) => {\n    await svc.removeOverrideModule(module);\n    doRefresh();\n  };\n  const onShowAllModuleSize = () => {\n    return refreshSize(modules, updateModules, true);\n  };\n  return (\n    <div>\n      <ModuleEditDialog\n        visible={edit.editing}\n        module={edit.module}\n        onModuleChange={async (v) => doAddLocalModule(v)}\n        onVisibleChange={(v) =>\n          updateEdit((s) => {\n            s.editing = v;\n          })\n        }\n      />\n      <div>\n        <ModuleToolBar\n          onRefresh={doRefresh}\n          onResetLocalModule={doResetLocalModule}\n          onAddLocalModule={doAddLocalModule}\n          onShowAllModuleSize={onShowAllModuleSize}\n        />\n      </div>\n      <ModuleList\n        modules={modules}\n        onModuleLoad={doModuleLoad}\n        onModuleUnload={doModuleUnload}\n        renderActions={renderModuleActions({\n          onModuleUnload: doModuleUnload,\n          onModuleLoad: doModuleLoad,\n          onModuleReset,\n          onModuleEdit,\n          onModulePublish,\n        })}\n      />\n    </div>\n  );\n};\n\nfunction renderModuleActions(opts: {\n  onModuleLoad?;\n  onModuleUnload?;\n  onModulePublish?;\n  onModuleEdit?;\n  onModuleReset?;\n}) {\n  const { onModuleLoad, onModuleUnload, onModuleEdit, onModulePublish, onModuleReset } = opts;\n  return (item: ModuleInfo) => [\n    <Button onClick={() => onModuleLoad(item.name)} type=\"link\" key=\"load\" size=\"small\" disabled={item.loaded}>\n      加载\n    </Button>,\n    <Button onClick={() => onModuleUnload(item.name)} type=\"link\" key=\"unload\" size=\"small\" disabled={!item.loaded}>\n      卸载\n    </Button>,\n    <Dropdown\n      key={'more'}\n      overlay={\n        <Menu>\n          <Menu.Item onClick={() => onModulePublish(item)} icon={<UploadOutlined />}>\n            发布\n          </Menu.Item>\n          <Menu.Item onClick={() => onModuleEdit(item)} icon={<EditOutlined />}>\n            编辑\n          </Menu.Item>\n          <Menu.Item onClick={() => onModuleReset(item)} disabled={!item.override} icon={<MinusSquareOutlined />}>\n            重置本地覆盖\n          </Menu.Item>\n        </Menu>\n      }\n    >\n      <a className=\"ant-dropdown-link\" onClick={(e) => e.preventDefault()}>\n        操作 <DownOutlined />\n      </a>\n    </Dropdown>,\n  ];\n}\n\nconst ModuleEditDialog: React.FC<{ visible?; onVisibleChange?; module?; onModuleChange? }> = ({\n  visible,\n  onVisibleChange,\n  module,\n  onModuleChange,\n}) => {\n  const [form] = Form.useForm();\n  const lastRef = useRef(module);\n  useEffect(() => {\n    if (module && lastRef.current !== module) {\n      lastRef.current = module;\n      form.setFieldsValue(module);\n    }\n  }, [module]);\n  return (\n    <Modal title={'模块'} onOk={() => form.submit()} visible={visible} onCancel={() => onVisibleChange(false)}>\n      <Form\n        form={form}\n        labelCol={{ span: 4 }}\n        wrapperCol={{ span: 20 }}\n        initialValues={module || {}}\n        onFinish={(v) => {\n          if (onModuleChange(v) !== false) {\n            onVisibleChange(false);\n          }\n        }}\n      >\n        <Form.Item name={'name'} label={'模块名'} required rules={[{ required: true }]}>\n          <Input />\n        </Form.Item>\n        <Form.Item name={'resolved'} label={'地址'} required rules={[{ required: true }]}>\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\nconst ModuleToolBar: React.FC<{ onRefresh?; onAddLocalModule?; onResetLocalModule?; onShowAllModuleSize? }> = ({\n  onRefresh,\n  onResetLocalModule,\n  onAddLocalModule,\n  onShowAllModuleSize,\n}) => {\n  const [state, update] = useImmer({ editing: false, pendingShowAllModuleSize: false });\n  const showAll = async () => {\n    update((s) => {\n      s.pendingShowAllModuleSize = true;\n    });\n    try {\n      await onShowAllModuleSize();\n    } finally {\n      update((s) => {\n        s.pendingShowAllModuleSize = false;\n      });\n    }\n  };\n  return (\n    <div>\n      <ModuleEditDialog\n        visible={state.editing}\n        onVisibleChange={(v) =>\n          update((s) => {\n            s.editing = v;\n          })\n        }\n        onModuleChange={onAddLocalModule}\n      />\n      <div style={{ display: 'flex', gap: 8 }}>\n        <Button.Group>\n          <Button\n            type={'primary'}\n            icon={<PlusSquareOutlined />}\n            onClick={() =>\n              update((s) => {\n                s.editing = true;\n              })\n            }\n          >\n            本地\n          </Button>\n          <Button onClick={onResetLocalModule} icon={<ClearOutlined />}>\n            重置\n          </Button>\n        </Button.Group>\n        <Button onClick={onRefresh} icon={<ReloadOutlined />}>\n          刷新\n        </Button>\n        <Button loading={state.pendingShowAllModuleSize} onClick={showAll} icon={<ReloadOutlined />}>\n          显示所有模块大小\n        </Button>\n      </div>\n    </div>\n  );\n};\n"],"names":["getVersionFromResolvedUrl","url","jsdelivr","startsWith","m","substr","length","match","getSourceFromResolvedUrl","unpkg","location","origin","test","ModuleManagementService","_boot","getBootService","_modules","modules","System","addOverrideModule","name","resolved","overrides","persistImportOverrides","removeOverrideModule","resetOverrideModules","loadImportOverrides","Object","assign","getModules","all","concat","entries","imports","map","predefined","byName","keyBy","v","ModuleMetas","tryResolve","override","values","byResolved","mod","info","resolveName","loaded","isInternal","metadata","forEach","internal","hasMetadata","Boolean","keys","source","version","dependencies","Array","from","dependents","flatMap","reduce","a","b","push","o","key","fromEntries","die","error","args","e","errors","msg","apply","Error","join","data","path","op","plugin","useImmer","initialValue","useState","useCallback","updater","updateValue","produce","global","factory","module","exports","numeral","this","_","VERSION","formats","locales","defaults","currentLocale","zeroFormat","nullFormat","defaultFormat","scalePercentBy100","options","Numeral","input","number","_input","_value","value","kind","unformatFunction","regexp","isNumeral","isNaN","replace","regexps","unformat","stringToNumber","Number","obj","numberToFormat","format","roundingFunction","locale","negP","optDec","leadingCount","abbr","trillion","billion","million","thousand","decimal","neg","abbrForce","abs","int","precision","signed","thousands","output","Math","includes","indexOf","RegExp","abbreviations","toString","split","toFixed","delimiters","slice","String","i","string","stringOriginal","abbreviation","currency","symbol","pow","min","search","insert","subString","start","array","callback","TypeError","t","len","k","arguments","multiplier","x","parts","correctionFactor","prototype","call","accum","next","mn","maxDecimals","optionals","splitValue","minDecimals","boundedPrecision","optionalsRegExp","power","max","toLowerCase","localeData","reset","property","register","type","validate","val","culture","_decimalSep","_thousandSep","_currSymbol","_valArray","_abbrObj","_thousandRegEx","temp","console","warn","trim","fn","clone","inputString","formatFunction","round","set","add","corrFactor","cback","curr","currI","O","subtract","multiply","divide","difference","ordinal","space","splice","base","suffixes","binary","allSuffixes","filter","item","unformatRegex","bytes","suffix","bytesMultiplier","symbols","before","after","exponential","toExponential","num","hours","floor","minutes","seconds","timeArray","ModuleList","loading","renderActions","title","paddingLeft","description","size","maxWidth","_svc","getModuleMgmtService","getContentLength","fetch","then","headers","get","parseInt","arrayBuffer","byteLength","refreshSize","j","s","loadingSize","ModuleManagementPanel","svc","updateModules","sort","localeCompare","useEffect","doRefresh","doAddLocalModule","doResetLocalModule","doModuleLoad","find","import","depName","dep","notification","message","doModuleUnload","delete","has","edit","updateEdit","editing","undefined","onModuleEdit","onModulePublish","onModuleReset","onShowAllModuleSize","renderModuleActions","onModuleUnload","onModuleLoad","opts","preventDefault","ModuleEditDialog","visible","onVisibleChange","onModuleChange","form","Form","useForm","lastRef","useRef","current","setFieldsValue","submit","span","required","ModuleToolBar","onRefresh","onResetLocalModule","onAddLocalModule","state","update","pendingShowAllModuleSize","showAll","display","gap"],"mappings":"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"}