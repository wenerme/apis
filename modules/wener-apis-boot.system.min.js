System.register([],(function(e){"use strict";return{execute:function(){e({boot:async function(e){console.info("Bootstrapping system");const t=new s(e);o=t;const r=t.modules;r.resolver=e.resolver,r.dev=e.dev,e.internals&&r.internals.push(...e.internals);Object.assign(r.imports,n),Object.assign(r.overrides,await i()),console.info("Injecting system resolve");const l=window.System,d=l.constructor.prototype.resolve;l.constructor.prototype.resolve=function(e,t){const s=r.resolve({id:e,parentUrl:t,original:(...e)=>d.apply(this,e)});return console.debug(`resolve ${e} to ${s} from ${t}`),s}},getBaseUrl:l,getBootService:function(){return o},loadImportOverrides:i,persistImportOverrides:async function(e){localStorage[r]=JSON.stringify(e)},resolvePath:function(e){return new URL(e,l()).href}});class t{constructor(){this.internals=[],this.resolver=void 0,this.dev=!1,this.overrides={},this.imports={},this.resolved={},this.dependencies={}}isInternal(e){const{internals:t}=this;for(const s of t)if(s.test(e))return!0;return!1}resolve({id:e,parentUrl:t,original:s}){let n=this.tryResolve(e);if(!n)try{n=s(e,t)}catch(t){console.error("fallback to jsdelivr resolve - ",e),n="https://cdn.jsdelivr.net/npm/"+e}if(t){const s=this.resolveName(t);if(s){const t=this.dependencies[s]=this.dependencies[s]||[];t.includes(e)||t.push(e)}else console.warn("can not get name from parent url",t)}return this.resolved[e]=n,n}tryResolve(e,t){const{overrides:s,imports:n}=this,r=s[e]||n[e];return r?this.normalizeModuleUrl(r):this.resolver&&this.isInternal(e)?this.resolver({dev:this.dev,name:e,parentUrl:t,parentName:this.resolveName(t)}):void 0}resolveName(e){var t,s;if(!e)return;{const t=Object.entries(this.resolved).find(([t,s])=>s===e);if(t)return t[0]}const n=location.origin;if(e.startsWith(n)){const t=e.substr(n.length).match(/modules[/](\w+)-([^.]+)/);if(t)return`@${t[1]}/${t[2]}`}if(e.startsWith("https://cdn.jsdelivr.net/npm/")){const t=e.substr(n.length).match(/(@[^/]+[/][^/]+)/);if(t)return t[1]}let r=null===(t=Object.entries(this.imports).find(([t,s])=>s===e))||void 0===t?void 0:t[0];return r||(r=null===(s=Object.entries(this.resolved).find(([t,s])=>s===e))||void 0===s?void 0:s[0],r)}normalizeModuleUrl(e){return e}}e("ModuleService",t);class s{constructor({System:e=window.System,baselUrl:s=location.origin}={}){this.modules=new t,this.System=void 0,this.baselUrl=void 0,this.baselUrl=s,this.System=e}resolvePath(e){return new URL(e,this.baselUrl).href}}var n={react:"https://cdn.jsdelivr.net/npm/react@16.13.1/umd/react.production.min.js","react-dom":"https://cdn.jsdelivr.net/npm/react-dom@16.13.1/umd/react-dom.production.min.js",classnames:"https://cdn.jsdelivr.net/npm/classnames","@ant-design/colors":"https://cdn.jsdelivr.net/npm/@ant-design/colors","react-query":"https://cdn.jsdelivr.net/npm/react-query@2.5.5/dist/react-query.production.min.js","react-router-dom":"https://cdn.jsdelivr.net/npm/react-router-dom@5.2.0/umd/react-router-dom.min.js",immer:"https://cdn.jsdelivr.net/npm/immer/dist/immer.umd.production.min.js","prop-types":"https://cdn.jsdelivr.net/npm/prop-types@15.7.2/prop-types.min.js",lodash:"https://cdn.jsdelivr.net/npm/@esm-bundle/lodash/system/index.js","react-is":"https://cdn.jsdelivr.net/npm/react-is/umd/react-is.production.min.js","styled-components":"https://cdn.jsdelivr.net/npm/@esm-bundle/styled-components/system/styled-components.min.js",tslib:"https://cdn.jsdelivr.net/npm/tslib/tslib.js","@ant-design/icons":"https://cdn.jsdelivr.net/npm/@ant-design/icons@4.2.1/dist/index.umd.min.js",antd:"https://cdn.jsdelivr.net/npm/antd@4.4.2/dist/antd-with-locales.min.js",moment:"https://cdn.jsdelivr.net/npm/@esm-bundle/moment/system/index.js","single-spa":"https://cdn.jsdelivr.net/npm/single-spa@^5/lib/system/single-spa.dev.js","single-spa-layout":"https://unpkg.com/single-spa-layout@1.0.0-beta.5/dist/system/single-spa-layout.min.js",rxjs:"https://cdn.jsdelivr.net/npm/rxjs@6.6.0/bundles/rxjs.umd.min.js"};const r="ImportOverrides";async function i(){try{return JSON.parse(localStorage[r]||"{}")}catch(e){console.error("failed to load overrides",e)}return{}}let o;e("metadata",{name:"@wener/apis-boot",title:"启动模块",description:"控制映射模块，控制模块版本。"});function l(){return localStorage.BASE_URL||location.href}}}}));
//# sourceMappingURL=wener-apis-boot.system.min.js.map
