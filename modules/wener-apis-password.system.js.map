{"version":3,"file":"wener-apis-password.system.js","sources":["../../src/modules/password/components/PasswordSiteNote.tsx","../../src/modules/password/components/PasswordStrength.tsx","../../src/modules/password/components/PasswordStrengthContent.tsx","../../src/modules/password/components/ZxcvbnDescription.tsx"],"sourcesContent":["import { Alert } from 'antd';\nimport React from 'react';\nexport const PasswordSiteNote = () => (\n  <div style={{ marginTop: 18 }}>\n    <Alert\n      type=\"info\"\n      showIcon\n      message={\n        <div>\n          <a href=\"https://en.wikipedia.org/wiki/Password_strength\" target=\"_blank\" rel=\"noopener noreferrer\">\n            密码强度\n          </a>\n          算法使用\n          <a\n            href=\"https://blogs.dropbox.com/tech/2012/04/zxcvbn-realistic-password-strength-estimation/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            zxcvbn\n          </a>{' '}\n          。\n        </div>\n      }\n    />\n  </div>\n);\n","import React from 'react';\nimport { PasswordSiteNote } from 'src/modules/password/components/PasswordSiteNote';\nimport { Input, Spin } from 'antd';\nimport { ZxcvbnDescription } from 'src/modules/password';\n\nexport const PasswordStrength: React.FC<{ loading?; value?; data?; onChange? }> = ({\n  loading,\n  value,\n  data,\n  onChange,\n}) => {\n  return (\n    <div style={{ display: 'grid', gap: 12 }}>\n      <Input.Search\n        disabled={loading}\n        loading={loading}\n        placeholder=\"检测密码\"\n        value={value}\n        onChange={(v) => onChange?.(v.target.value)}\n      />\n      <Spin spinning={loading} delay={120}>\n        <h4>检测结果</h4>\n        {data && <ZxcvbnDescription password={value} result={data} />}\n      </Spin>\n\n      <div>\n        <h4>结果内容</h4>\n        <div>\n          <pre>{JSON.stringify(data, null, '  ')}</pre>\n        </div>\n      </div>\n\n      <PasswordSiteNote />\n    </div>\n  );\n};\n","import { consumeClientService, PasswordStrengthService } from 'src/modules/client';\nimport React, { useState } from 'react';\nimport { usePaginatedQuery } from 'react-query';\nimport { PasswordStrength } from 'src/modules/password/components/PasswordStrength';\nimport { notification } from 'antd';\n\nexport const PasswordStrengthContent: React.FC<{ password?; initialData? }> = ({\n  password: initialPassword,\n  initialData,\n}) => {\n  const svg = consumeClientService(PasswordStrengthService);\n  const [password, setPassword] = useState(initialPassword || initialData?.password || '123456');\n  const { isLoading, resolvedData } = usePaginatedQuery(['zxcvbn', password], (_, password) => svg.zxcvbn(password), {\n    enabled: true,\n    initialData: initialData,\n    staleTime: 120,\n    onError(error) {\n      notification.error({ message: `Failed to request zxcvbn: ${String(error)}` });\n    },\n  });\n\n  return <PasswordStrength loading={isLoading} value={password} onChange={setPassword} data={resolvedData} />;\n};\n","import { Descriptions } from 'antd';\nimport React from 'react';\n\nexport const ZxcvbnDescription: React.FC<{ password; result? }> = ({ password, result }) => {\n  const { score, guesses, guesses_log10, feedback, crack_times_display: times } = result;\n  /*\n  \"sequence\": [\n    {\n      \"pattern\": \"dictionary\",\n      \"i\": 0,\n      \"j\": 4,\n      \"token\": \"wener\",\n      \"matched_word\": \"renew\",\n      \"rank\": 5472,\n      \"dictionary_name\": \"us_tv_and_film\",\n      \"reversed\": true,\n      \"l33t\": false,\n      \"base_guesses\": 5472,\n      \"uppercase_variations\": 1,\n      \"l33t_variations\": 1,\n      \"guesses\": 10944,\n      \"guesses_log10\": 4.039176084376041\n    }\n  ],\n  \"calc_time\": 1,\n   */\n  const scoreColors = ['#D50000', '#F44336', '#FF5722', '#FFC107', '#43A047'];\n  const crackTimes = [\n    {\n      label: '100 个每小时',\n      speedTip: '被限流的在线破解速度',\n      value: times.online_throttling_100_per_hour,\n    },\n    {\n      label: '10 个每秒',\n      speedTip: '未被限流的在线破解速度',\n      value: times.online_no_throttling_10_per_second,\n    },\n    {\n      label: '10,000 个每秒',\n      speedTip: '离线破解, 较慢的算法, 多核',\n      value: times.offline_slow_hashing_1e4_per_second,\n    },\n    {\n      label: '10亿 个每秒',\n      speedTip: '离线破解, 较快的算法, 多核',\n      value: times.offline_fast_hashing_1e10_per_second,\n    },\n  ];\n  return (\n    <div>\n      <Descriptions bordered>\n        <Descriptions.Item label={'密码'}>{password}</Descriptions.Item>\n        <Descriptions.Item label={'强度分数'}>\n          <span style={{ color: scoreColors[score] }}>{score}</span>/4\n        </Descriptions.Item>\n        <Descriptions.Item label={'猜测次数'}>\n          <div>{guesses}</div>\n          <div>\n            {guesses_log10.toFixed(6)} <small>LOG10</small>\n          </div>\n        </Descriptions.Item>\n        <Descriptions.Item label={'建议'} span={3}>\n          {feedback.warning && <div style={{ color: scoreColors[2] }}>{feedback.warning}</div>}\n          <ul>\n            {feedback.suggestions.map((v) => (\n              <li key={v}>{v}</li>\n            ))}\n          </ul>\n        </Descriptions.Item>\n        <Descriptions.Item label={'破解时间'} span={3}>\n          {crackTimes.map(({ label, speedTip, value }) => (\n            <div key={label}>\n              <span style={{ fontWeight: 'bold' }}>{label}:</span>\n              <span style={{ fontSize: '1.2rem', padding: '0 8px' }}>{value}</span> ({speedTip})\n            </div>\n          ))}\n        </Descriptions.Item>\n      </Descriptions>\n    </div>\n  );\n};\n"],"names":["PasswordSiteNote","marginTop","PasswordStrength","loading","value","data","onChange","display","gap","v","target","ZxcvbnDescription","JSON","stringify","PasswordStrengthContent","password","initialPassword","initialData","svg","consumeClientService","PasswordStrengthService","setPassword","useState","isLoading","resolvedData","usePaginatedQuery","_","zxcvbn","enabled","staleTime","onError","error","notification","message","String","result","score","guesses","guesses_log10","feedback","crack_times_display","times","scoreColors","crackTimes","label","speedTip","online_throttling_100_per_hour","online_no_throttling_10_per_second","offline_slow_hashing_1e4_per_second","offline_fast_hashing_1e10_per_second","color","toFixed","warning","suggestions","map","fontWeight","fontSize","padding"],"mappings":"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"}