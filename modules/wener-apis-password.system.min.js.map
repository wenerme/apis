{"version":3,"file":"wener-apis-password.system.min.js","sources":["../../src/modules/password/components/PasswordSiteNote.tsx","../../src/modules/password/components/PasswordStrength.tsx","../../src/modules/password/components/PasswordStrengthContent.tsx","../../src/modules/password/components/ZxcvbnDescription.tsx"],"sourcesContent":["import { Alert } from 'antd';\nimport React from 'react';\nexport const PasswordSiteNote = () => (\n  <div style={{ marginTop: 18 }}>\n    <Alert\n      type=\"info\"\n      showIcon\n      message={\n        <div>\n          <a href=\"https://en.wikipedia.org/wiki/Password_strength\" target=\"_blank\" rel=\"noopener noreferrer\">\n            密码强度\n          </a>\n          算法使用\n          <a\n            href=\"https://blogs.dropbox.com/tech/2012/04/zxcvbn-realistic-password-strength-estimation/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            zxcvbn\n          </a>{' '}\n          。\n        </div>\n      }\n    />\n  </div>\n);\n","import React from 'react';\nimport { PasswordSiteNote } from 'src/modules/password/components/PasswordSiteNote';\nimport { Input, Spin } from 'antd';\nimport { ZxcvbnDescription } from 'src/modules/password';\n\nexport const PasswordStrength: React.FC<{ loading?; value?; data?; onChange? }> = ({\n  loading,\n  value,\n  data,\n  onChange,\n}) => {\n  return (\n    <div style={{ display: 'grid', gap: 12 }}>\n      <Input.Search\n        disabled={loading}\n        loading={loading}\n        placeholder=\"检测密码\"\n        value={value}\n        onChange={(v) => onChange?.(v.target.value)}\n      />\n      <Spin spinning={loading} delay={120}>\n        <h4>检测结果</h4>\n        {data && <ZxcvbnDescription password={value} result={data} />}\n      </Spin>\n\n      <div>\n        <h4>结果内容</h4>\n        <div>\n          <pre>{JSON.stringify(data, null, '  ')}</pre>\n        </div>\n      </div>\n\n      <PasswordSiteNote />\n    </div>\n  );\n};\n","import { consumeClientService, PasswordStrengthService } from 'src/modules/client';\nimport React, { useState } from 'react';\nimport { usePaginatedQuery } from 'react-query';\nimport { PasswordStrength } from 'src/modules/password/components/PasswordStrength';\nimport { notification } from 'antd';\n\nexport const PasswordStrengthContent: React.FC<{ password?; initialData? }> = ({\n  password: initialPassword,\n  initialData,\n}) => {\n  const svg = consumeClientService(PasswordStrengthService);\n  const [password, setPassword] = useState(initialPassword || initialData?.password || '123456');\n  const { isLoading, resolvedData } = usePaginatedQuery(['zxcvbn', password], (_, password) => svg.zxcvbn(password), {\n    enabled: true,\n    initialData: initialData,\n    staleTime: 120,\n    onError(error) {\n      notification.error({ message: `Failed to request zxcvbn: ${String(error)}` });\n    },\n  });\n\n  return <PasswordStrength loading={isLoading} value={password} onChange={setPassword} data={resolvedData} />;\n};\n","import { Descriptions } from 'antd';\nimport React from 'react';\n\nexport const ZxcvbnDescription: React.FC<{ password; result? }> = ({ password, result }) => {\n  const { score, guesses, guesses_log10, feedback, crack_times_display: times } = result;\n  /*\n  \"sequence\": [\n    {\n      \"pattern\": \"dictionary\",\n      \"i\": 0,\n      \"j\": 4,\n      \"token\": \"wener\",\n      \"matched_word\": \"renew\",\n      \"rank\": 5472,\n      \"dictionary_name\": \"us_tv_and_film\",\n      \"reversed\": true,\n      \"l33t\": false,\n      \"base_guesses\": 5472,\n      \"uppercase_variations\": 1,\n      \"l33t_variations\": 1,\n      \"guesses\": 10944,\n      \"guesses_log10\": 4.039176084376041\n    }\n  ],\n  \"calc_time\": 1,\n   */\n  const scoreColors = ['#D50000', '#F44336', '#FF5722', '#FFC107', '#43A047'];\n  const crackTimes = [\n    {\n      label: '100 个每小时',\n      speedTip: '被限流的在线破解速度',\n      value: times.online_throttling_100_per_hour,\n    },\n    {\n      label: '10 个每秒',\n      speedTip: '未被限流的在线破解速度',\n      value: times.online_no_throttling_10_per_second,\n    },\n    {\n      label: '10,000 个每秒',\n      speedTip: '离线破解, 较慢的算法, 多核',\n      value: times.offline_slow_hashing_1e4_per_second,\n    },\n    {\n      label: '10亿 个每秒',\n      speedTip: '离线破解, 较快的算法, 多核',\n      value: times.offline_fast_hashing_1e10_per_second,\n    },\n  ];\n  return (\n    <div>\n      <Descriptions bordered>\n        <Descriptions.Item label={'密码'}>{password}</Descriptions.Item>\n        <Descriptions.Item label={'强度分数'}>\n          <span style={{ color: scoreColors[score] }}>{score}</span>/4\n        </Descriptions.Item>\n        <Descriptions.Item label={'猜测次数'}>\n          <div>{guesses}</div>\n          <div>\n            {guesses_log10.toFixed(6)} <small>LOG10</small>\n          </div>\n        </Descriptions.Item>\n        <Descriptions.Item label={'建议'} span={3}>\n          {feedback.warning && <div style={{ color: scoreColors[2] }}>{feedback.warning}</div>}\n          <ul>\n            {feedback.suggestions.map((v) => (\n              <li key={v}>{v}</li>\n            ))}\n          </ul>\n        </Descriptions.Item>\n        <Descriptions.Item label={'破解时间'} span={3}>\n          {crackTimes.map(({ label, speedTip, value }) => (\n            <div key={label}>\n              <span style={{ fontWeight: 'bold' }}>{label}:</span>\n              <span style={{ fontSize: '1.2rem', padding: '0 8px' }}>{value}</span> ({speedTip})\n            </div>\n          ))}\n        </Descriptions.Item>\n      </Descriptions>\n    </div>\n  );\n};\n"],"names":["PasswordSiteNote","React","style","marginTop","Alert","type","showIcon","message","href","target","rel","PasswordStrength","loading","value","data","onChange","display","gap","Input","Search","disabled","placeholder","v","Spin","spinning","delay","ZxcvbnDescription","password","result","JSON","stringify","initialPassword","initialData","svg","consumeClientService","PasswordStrengthService","setPassword","useState","isLoading","resolvedData","usePaginatedQuery","_","zxcvbn","enabled","staleTime","onError","error","notification","String","score","guesses","guesses_log10","feedback","crack_times_display","times","scoreColors","crackTimes","label","speedTip","online_throttling_100_per_hour","online_no_throttling_10_per_second","offline_slow_hashing_1e4_per_second","offline_fast_hashing_1e10_per_second","Descriptions","bordered","Item","color","toFixed","span","warning","suggestions","map","key","fontWeight","fontSize","padding"],"mappings":"6aAEO,MAAMA,EAAmB,IAC9BC,uBAAKC,MAAO,CAAEC,UAAW,KACvBF,gBAACG,GACCC,KAAK,OACLC,YACAC,QACEN,2BACEA,qBAAGO,KAAK,kDAAkDC,OAAO,SAASC,IAAI,sCAI9ET,qBACEO,KAAK,wFACLC,OAAO,SACPC,IAAI,iCAGD,YCdFC,EAAqE,EAChFC,QAAAA,EACAC,MAAAA,EACAC,KAAAA,EACAC,SAAAA,KAGEd,uBAAKC,MAAO,CAAEc,QAAS,OAAQC,IAAK,KAClChB,gBAACiB,EAAMC,QACLC,SAAUR,EACVA,QAASA,EACTS,YAAY,OACZR,MAAOA,EACPE,SAAWO,GAAMP,MAAAA,SAAAA,EAAWO,EAAEb,OAAOI,SAEvCZ,gBAACsB,GAAKC,SAAUZ,EAASa,MAAO,KAC9BxB,kCACCa,GAAQb,gBAACyB,GAAkBC,SAAUd,EAAOe,OAAQd,KAGvDb,2BACEA,kCACAA,2BACEA,2BAAM4B,KAAKC,UAAUhB,EAAM,KAAM,SAIrCb,gBAACD,qCC1BuE,EAC5E2B,SAAUI,EACVC,YAAAA,YAEMC,EAAMC,EAAqBC,IAC1BR,EAAUS,GAAeC,EAASN,IAAmBC,MAAAA,SAAAA,EAAaL,WAAY,WAC/EW,UAAEA,EAAFC,aAAaA,GAAiBC,EAAkB,CAAC,SAAUb,GAAW,CAACc,EAAGd,IAAaM,EAAIS,OAAOf,GAAW,CACjHgB,SAAS,EACTX,YAAaA,EACbY,UAAW,IACXC,QAAQC,GACNC,EAAaD,MAAM,CAAEvC,QAAU,6BAA4ByC,OAAOF,eAI/D7C,gBAACU,GAAiBC,QAAS0B,EAAWzB,MAAOc,EAAUZ,SAAUqB,EAAatB,KAAMyB,4BClB3B,EAAGZ,SAAAA,EAAUC,OAAAA,YACvEqB,MAAEA,EAAFC,QAASA,EAATC,cAAkBA,EAAlBC,SAAiCA,EAAUC,oBAAqBC,GAAU1B,EAsB1E2B,EAAc,CAAC,UAAW,UAAW,UAAW,UAAW,WAC3DC,EAAa,CACjB,CACEC,MAAO,WACPC,SAAU,aACV7C,MAAOyC,EAAMK,gCAEf,CACEF,MAAO,SACPC,SAAU,cACV7C,MAAOyC,EAAMM,oCAEf,CACEH,MAAO,aACPC,SAAU,kBACV7C,MAAOyC,EAAMO,qCAEf,CACEJ,MAAO,UACPC,SAAU,kBACV7C,MAAOyC,EAAMQ,8CAIf7D,2BACEA,gBAAC8D,GAAaC,aACZ/D,gBAAC8D,EAAaE,MAAKR,MAAO,MAAO9B,GACjC1B,gBAAC8D,EAAaE,MAAKR,MAAO,QACxBxD,wBAAMC,MAAO,CAAEgE,MAAOX,EAAYN,KAAWA,SAE/ChD,gBAAC8D,EAAaE,MAAKR,MAAO,QACxBxD,2BAAMiD,GACNjD,2BACGkD,EAAcgB,QAAQ,OAAIlE,wCAG/BA,gBAAC8D,EAAaE,MAAKR,MAAO,KAAMW,KAAM,GACnChB,EAASiB,SAAWpE,uBAAKC,MAAO,CAAEgE,MAAOX,EAAY,KAAOH,EAASiB,SACtEpE,0BACGmD,EAASkB,YAAYC,IAAKjD,GACzBrB,sBAAIuE,IAAKlD,GAAIA,MAInBrB,gBAAC8D,EAAaE,MAAKR,MAAO,OAAQW,KAAM,GACrCZ,EAAWe,IAAI,EAAGd,MAAAA,EAAOC,SAAAA,EAAU7C,MAAAA,KAClCZ,uBAAKuE,IAAKf,GACRxD,wBAAMC,MAAO,CAAEuE,WAAY,SAAWhB,OACtCxD,wBAAMC,MAAO,CAAEwE,SAAU,SAAUC,QAAS,UAAY9D,QAAgB6C"}