{"version":3,"file":"wener-apis-lite.system.js","sources":["../../src/modules/lite/index.ts"],"sourcesContent":["export { default as metadata } from './metadata.json';\n\n/**\n * System configuration\n */\n\nif (!window['process']) {\n  window['process'] = { env: { NODE_ENV: isDev() ? 'development' : 'production' } } as any;\n}\nconst System = window['System'];\n\nconst start = Date.now();\nlet chain: Promise<any> = Promise.resolve();\nif (!isGeneratorSupported()) {\n  // FIXME this is kinda useless, need multi bundle\n  chain = chain\n    .then(System.import(resolveModule({ name: '@wener/apis-polyfill', dev: isDev() })))\n    .then(({ load }) => load());\n}\nchain = chain\n  // import('src/modules/boot') // not inject resolve yet\n  .then(() => System.import(resolveModule({ name: '@wener/apis-boot', dev: isDev() })))\n  .then(({ boot }) =>\n    boot({\n      dev: isDev(),\n      internals: [/^@wener[/]apis-(.+)/, /^@wener[/]ui([/]\\w+)?/, /^@wener[/]utils/],\n      baselUrl: getBaseUrl(),\n      resolver: resolveModule,\n      System,\n    }),\n  );\nchain = chain.then(() => import('src/modules/root'));\nchain.then(() => console.log(`Started in ${Date.now() - start}ms`));\nchain.catch((e) => {\n  console.error(`Failed to setup application`, e);\n});\n\nfunction isDev(): boolean {\n  if (localStorage['devtools']) {\n    return localStorage['devtools'] === 'true';\n  }\n  return Boolean(location.origin.match(/localhost|127\\.0\\.0|192\\.168/));\n}\n\nfunction resolveModule({ name, dev }) {\n  const fn = `./modules/${name.replace('@', '').replace(/[/]/g, '-')}.system${dev ? '' : '.min'}.js`;\n  return new URL(fn, getBaseUrl()).href;\n}\n\nfunction getBaseUrl() {\n  // allowed override base url\n  return localStorage['BASE_URL'] || location.href;\n}\n\nfunction isGeneratorSupported() {\n  let supported = true;\n  try {\n    eval('(function *() {})');\n  } catch (e) {\n    supported = false;\n  }\n  return supported;\n}\n"],"names":["window","env","NODE_ENV","isDev","System","start","Date","now","chain","Promise","resolve","isGeneratorSupported","then","import","resolveModule","name","dev","load","boot","internals","baselUrl","getBaseUrl","resolver","console","log","catch","e","error","localStorage","Boolean","location","origin","match","fn","replace","URL","href","supported","eval"],"mappings":"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"}