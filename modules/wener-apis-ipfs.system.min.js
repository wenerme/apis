System.register(["react","@wener/utils","antd"],(function(t){"use strict";var e,n,r,o,i,a,s;return{setters:[function(t){e=t.useRef,n=t.useState,r=t.useEffect,o=t.default},function(t){i=t.getGlobalThis,a=t.isDev},function(t){s=t.Button}],execute:function(){function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("production"!==process.env.NODE_ENV){var o=L[t],i=o?"function"==typeof o?o.apply(null,n):o:"unknown error nr: "+t;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function u(t){return!!t&&!!t[q]}function l(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[M]||!!t.constructor[M]||m(t)||y(t))}function f(t,e,n){void 0===n&&(n=!1),0===h(t)?(n?Object.keys:H)(t).forEach((function(n){return e(n,t[n],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function h(t){var e=t[q];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:m(t)?2:y(t)?3:0}function p(t,e){return 2===h(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function d(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function m(t){return G&&t instanceof Map}function y(t){return V&&t instanceof Set}function v(t){return t.o||t.t}function g(t,e){if(void 0===e&&(e=!1),Array.isArray(t))return t.slice();var n=Object.create(Object.getPrototypeOf(t));return f(t,(function(r){if(r!==q){var o=Object.getOwnPropertyDescriptor(t,r),i=o.value;o.get&&(e||c(1),i=o.get.call(t)),o.enumerable?n[r]=i:Object.defineProperty(n,r,{value:i,writable:!0,configurable:!0})}})),n}function b(t,e){u(t)||E(t)||!l(t)||(h(t)>1&&(t.set=t.add=t.clear=t.delete=w),Object.freeze(t),e&&f(t,(function(t,e){return b(e,!0)}),!0))}function w(){c(2)}function E(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function P(t){var e=B[t];return e||c("production"!==process.env.NODE_ENV?18:19,t),e}function O(){return"production"===process.env.NODE_ENV||W||c(0),W}function k(t,e){e&&(P("Patches"),t.u=[],t.s=[],t.v=e)}function x(t){S(t),t.p.forEach(D),t.p=null}function S(t){t===W&&(W=t.l)}function j(t){return W={p:[],l:W,h:t,m:!0,_:0}}function D(t){var e=t[q];0===e.i||1===e.i?e.j():e.O=!0}function N(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||P("ES5").S(e,t,r),r?(n[q].P&&(x(e),c(4)),l(t)&&(t=_(e,t),e.l||I(e,t)),e.u&&P("Patches").M(n[q],t,e.u,e.s)):t=_(e,n,[]),x(e),e.u&&e.v(e.u,e.s),t!==K?t:void 0}function _(t,e,n){if(E(e))return e;var r=e[q];if(!r)return f(e,(function(o,i){return A(t,r,e,o,i,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return I(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=g(r.k,!0):r.o;f(o,(function(e,i){return A(t,r,o,e,i,n)})),I(t,o,!1),n&&t.u&&P("Patches").R(r,n,t.u,t.s)}return r.o}function A(t,e,n,r,o,i){if("production"!==process.env.NODE_ENV&&o===n&&c(5),u(o)){var a=_(t,o,i&&e&&3!==e.i&&!p(e.D,r)?i.concat(r):void 0);if(f=r,m=a,2===(y=h(s=n))?s.set(f,m):3===y?(s.delete(f),s.add(m)):s[f]=m,!u(a))return;t.m=!1}var s,f,m,y;if((!e||!d(o,function(t,e){return 2===h(t)?t.get(e):t[e]}(e.t,r)))&&l(o)){if(!t.h.N&&t._<1)return;_(t,o),e&&e.A.l||I(t,o)}}function I(t,e,n){void 0===n&&(n=!1),t.h.N&&t.m&&b(e,n)}function F(t,e){var n=t[q],r=Reflect.getOwnPropertyDescriptor(n?v(n):t,e);return r&&r.value}function R(t){if(!t.P){if(t.P=!0,0===t.i||1===t.i){var e=t.o=g(t.t);f(t.p,(function(t,n){e[t]=n})),t.p=void 0}t.l&&R(t.l)}}function T(t){t.o||(t.o=g(t.t))}function C(t,e,n){var r=m(e)?P("MapSet").T(e,n):y(e)?P("MapSet").F(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:O(),P:!1,I:!1,D:{},l:e,t:t,k:null,p:{},o:null,j:null,C:!1},o=r,i=J;n&&(o=[r],i=X);var a=Proxy.revocable(o,i),s=a.revoke,c=a.proxy;return r.k=c,r.j=s,c}(e,n):P("ES5").J(e,n);return(n?n.A:O()).p.push(r),r}var z,W,$="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),G="undefined"!=typeof Map,V="undefined"!=typeof Set,U="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,K=$?Symbol("immer-nothing"):((z={})["immer-nothing"]=!0,z),M=$?Symbol("immer-draftable"):"__$immer_draftable",q=$?Symbol("immer-state"):"__$immer_state",L={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},19:function(t){return"plugin not loaded: "+t},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available"},H="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,B={},J={get:function(t,e){if(e===q)return t;var n=t.p;if(!t.P&&p(n,e))return n[e];var r=v(t)[e];if(t.I||!l(r))return r;if(t.P){if(r!==F(t.t,e))return r;n=t.o}return n[e]=C(t.A.h,r,t)},has:function(t,e){return e in v(t)},ownKeys:function(t){return Reflect.ownKeys(v(t))},set:function(t,e,n){if(!t.P){var r=F(t.t,e);if(n?d(r,n)||n===t.p[e]:d(r,n)&&e in t.t)return!0;T(t),R(t)}return t.D[e]=!0,t.o[e]=n,!0},deleteProperty:function(t,e){return void 0!==F(t.t,e)||e in t.t?(t.D[e]=!1,T(t),R(t)):t.D[e]&&delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=v(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&(r.writable=!0,r.configurable=1!==t.i||"length"!==e),r},defineProperty:function(){c(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){c(12)}},X={};f(J,(function(t,e){X[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),X.deleteProperty=function(t,e){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(e))&&c(13),J.deleteProperty.call(this,t[0],e)},X.set=function(t,e,n){return"production"!==process.env.NODE_ENV&&"length"!==e&&isNaN(parseInt(e))&&c(14),J.set.call(this,t[0],e,n,t[0])};var Q=new(function(){function t(t){this.g=U,this.N="production"!==process.env.NODE_ENV,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var e=t.prototype;return e.produce=function(t,e,n){if("function"==typeof t&&"function"!=typeof e){var r=e;e=t;var o=this;return function(t){var n=this;void 0===t&&(t=r);for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return o.produce(t,(function(t){var r;return(r=e).call.apply(r,[n,t].concat(a))}))}}var i;if("function"!=typeof e&&c(6),void 0!==n&&"function"!=typeof n&&c(7),l(t)){var a=j(this),s=C(this,t,void 0),u=!0;try{i=e(s),u=!1}finally{u?x(a):S(a)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(t){return k(a,n),N(t,a)}),(function(t){throw x(a),t})):(k(a,n),N(i,a))}if((i=e(t))!==K)return void 0===i&&(i=t),this.N&&b(i,!0),i},e.produceWithPatches=function(t,e){var n,r,o=this;return"function"==typeof t?function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.produceWithPatches(e,(function(e){return t.apply(void 0,[e].concat(r))}))}:[this.produce(t,e,(function(t,e){n=t,r=e})),n,r]},e.createDraft=function(t){l(t)||c(8);var e=j(this),n=C(this,t,void 0);return n[q].C=!0,S(e),n},e.finishDraft=function(t,e){var n=t&&t[q];"production"!==process.env.NODE_ENV&&(n&&n.C||c(9),n.I&&c(10));var r=n.A;return k(r,e),N(void 0,r)},e.setAutoFreeze=function(t){this.N=t},e.setUseProxies=function(t){U||c(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}var o=P("Patches").U;return u(t)?o(t,e):this.produce(t,(function(t){return o(t,e.slice(n+1))}))},t}()),Y=Q.produce;Q.produceWithPatches.bind(Q),Q.setAutoFreeze.bind(Q),Q.setUseProxies.bind(Q),Q.applyPatches.bind(Q),Q.createDraft.bind(Q),Q.finishDraft.bind(Q);const Z="bafybeifx7yeb55armcsxwwitkymga5xf53dxiarykms3ygqic223w5sk3m",tt={};function et({getState:t}){const{gateway:e,signal:n}=t();return function(t,{hash:e=null,content:n=null,signal:r=null}={}){e||(e=Z,n="Hello from IPFS Gateway Checker");const o=t.replace(":hash",e),i=Date.now();return fetch(`${o}?now=${i}#x-ipfs-companion-no-redirect`,{signal:r}).then(e=>{if(e.status>=400)throw new Error(`gateway ${t} request failed ${e.status}`);return e}).then(t=>t.text()).then(e=>{if(n&&n!==e.trim())throw new Error(`gateway ${t} content not match: ${e.trim()}`);return t})}(e,{signal:n})}async function nt({getState:t}){if(t().gateway.startsWith("https://:hash.ipfs."))return!0;throw new Error('cid not in sub-domain - expect start with "https://:hash.ipfs."')}function rt(t){try{const e=new URL(t).searchParams.get("i"),n=tt[e];n?n():console.error("no resolver found for "+e)}catch(e){console.error("unexpected error: "+t,e)}}async function ot({getState:t}){const{id:e,signal:n,gateway:r}=t(),o=r.replace(":hash","bafybeietzsezxbgeeyrmwicylb5tpvf7yutrm3bxrfaoulaituhbi7q6yi"),i=Date.now(),a=`${o}?i=${e}&now=${i}&filename=anyname.js#x-ipfs-companion-no-redirect`;return n&&await fetch(a,{signal:n}).then(t=>t.text()),new Promise((t,n)=>{try{const r=document.createElement("script");r.src=a,document.body.append(r),r.onerror=t=>{var e;n(null!==(e=null==t?void 0:t.error)&&void 0!==e?e:t)},r.onload=t=>{setTimeout(()=>n("load script is invalid"),500)},tt[e]=n=>{delete tt[e],t(n)}}catch(t){n(t)}})}async function it(t){const{onStateChange:e,getState:n}=t,{checker:r,name:o,...i}=t;e(t=>{const e=t[o];e.startTime=Date.now(),e.status="running"});try{const t=await r(i);e(e=>{const n=e[o];"running"===n.status&&(n.status="success"),n.result=t,n.endTime=Date.now()})}catch(t){e(e=>{const n=e[o];"running"===n.status&&(n.status="error"),n.error=t,n.endTime=Date.now()})}}let at=0;function st(t,e){var n,r,o,i,a;return(null===(n=t.status)||void 0===n?void 0:n.status)===(null===(r=e.status)||void 0===r?void 0:r.status)?"success"===(null===(a=t.status)||void 0===a?void 0:a.status)?t.status.endTime-t.status.startTime-(e.status.endTime-e.status.startTime):0:"success"===(null===(o=t.status)||void 0===o?void 0:o.status)?-1:"success"===(null===(i=e.status)||void 0===i?void 0:i.status)?1:0}async function ct(t,e,{signal:n=null}={}){let r=new Array(t.length);return await Promise.all(t.map((t,n)=>async function(t,e,{signal:n=null}={}){let r={id:at++,gateway:t,hostname:ut(new URL(t.replace(":hash",Z))),startTime:Date.now(),status:{status:"new"},cors:{status:"new"},origin:{status:"new"},signal:n};e(r);const o={getState:()=>r,onStateChange(t){const n=Y(r,t);n!==r&&(r=n,e(r))}};return await Promise.all([it({...o,name:"status",checker:ot}),it({...o,name:"cors",checker:et}),it({...o,name:"origin",checker:nt})]),o.onStateChange(t=>{t.endTime=Date.now()}),r}(t,t=>{r=Y(r,e=>{e[n]=t}),e(r)}))),r}function ut(t){return t&&t.hostname&&(t=t.hostname.toString()),t.replace(Z+".ipfs.","").replace(Z+".","")}function lt(){var t,e,n,r,o;let s=null!==(t=null!==(e=null===(n=i())||void 0===n||null===(r=n.localStorage)||void 0===r?void 0:r.IPFS_PREFER_GW)&&void 0!==e?e:null===(o=i())||void 0===o?void 0:o.IPFS_PREFER_GW)&&void 0!==t?t:process.env.IPFS_PREFER_GW;return s=s||(a()?"http://127.0.0.1:8080/ipfs/:hash":"https://ipfs.io/ipfs/:hash"),s}const ft=["https://ipfs.io/ipfs/:hash","https://:hash.ipfs.dweb.link","https://gateway.ipfs.io/ipfs/:hash","https://ipfs.infura.io/ipfs/:hash","https://rx14.co.uk/ipfs/:hash","https://ninetailed.ninja/ipfs/:hash","https://ipfs.globalupload.io/:hash","https://ipfs.jes.xxx/ipfs/:hash","https://10.via0.com/ipfs/:hash","https://ipfs.eternum.io/ipfs/:hash","https://hardbin.com/ipfs/:hash","https://ipfs.wa.hle.rs/ipfs/:hash","https://gateway.blocksec.com/ipfs/:hash","https://ipfs.renehsz.com/ipfs/:hash","https://cloudflare-ipfs.com/ipfs/:hash","https://:hash.ipfs.cf-ipfs.com","https://ipns.co/:hash","https://ipfs.mrh.io/ipfs/:hash","https://gateway.originprotocol.com/ipfs/:hash","https://gateway.pinata.cloud/ipfs/:hash","https://ipfs.doolta.com/ipfs/:hash","https://ipfs.sloppyta.co/ipfs/:hash","https://ipfs.busy.org/ipfs/:hash","https://ipfs.greyh.at/ipfs/:hash","https://gateway.serph.network/ipfs/:hash","https://jorropo.ovh/ipfs/:hash","https://gateway.temporal.cloud/ipfs/:hash","https://ipfs.fooock.com/ipfs/:hash","https://cdn.cwinfo.net/ipfs/:hash","https://ipfs.privacytools.io/ipfs/:hash","https://ipfs.jeroendeneef.com/ipfs/:hash","https://permaweb.io/ipfs/:hash","https://ipfs.stibarc.com/ipfs/:hash","https://ipfs.best-practice.se/ipfs/:hash","https://:hash.ipfs.2read.net","https://ipfs.2read.net/ipfs/:hash","https://storjipfs-gateway.com/ipfs/:hash","http://127.0.0.1:8080/ipfs/:hash"];t("GatewayChecker",({gateways:t=ft})=>{const a=e(),[c,u]=n([]),[l,f]=n(lt);return r(()=>{window.OnScriptloaded=rt},[]),r(()=>{var e,n,r,o;null===(e=a.current)||void 0===e||e.abort();let i=null;try{i=new AbortController}catch(t){}return a.current=i,null===(n=i)||void 0===n||null===(r=n.signal)||void 0===r||r.addEventListener("abort",()=>{console.log("Abort checking")}),ct(t,u,{signal:null===(o=i)||void 0===o?void 0:o.signal}).then(t=>{var e,n;(null===(e=i)||void 0===e||null===(n=e.signal)||void 0===n?void 0:n.aborted)||f(t[0].gateway)}),()=>{var t;null===(t=i)||void 0===t||t.abort()}},[t]),r(()=>{var t,e;l!==lt()&&(t=l,(null===(e=i())||void 0===e?void 0:e.localStorage)?i().localStorage.IPFS_PREFER_GW=t:i().IPFS_PREFER_GW=t)},[l]),o.createElement("div",null,o.createElement("div",{style:{display:"flex",alignItems:"center"}},o.createElement("div",{className:"check-status",style:{backgroundColor:"#0b3a53"}},c.filter(t=>t.endTime).length,"/",c.length," 测试"),o.createElement("div",{className:"check-status",style:{backgroundColor:"#0cb892"}},c.filter(t=>"success"===t.status.status).length," 在线"),o.createElement("div",null,pt(c.find(t=>!t.endTime)?"running":"success")),o.createElement("div",null,"当前偏好网关 ",l)),o.createElement("table",{className:"check-table"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Online"),o.createElement("th",null,"CORS"),o.createElement("th",null,"Origin"),o.createElement("th",null,"Hostname / 主机名"),o.createElement("th",null,"ΔT"))),o.createElement("tbody",null,Array.from(c).sort(st).map(({gateway:t,hostname:e,status:n,cors:r,origin:i})=>o.createElement("tr",{key:t},o.createElement("td",{title:ht(r)},pt(n.status)),o.createElement("td",{title:ht(r)},pt(r.status)),o.createElement("td",null,pt(i.status)),o.createElement("td",null,o.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.createElement("div",null,e),o.createElement("div",null,o.createElement("span",null,t),o.createElement("span",null,o.createElement(s,{type:"link",size:"small",disabled:l===t,onClick:()=>f(t)},"使用"))))),o.createElement("td",null,ht(n)))))),o.createElement("style",{jsx:!0},"\n        .check-status {\n          width: 8em;\n          text-align: center;\n          margin: 0 0.8em;\n          user-select: none;\n          color: white;\n\n          font-family: monospace;\n          border-radius: 1em;\n          font-size: 1.2em;\n        }\n\n        .check-table {\n          font-family: monospace;\n          text-align: center;\n          width: 100%;\n        }\n        .check-table tr:hover {\n          background-color: #edf0f4;\n        }\n\n        .check-table th:nth-child(1),\n        .check-table th:nth-child(2),\n        .check-table th:nth-child(3) {\n          max-width: 30px;\n        }\n        .check-table td:nth-child(4),\n        .check-table th:nth-child(4) {\n          text-align: left;\n        }\n        .check-table td:nth-child(5),\n        .check-table th:nth-child(5) {\n          text-align: right;\n        }\n        .check-table th {\n          min-width: 50px;\n        }\n      "))});function ht({startTime:t,endTime:e}){return e?((e-t)/1e3).toFixed(2)+" s":""}function pt(t){switch(t){case"new":return"🆕";case"running":return"🕑";case"error":return"❌";case"success":return"✅";default:return t}}t("metadata",{title:"IPFS 工具",description:"网管检测"})}}}));
//# sourceMappingURL=wener-apis-ipfs.system.min.js.map
