System.register(["react","@wener/ui","antd"],(function(e){"use strict";var t,n,o,a,r,i,l;return{setters:[function(e){t=e.useState,n=e.default,o=e.useRef},function(e){a=e.useConstant,r=e.useAsyncEffect},function(e){i=e.Alert,l=e.Descriptions}],execute:function(){e("LocationMeLite",()=>{const[e,l]=t([]),[s,m]=t(null);return function(e){const t=o();r(async()=>{const{console:n=window.console,onPosition:o=(()=>null),onError:a=n.error,onInfo:r=n.info,onWarn:i=n.warn}=e;if(!("geolocation"in navigator))return void a("无 geolocation 支持");let l;await new Promise((e,t)=>{"permissions"in navigator?(r("有 permissions 支持"),navigator.permissions.query({name:"geolocation"}).then(t=>{"granted"===t.state?(r("已授权"),e(!0)):"prompt"===t.state?(i("待请求授权"),e(!1)):(a("未授权 "+JSON.stringify(t)),e(!1))})):(a("无 permissions 支持"),e(!1))}),r("开始获取定位... 超时=15秒");try{t.current=l=navigator.geolocation.getCurrentPosition(e=>{r("获取定位成功",e),o(e),r("开始进行持续定位"),navigator.geolocation.watchPosition(e=>{r("更新定位",e),o(e)},e=>{i("持续定位失败 code:"+e.code+"  message:"+e.message,e)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},e=>{a("获取失败 code:"+e.code+"  message:"+e.message,e)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})}catch(e){a("操作失败",e)}return()=>navigator.geolocation.clearWatch(l)},[])}({onPosition:m,console:a(()=>function({onRecord:e}){const t={};return["log","debug","info","warn","error","table","clear","time","timeEnd","count","assert"].forEach(n=>t[n]=(...t)=>e({level:n,message:t})),t}({onRecord:e=>{console[e.level](...e.message),l(t=>[...t,e])}}))}),n.createElement("div",null,n.createElement("h4",null,"定位信息"),s&&n.createElement(c,{position:s}),!s&&n.createElement("div",null,"获取中。。。"),n.createElement("div",null,n.createElement("h4",null,"日志"),n.createElement("div",{style:{padding:16}},e.map((e,t)=>n.createElement(i,{style:{border:"none"},showIcon:!0,key:t,type:{info:"info",warn:"warning",error:"error"}[e.level]||"info",message:String(e.message)})))))});const c=e("LocationDescription",({position:e})=>{if(!e)return n.createElement("div",null,"获取中...");const{latitude:t,longitude:o,accuracy:a,altitude:r,altitudeAccuracy:i,heading:c,speed:s}=e.coords;return n.createElement("div",null,n.createElement(l,null,n.createElement(l.Item,{label:"坐标 (lat,lon)"},`${t},${o}`),n.createElement(l.Item,{label:"坐标精度"},a," 米"),n.createElement(l.Item,{label:"高度"},r),n.createElement(l.Item,{label:"高度精度"},i," 米"),n.createElement(l.Item,{label:"朝向"},c),n.createElement(l.Item,{label:"速度"},s)))});e("metadata",{title:"定位工具",description:"基于HTML技术获取定位信息"})}}}));
//# sourceMappingURL=wener-apis-geo.system.min.js.map
