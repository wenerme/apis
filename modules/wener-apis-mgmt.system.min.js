System.register(["react","antd","@wener/apis-boot","@ant-design/icons"],(function(e){"use strict";var t,n,r,o,i,a,l,s,u,c,d,f,m,p,h,v,b,g,y,w,E,_,O,P,M,x,F;return{setters:[function(e){t=e.useCallback,n=e.useState,r=e.default,o=e.useEffect,i=e.useRef},function(e){a=e.List,l=e.Skeleton,s=e.Tag,u=e.Button,c=e.Dropdown,d=e.Menu,f=e.Form,m=e.Modal,p=e.Input,h=e.notification,v=e.message},function(e){b=e.getBootService,g=e.loadImportOverrides,y=e.persistImportOverrides},function(e){w=e.SyncOutlined,E=e.UploadOutlined,_=e.EditOutlined,O=e.MinusSquareOutlined,P=e.DownOutlined,M=e.PlusSquareOutlined,x=e.ClearOutlined,F=e.ReloadOutlined}],execute:function(){var S=[{id:"boot",name:"@wener/apis-boot",metadata:{name:"@wener/apis-boot",title:"启动模块",description:"控制映射模块，控制模块版本。"}},{id:"client",name:"@wener/apis-client",metadata:{title:"RPC Client",description:"远程调用客户端"}},{id:"crypto",name:"@wener/apis-crypto",metadata:{title:"加密哈希工具",description:"提供常用的加密算法、哈希算法"}},{id:"dash",name:"@wener/apis-dash",metadata:{title:"公共布局组件",description:"Dashboard、Layout 等组件"}},{id:"geo",name:"@wener/apis-geo",metadata:{title:"定位工具",description:"基于HTML技术获取定位信息"}},{id:"i18n",name:"@wener/apis-i18n",metadata:{title:"本地化",description:"提供英文翻译"}},{id:"ipfs",name:"@wener/apis-ipfs",metadata:{title:"IPFS 工具",description:"网管检测"}},{id:"lang-xml",name:"@wener/apis-lang-xml",metadata:{title:"XML工具",description:"XML格式化、JSON 转换、生成"}},{id:"langs",name:"@wener/apis-langs"},{id:"lite",name:"@wener/apis-lite",metadata:{title:"Wener's APIs Lite version",description:"APIs Lite - basic setup and configuration to bootstrap"}},{id:"mgmt",name:"@wener/apis-mgmt",metadata:{title:"应用管理",description:"模块管理，本地模块开发，模块更新发布。"}},{id:"password",name:"@wener/apis-password",metadata:{title:"密码校验",description:"Zxcvvn 密码强度检测"}},{id:"phone",name:"@wener/apis-phone",metadata:{title:"电话号码工具",description:"号码归属地查询"}},{id:"polyfill",name:"@wener/apis-polyfill",metadata:{title:"浏览器兼容",description:"添加 babel 需要的 runtime - corejs、regenerator"}},{id:"qrcode",name:"@wener/apis-qrcode",metadata:{title:"二维码",description:"二维码生成、二维码照片识别",externals:{pngjs:"https://cdn.jsdelivr.net/npm/pngjs@5.0.0/browser.min.js"}}},{id:"root",name:"@wener/apis-root",metadata:{title:"APIs 应用",description:"菜单、路由、页面布局控制；动态加载外部组件；Single SPA root config；"}},{id:"test",name:"@wener/apis-test",metadata:{title:"测试模块",description:"测试 Ping 接口；Single SPA 测试应用"}},{id:"uri",name:"@wener/apis-uri",metadata:{title:"URL工具",description:"解析、格式化 URL"}},{id:"webrtc",name:"@wener/apis-webrtc",metadata:{title:"WebRTC 工具",description:"WebRTC浏览器兼容检测"}}];class N{constructor(){this._boot=b(),this._modules=this._boot.modules,this.System=this._boot.System}async addOverrideModule({name:e,resolved:t}){this._modules.overrides[e]=t,await this.persistImportOverrides()}async removeOverrideModule({name:e}){delete this._modules.overrides[e],await this.persistImportOverrides()}async resetOverrideModules(){this._modules.overrides={},await this.persistImportOverrides()}async loadImportOverrides(){Object.assign(this._modules.overrides,await g())}async persistImportOverrides(){return await y(this._modules.overrides)}getModules(){const{System:e,_modules:t}=this;let n=[];n=n.concat(Object.entries(t.imports).map(([e,t])=>({name:e,resolved:t,predefined:!0})));{const e=j(n,"name");for(const n of S){const r=e[n.name]=e[n.name]||{name:n.name,resolved:t.tryResolve(n.name)};Object.assign(r,n)}for(const[n,r]of Object.entries(t.overrides))e[n]=Object.assign(e[n]||{},{name:n,resolved:r,override:!0});n=Object.values(e)}const r=j(n,"resolved");for(const[n,o]of e.entries()){if(!o)continue;const e=r[n]=r[n]||{name:t.resolveName(n)||n,resolved:n};e.loaded=!0,t.isInternal(e.name)&&(e.metadata=o.metadata||{})}n=Object.values(r),n.forEach(e=>{var n;e.internal=t.isInternal(e.name),e.hasMetadata=Boolean(Object.keys(e.metadata||{}).length),e.source=(n=e.resolved).startsWith("https://cdn.jsdelivr.net/npm/")?"jsdelivr":n.startsWith("https://unpkg.com/")?"unpkg":n.startsWith(location.origin)?"site":/^https?:\/\/(localhost|127\.0\.0|192\.168|10\.)/.test(n)?"localhost":"unknown",e.version=function(e){const t="https://cdn.jsdelivr.net/npm/";if(e.startsWith(t)){const n=e.substr(t.length).match(/(^@[^/]+[/])?[^/@]+@([^/]+)/);if(n)return n[2]}return"latest"}(e.resolved),e.dependencies=Array.from(t.dependencies[e.name]||[])});const o={};return n.flatMap(({name:e,dependencies:t})=>t.map(t=>[t,e])).reduce((e,[t,n])=>((e[t]=e[t]||[]).push(n),e),o),n.forEach(e=>{e.dependents=o[e.name]||[]}),n}}function j(e,t){return Object.fromEntries(e.map(e=>[e[t],e]))}function k(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("production"!==process.env.NODE_ENV){var o=he[e],i=o?"function"==typeof o?o.apply(null,n):o:"unknown error nr: "+e;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function A(e){return!!e&&!!e[pe]}function I(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[me]||!!e.constructor[me]||L(e)||T(e))}function z(e,t,n){void 0===n&&(n=!1),0===B(e)?(n?Object.keys:ve)(e).forEach((function(n){return t(n,e[n],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function B(e){var t=e[pe];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:L(e)?2:T(e)?3:0}function C(e,t){return 2===B(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function L(e){return ue&&e instanceof Map}function T(e){return ce&&e instanceof Set}function R(e){return e.o||e.t}function $(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var n=Object.create(Object.getPrototypeOf(e));return z(e,(function(r){if(r!==pe){var o=Object.getOwnPropertyDescriptor(e,r),i=o.value;o.get&&(t||k(1),i=o.get.call(e)),o.enumerable?n[r]=i:Object.defineProperty(n,r,{value:i,writable:!0,configurable:!0})}})),n}function V(e,t){A(e)||U(e)||!I(e)||(B(e)>1&&(e.set=e.add=e.clear=e.delete=W),Object.freeze(e),t&&z(e,(function(e,t){return V(t,!0)}),!0))}function W(){k(2)}function U(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function q(e){var t=be[e];return t||k("production"!==process.env.NODE_ENV?18:19,e),t}function K(){return"production"===process.env.NODE_ENV||le||k(0),le}function Z(e,t){t&&(q("Patches"),e.u=[],e.s=[],e.v=t)}function G(e){X(e),e.p.forEach(Y),e.p=null}function X(e){e===le&&(le=e.l)}function J(e){return le={p:[],l:le,h:e,m:!0,_:0}}function Y(e){var t=e[pe];0===t.i||1===t.i?t.j():t.O=!0}function H(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||q("ES5").S(t,e,r),r?(n[pe].P&&(G(t),k(4)),I(e)&&(e=Q(t,e),t.l||te(t,e)),t.u&&q("Patches").M(n[pe],e,t.u,t.s)):e=Q(t,n,[]),G(t),t.u&&t.v(t.u,t.s),e!==fe?e:void 0}function Q(e,t,n){if(U(t))return t;var r=t[pe];if(!r)return z(t,(function(o,i){return ee(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return te(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=$(r.k,!0):r.o;z(o,(function(t,i){return ee(e,r,o,t,i,n)})),te(e,o,!1),n&&e.u&&q("Patches").R(r,n,e.u,e.s)}return r.o}function ee(e,t,n,r,o,i){if("production"!==process.env.NODE_ENV&&o===n&&k(5),A(o)){var a=Q(e,o,i&&t&&3!==t.i&&!C(t.D,r)?i.concat(r):void 0);if(s=r,u=a,2===(c=B(l=n))?l.set(s,u):3===c?(l.delete(s),l.add(u)):l[s]=u,!A(a))return;e.m=!1}var l,s,u,c;if((!t||!D(o,function(e,t){return 2===B(e)?e.get(t):e[t]}(t.t,r)))&&I(o)){if(!e.h.N&&e._<1)return;Q(e,o),t&&t.A.l||te(e,o)}}function te(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&V(t,n)}function ne(e,t){var n=e[pe],r=Reflect.getOwnPropertyDescriptor(n?R(n):e,t);return r&&r.value}function re(e){if(!e.P){if(e.P=!0,0===e.i||1===e.i){var t=e.o=$(e.t);z(e.p,(function(e,n){t[e]=n})),e.p=void 0}e.l&&re(e.l)}}function oe(e){e.o||(e.o=$(e.t))}function ie(e,t,n){var r=L(t)?q("MapSet").T(t,n):T(t)?q("MapSet").F(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:K(),P:!1,I:!1,D:{},l:t,t:e,k:null,p:{},o:null,j:null,C:!1},o=r,i=ge;n&&(o=[r],i=ye);var a=Proxy.revocable(o,i),l=a.revoke,s=a.proxy;return r.k=s,r.j=l,s}(t,n):q("ES5").J(t,n);return(n?n.A:K()).p.push(r),r}var ae,le,se="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ue="undefined"!=typeof Map,ce="undefined"!=typeof Set,de="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,fe=se?Symbol("immer-nothing"):((ae={})["immer-nothing"]=!0,ae),me=se?Symbol("immer-draftable"):"__$immer_draftable",pe=se?Symbol("immer-state"):"__$immer_state",he={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},19:function(e){return"plugin not loaded: "+e},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available"},ve="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,be={},ge={get:function(e,t){if(t===pe)return e;var n=e.p;if(!e.P&&C(n,t))return n[t];var r=R(e)[t];if(e.I||!I(r))return r;if(e.P){if(r!==ne(e.t,t))return r;n=e.o}return n[t]=ie(e.A.h,r,e)},has:function(e,t){return t in R(e)},ownKeys:function(e){return Reflect.ownKeys(R(e))},set:function(e,t,n){if(!e.P){var r=ne(e.t,t);if(n?D(r,n)||n===e.p[t]:D(r,n)&&t in e.t)return!0;oe(e),re(e)}return e.D[t]=!0,e.o[t]=n,!0},deleteProperty:function(e,t){return void 0!==ne(e.t,t)||t in e.t?(e.D[t]=!1,oe(e),re(e)):e.D[t]&&delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=R(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&(r.writable=!0,r.configurable=1!==e.i||"length"!==t),r},defineProperty:function(){k(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){k(12)}},ye={};z(ge,(function(e,t){ye[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ye.deleteProperty=function(e,t){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&k(13),ge.deleteProperty.call(this,e[0],t)},ye.set=function(e,t,n){return"production"!==process.env.NODE_ENV&&"length"!==t&&isNaN(parseInt(t))&&k(14),ge.set.call(this,e[0],t,n,e[0])};var we=new(function(){function e(e){this.g=de,this.N="production"!==process.env.NODE_ENV,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,n){if("function"==typeof e&&"function"!=typeof t){var r=t;t=e;var o=this;return function(e){var n=this;void 0===e&&(e=r);for(var i=arguments.length,a=Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return o.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(a))}))}}var i;if("function"!=typeof t&&k(6),void 0!==n&&"function"!=typeof n&&k(7),I(e)){var a=J(this),l=ie(this,e,void 0),s=!0;try{i=t(l),s=!1}finally{s?G(a):X(a)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return Z(a,n),H(e,a)}),(function(e){throw G(a),e})):(Z(a,n),H(i,a))}if((i=t(e))!==fe)return void 0===i&&(i=e),this.N&&V(i,!0),i},t.produceWithPatches=function(e,t){var n,r,o=this;return"function"==typeof e?function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(r))}))}:[this.produce(e,t,(function(e,t){n=e,r=t})),n,r]},t.createDraft=function(e){I(e)||k(8);var t=J(this),n=ie(this,e,void 0);return n[pe].C=!0,X(t),n},t.finishDraft=function(e,t){var n=e&&e[pe];"production"!==process.env.NODE_ENV&&(n&&n.C||k(9),n.I&&k(10));var r=n.A;return Z(r,t),H(void 0,r)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){de||k(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var o=q("Patches").U;return A(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(n+1))}))},e}()),Ee=we.produce;we.produceWithPatches.bind(we),we.setAutoFreeze.bind(we),we.setUseProxies.bind(we),we.applyPatches.bind(we),we.createDraft.bind(we),we.finishDraft.bind(we);function _e(e){var r=n(e),o=r[1];return[r[0],t((function(e){o(Ee(e))}),[])]}var Oe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Pe=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(e){
/*! @preserve
         * numeral.js
         * version : 2.0.6
         * author : Adam Draper
         * license : MIT
         * http://adamwdraper.github.com/Numeral-js/
         */
!function(t,n){e.exports?e.exports=n():t.numeral=n()}(Oe,(function(){var e,t,n,r,o,i={},a={},l={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},s={currentLocale:l.currentLocale,zeroFormat:l.zeroFormat,nullFormat:l.nullFormat,defaultFormat:l.defaultFormat,scalePercentBy100:l.scalePercentBy100};function u(e,t){this._input=e,this._value=t}return(e=function(n){var r,o,a,l;if(e.isNumeral(n))r=n.value();else if(0===n||void 0===n)r=0;else if(null===n||t.isNaN(n))r=null;else if("string"==typeof n)if(s.zeroFormat&&n===s.zeroFormat)r=0;else if(s.nullFormat&&n===s.nullFormat||!n.replace(/[^0-9]+/g,"").length)r=null;else{for(o in i)if((l="function"==typeof i[o].regexps.unformat?i[o].regexps.unformat():i[o].regexps.unformat)&&n.match(l)){a=i[o].unformat;break}r=(a=a||e._.stringToNumber)(n)}else r=Number(n)||null;return new u(n,r)}).version="2.0.6",e.isNumeral=function(e){return e instanceof u},e._=t={numberToFormat:function(t,n,r){var o,i,l,s,u,c,d,f,m=a[e.options.currentLocale],p=!1,h=!1,v="",b="",g=!1;if(t=t||0,l=Math.abs(t),e._.includes(n,"(")?(p=!0,n=n.replace(/[\(|\)]/g,"")):(e._.includes(n,"+")||e._.includes(n,"-"))&&(c=e._.includes(n,"+")?n.indexOf("+"):t<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),e._.includes(n,"a")&&(i=!!(i=n.match(/a(k|m|b|t)?/))&&i[1],e._.includes(n," a")&&(v=" "),n=n.replace(new RegExp(v+"a[kmbt]?"),""),l>=1e12&&!i||"t"===i?(v+=m.abbreviations.trillion,t/=1e12):l<1e12&&l>=1e9&&!i||"b"===i?(v+=m.abbreviations.billion,t/=1e9):l<1e9&&l>=1e6&&!i||"m"===i?(v+=m.abbreviations.million,t/=1e6):(l<1e6&&l>=1e3&&!i||"k"===i)&&(v+=m.abbreviations.thousand,t/=1e3)),e._.includes(n,"[.]")&&(h=!0,n=n.replace("[.]",".")),s=t.toString().split(".")[0],u=n.split(".")[1],d=n.indexOf(","),o=(n.split(".")[0].split(",")[0].match(/0/g)||[]).length,u?(e._.includes(u,"[")?(u=(u=u.replace("]","")).split("["),b=e._.toFixed(t,u[0].length+u[1].length,r,u[1].length)):b=e._.toFixed(t,u.length,r),s=b.split(".")[0],b=e._.includes(b,".")?m.delimiters.decimal+b.split(".")[1]:"",h&&0===Number(b.slice(1))&&(b="")):s=e._.toFixed(t,0,r),v&&!i&&Number(s)>=1e3&&v!==m.abbreviations.trillion)switch(s=String(Number(s)/1e3),v){case m.abbreviations.thousand:v=m.abbreviations.million;break;case m.abbreviations.million:v=m.abbreviations.billion;break;case m.abbreviations.billion:v=m.abbreviations.trillion}if(e._.includes(s,"-")&&(s=s.slice(1),g=!0),s.length<o)for(var y=o-s.length;y>0;y--)s="0"+s;return d>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m.delimiters.thousands)),0===n.indexOf(".")&&(s=""),f=s+b+(v||""),p?f=(p&&g?"(":"")+f+(p&&g?")":""):c>=0?f=0===c?(g?"-":"+")+f:f+(g?"-":"+"):g&&(f="-"+f),f},stringToNumber:function(e){var t,n,r,o=a[s.currentLocale],i=e,l={thousand:3,million:6,billion:9,trillion:12};if(s.zeroFormat&&e===s.zeroFormat)n=0;else if(s.nullFormat&&e===s.nullFormat||!e.replace(/[^0-9]+/g,"").length)n=null;else{for(t in n=1,"."!==o.delimiters.decimal&&(e=e.replace(/\./g,"").replace(o.delimiters.decimal,".")),l)if(r=new RegExp("[^a-zA-Z]"+o.abbreviations[t]+"(?:\\)|(\\"+o.currency.symbol+")?(?:\\))?)?$"),i.match(r)){n*=Math.pow(10,l[t]);break}n*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1,e=e.replace(/[^0-9\.]+/g,""),n*=Number(e)}return n},isNaN:function(e){return"number"==typeof e&&isNaN(e)},includes:function(e,t){return-1!==e.indexOf(t)},insert:function(e,t,n){return e.slice(0,n)+t+e.slice(n)},reduce:function(e,t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,r=Object(e),o=r.length>>>0,i=0;if(3===arguments.length)n=arguments[2];else{for(;i<o&&!(i in r);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[i++]}for(;i<o;i++)i in r&&(n=t(n,r[i],i,r));return n},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){var e=Array.prototype.slice.call(arguments);return e.reduce((function(e,n){var r=t.multiplier(n);return e>r?e:r}),1)},toFixed:function(e,t,n,r){var o,i,a,l,s=e.toString().split("."),u=t-(r||0);return o=2===s.length?Math.min(Math.max(s[1].length,u),t):u,a=Math.pow(10,o),l=(n(e+"e+"+o)/a).toFixed(o),r>t-o&&(i=new RegExp("\\.?0{1,"+(r-(t-o))+"}$"),l=l.replace(i,"")),l}},e.options=s,e.formats=i,e.locales=a,e.locale=function(e){return e&&(s.currentLocale=e.toLowerCase()),s.currentLocale},e.localeData=function(e){if(!e)return a[s.currentLocale];if(e=e.toLowerCase(),!a[e])throw new Error("Unknown locale : "+e);return a[e]},e.reset=function(){for(var e in l)s[e]=l[e]},e.zeroFormat=function(e){s.zeroFormat="string"==typeof e?e:null},e.nullFormat=function(e){s.nullFormat="string"==typeof e?e:null},e.defaultFormat=function(e){s.defaultFormat="string"==typeof e?e:"0.0"},e.register=function(e,t,n){if(t=t.toLowerCase(),this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=n,n},e.validate=function(t,n){var r,o,i,a,l,s,u,c;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),(t=t.trim()).match(/^\d+$/))return!0;if(""===t)return!1;try{u=e.localeData(n)}catch(t){u=e.localeData(e.locale())}return i=u.currency.symbol,l=u.abbreviations,r=u.delimiters.decimal,o="."===u.delimiters.thousands?"\\.":u.delimiters.thousands,(null===(c=t.match(/^[^\d]+/))||(t=t.substr(1),c[0]===i))&&((null===(c=t.match(/[^\d]+$/))||(t=t.slice(0,-1),c[0]===l.thousand||c[0]===l.million||c[0]===l.billion||c[0]===l.trillion))&&(s=new RegExp(o+"{2}"),!t.match(/[^\d.,]/g)&&(!((a=t.split(r)).length>2)&&(a.length<2?!!a[0].match(/^\d+.*\d$/)&&!a[0].match(s):1===a[0].length?!!a[0].match(/^\d+$/)&&!a[0].match(s)&&!!a[1].match(/^\d+$/):!!a[0].match(/^\d+.*\d$/)&&!a[0].match(s)&&!!a[1].match(/^\d+$/)))))},e.fn=u.prototype={clone:function(){return e(this)},format:function(t,n){var r,o,a,l=this._value,u=t||s.defaultFormat;if(n=n||Math.round,0===l&&null!==s.zeroFormat)o=s.zeroFormat;else if(null===l&&null!==s.nullFormat)o=s.nullFormat;else{for(r in i)if(u.match(i[r].regexps.format)){a=i[r].format;break}o=(a=a||e._.numberToFormat)(l,u,n)}return o},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){var n=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([this._value,e],(function(e,t,r,o){return e+Math.round(n*t)}),0)/n,this},subtract:function(e){var n=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([e],(function(e,t,r,o){return e-Math.round(n*t)}),Math.round(this._value*n))/n,this},multiply:function(e){return this._value=t.reduce([this._value,e],(function(e,n,r,o){var i=t.correctionFactor(e,n);return Math.round(e*i)*Math.round(n*i)/Math.round(i*i)}),1),this},divide:function(e){return this._value=t.reduce([this._value,e],(function(e,n,r,o){var i=t.correctionFactor(e,n);return Math.round(e*i)/Math.round(n*i)})),this},difference:function(t){return Math.abs(e(this._value).subtract(t).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,n,r){var o,i=e._.includes(n," BPS")?" ":"";return t*=1e4,n=n.replace(/\s?BPS/,""),o=e._.numberToFormat(t,n,r),e._.includes(o,")")?((o=o.split("")).splice(-1,0,i+"BPS"),o=o.join("")):o=o+i+"BPS",o},unformat:function(t){return+(1e-4*e._.stringToNumber(t)).toFixed(15)}}),r={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},o="("+(o=(n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat(r.suffixes.filter((function(e){return n.suffixes.indexOf(e)<0}))).join("|")).replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(t,o,i){var a,l,s,u=e._.includes(o,"ib")?r:n,c=e._.includes(o," b")||e._.includes(o," ib")?" ":"";for(o=o.replace(/\s?i?b/,""),a=0;a<=u.suffixes.length;a++)if(l=Math.pow(u.base,a),s=Math.pow(u.base,a+1),null===t||0===t||t>=l&&t<s){c+=u.suffixes[a],l>0&&(t/=l);break}return e._.numberToFormat(t,o,i)+c},unformat:function(t){var o,i,a=e._.stringToNumber(t);if(a){for(o=n.suffixes.length-1;o>=0;o--){if(e._.includes(t,n.suffixes[o])){i=Math.pow(n.base,o);break}if(e._.includes(t,r.suffixes[o])){i=Math.pow(r.base,o);break}}a*=i||1}return a}}),e.register("format","currency",{regexps:{format:/(\$)/},format:function(t,n,r){var o,i,a=e.locales[e.options.currentLocale],l={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),o=e._.numberToFormat(t,n,r),t>=0?(l.before=l.before.replace(/[\-\(]/,""),l.after=l.after.replace(/[\-\)]/,"")):t<0&&!e._.includes(l.before,"-")&&!e._.includes(l.before,"(")&&(l.before="-"+l.before),i=0;i<l.before.length;i++)switch(l.before[i]){case"$":o=e._.insert(o,a.currency.symbol,i);break;case" ":o=e._.insert(o," ",i+a.currency.symbol.length-1)}for(i=l.after.length-1;i>=0;i--)switch(l.after[i]){case"$":o=i===l.after.length-1?o+a.currency.symbol:e._.insert(o,a.currency.symbol,-(l.after.length-(1+i)));break;case" ":o=i===l.after.length-1?o+" ":e._.insert(o," ",-(l.after.length-(1+i)+a.currency.symbol.length-1))}return o}}),e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,n,r){var o=("number"!=typeof t||e._.isNaN(t)?"0e+0":t.toExponential()).split("e");return n=n.replace(/e[\+|\-]{1}0/,""),e._.numberToFormat(Number(o[0]),n,r)+"e"+o[1]},unformat:function(t){var n=e._.includes(t,"e+")?t.split("e+"):t.split("e-"),r=Number(n[0]),o=Number(n[1]);return o=e._.includes(t,"e-")?o*=-1:o,e._.reduce([r,Math.pow(10,o)],(function(t,n,r,o){var i=e._.correctionFactor(t,n);return t*i*(n*i)/(i*i)}),1)}}),e.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,n,r){var o=e.locales[e.options.currentLocale],i=e._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),i+=o.ordinal(t),e._.numberToFormat(t,n,r)+i}}),e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,n,r){var o,i=e._.includes(n," %")?" ":"";return e.options.scalePercentBy100&&(t*=100),n=n.replace(/\s?\%/,""),o=e._.numberToFormat(t,n,r),e._.includes(o,")")?((o=o.split("")).splice(-1,0,i+"%"),o=o.join("")):o=o+i+"%",o},unformat:function(t){var n=e._.stringToNumber(t);return e.options.scalePercentBy100?.01*n:n}}),e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,n){var r=Math.floor(e/60/60),o=Math.floor((e-60*r*60)/60),i=Math.round(e-60*r*60-60*o);return r+":"+(o<10?"0"+o:o)+":"+(i<10?"0"+i:i)},unformat:function(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}}),e}))}));const Me=({loading:e,modules:t,renderActions:n=(e=>[])})=>r.createElement("div",null,r.createElement(a,{loading:e,itemLayout:"horizontal",dataSource:t,renderItem:e=>{var t,o,i;return r.createElement(a.Item,{actions:[...n(e)]},r.createElement(l,{avatar:!0,title:!1,loading:e.loading,active:!0},r.createElement(a.Item.Meta,{title:r.createElement("div",null,r.createElement("span",null,e.name+((null===(t=e.metadata)||void 0===t?void 0:t.title)?" / "+(null===(o=e.metadata)||void 0===o?void 0:o.title):"")),r.createElement("span",{style:{paddingLeft:10}},e.loaded&&r.createElement(s,{color:"magenta"},"已加载"),e.predefined&&r.createElement(s,{color:"green"},"预定义"),e.internal&&r.createElement(s,{color:"lime"},"内部模块"),e.hasMetadata&&r.createElement(s,{color:"gold"},"含元数据"),e.override&&r.createElement(s,{color:"geekblue"},"覆盖"))),description:null===(i=e.metadata)||void 0===i?void 0:i.description}),r.createElement("div",null,r.createElement("div",null,r.createElement("small",null,e.resolved),r.createElement("span",{style:{paddingLeft:8}},r.createElement(s,null,e.version),r.createElement(s,null,e.source),e.loadingSize&&r.createElement(s,{icon:r.createElement(w,{spin:!0})}),e.size&&r.createElement(s,null,Pe(e.size).format("0.00b")))),r.createElement("div",{style:{maxWidth:"30vw"}},Boolean(e.dependencies.length)&&r.createElement("div",null,r.createElement("small",null,"依赖: ",e.dependencies.join(","))),Boolean(e.dependents.length)&&r.createElement("div",null,r.createElement("small",null,"被依赖: ",e.dependents.join(",")))))))}}));let xe;async function Fe(e,t,n=!1){let r=e.map((e,t)=>[t,e]).filter(([e,t])=>!t.size);n||(r=r.filter(([e,t])=>t.loaded));const o=r.map(async([e,n])=>{t(t=>{t[e].loadingSize=!0});const r=await(o=n.resolved,fetch(o).then(e=>{const t=e.headers.get("content-length");return t?parseInt(t,10):e.arrayBuffer().then(e=>e.byteLength)}));var o;try{t(t=>{t[e].size=r,t[e].loadingSize=!1})}catch(r){console.error("failed to get size of",n.name,n.resolved,r),t(t=>{t[e].loadingSize=!1})}});return Promise.all(o)}e("ModuleManagementPanel",()=>{const e=xe=xe||new N,t=b().System,[n,i]=_e(()=>e.getModules().sort((e,t)=>e.name.localeCompare(t.name)));o(()=>{Fe(n,i)},[]);const a=()=>{i(t=>e.getModules().sort((e,t)=>e.name.localeCompare(t.name)))},l=async t=>{await e.addOverrideModule(t),a()},s=async e=>{i(t=>{t.find(t=>t.name===e).loading=!0});try{await t.import(e),i(t=>{const n=t.find(t=>t.name===e);n.loading=!1,n.loaded=!0,n.dependencies=Array.from(b().modules.dependencies[e]||[]);for(const r of n.dependencies){const n=t.find(e=>e.name===r);n&&!n.dependents.includes(e)&&(n.dependents=[...n.dependents,e])}})}catch(t){h.error({message:String(t)}),i(t=>{const n=t.find(t=>t.name===e);n.loading=!1,n.loaded=!1})}},u=e=>{i(n=>{const r=n.find(t=>t.name===e);t.delete(r.resolved),r.loading=!1,r.loaded=t.has(r.resolved)})},[c,d]=_e({editing:!1,module:void 0});return r.createElement("div",null,r.createElement(Ne,{visible:c.editing,module:c.module,onModuleChange:async e=>l(e),onVisibleChange:e=>d(t=>{t.editing=e})}),r.createElement("div",null,r.createElement(je,{onRefresh:a,onResetLocalModule:async()=>{await e.resetOverrideModules(),a()},onAddLocalModule:l,onShowAllModuleSize:()=>Fe(n,i,!0)})),r.createElement(Me,{modules:n,onModuleLoad:s,onModuleUnload:u,renderActions:Se({onModuleUnload:u,onModuleLoad:s,onModuleReset:async t=>{await e.removeOverrideModule(t),a()},onModuleEdit:e=>{d(t=>{t.editing=!0,t.module=e})},onModulePublish:e=>{v.warn("尚未实现")}})}))});function Se(e){const{onModuleLoad:t,onModuleUnload:n,onModuleEdit:o,onModulePublish:i,onModuleReset:a}=e;return e=>[r.createElement(u,{onClick:()=>t(e.name),type:"link",key:"load",size:"small",disabled:e.loaded},"加载"),r.createElement(u,{onClick:()=>n(e.name),type:"link",key:"unload",size:"small",disabled:!e.loaded},"卸载"),r.createElement(c,{key:"more",overlay:r.createElement(d,null,r.createElement(d.Item,{onClick:()=>i(e),icon:r.createElement(E,null)},"发布"),r.createElement(d.Item,{onClick:()=>o(e),icon:r.createElement(_,null)},"编辑"),r.createElement(d.Item,{onClick:()=>a(e),disabled:!e.override,icon:r.createElement(O,null)},"重置本地覆盖"))},r.createElement("a",{className:"ant-dropdown-link",onClick:e=>e.preventDefault()},"操作 ",r.createElement(P,null)))]}const Ne=({visible:e,onVisibleChange:t,module:n,onModuleChange:a})=>{const[l]=f.useForm(),s=i(n);return o(()=>{n&&s.current!==n&&(s.current=n,l.setFieldsValue(n))},[n]),r.createElement(m,{title:"模块",onOk:()=>l.submit(),visible:e,onCancel:()=>t(!1)},r.createElement(f,{form:l,labelCol:{span:4},wrapperCol:{span:20},initialValues:n||{},onFinish:e=>{!1!==a(e)&&t(!1)}},r.createElement(f.Item,{name:"name",label:"模块名",required:!0,rules:[{required:!0}]},r.createElement(p,null)),r.createElement(f.Item,{name:"resolved",label:"地址",required:!0,rules:[{required:!0}]},r.createElement(p,null))))},je=({onRefresh:e,onResetLocalModule:t,onAddLocalModule:n,onShowAllModuleSize:o})=>{const[i,a]=_e({editing:!1,pendingShowAllModuleSize:!1});return r.createElement("div",null,r.createElement(Ne,{visible:i.editing,onVisibleChange:e=>a(t=>{t.editing=e}),onModuleChange:n}),r.createElement("div",{style:{display:"flex",gap:8}},r.createElement(u.Group,null,r.createElement(u,{type:"primary",icon:r.createElement(M,null),onClick:()=>a(e=>{e.editing=!0})},"本地"),r.createElement(u,{onClick:t,icon:r.createElement(x,null)},"重置")),r.createElement(u,{onClick:e,icon:r.createElement(F,null)},"刷新"),r.createElement(u,{loading:i.pendingShowAllModuleSize,onClick:async()=>{a(e=>{e.pendingShowAllModuleSize=!0});try{await o()}finally{a(e=>{e.pendingShowAllModuleSize=!1})}},icon:r.createElement(F,null)},"显示所有模块大小")))};e("metadata",{title:"应用管理",description:"模块管理，本地模块开发，模块更新发布。"})}}}));
//# sourceMappingURL=wener-apis-mgmt.system.min.js.map
