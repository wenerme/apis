{"version":3,"file":"wener-utils.system.min.js","sources":["../src/arrays/MaybeArray.ts","../src/validations/asserts.ts","../src/asyncs/AsyncInterval.ts","../src/browsers/clipboard.ts","../src/asyncs/LazyPromise.ts","../src/maths/random.ts","../src/browsers/download.ts","../src/browsers/transfers.ts","../src/io/isBuffer.ts","../src/validations/isClass.ts","../src/validations/isDefined.ts","../src/validations/isEmptyObject.ts","../src/asyncs/isPromise.ts","../src/browsers/loaders.ts","../src/strings/camelCase.ts","../src/asyncs/promiseOfCallback.ts","../src/strings/templates.ts","../src/asyncs/timeout.ts","../src/strings/urljoin.ts","../src/asyncs/sleep.ts","../src/envs/isDev.ts","../src/isomorphics/getGlobalThis.ts"],"sourcesContent":["export type MaybeArray<T> = T | T[];\n\nexport function objectOfMaybeArray<T = any>(\n  o: Record<string, MaybeArray<T>>,\n  keys: string[] | null = null,\n  picker = firstOfMaybeArray,\n): Record<string, T> {\n  if (keys === null) {\n    return Object.fromEntries(Object.entries(o).map(([k, v]) => [k, picker(v)]));\n  }\n  return Object.fromEntries(keys.map((v) => [v, picker(v)])) as any;\n}\nexport function firstOfMaybeArray<T>(v: MaybeArray<T>): T {\n  if (Array.isArray(v)) {\n    return v[0];\n  }\n  return v;\n}\n\nexport function lastOfMaybeArray<T>(v: MaybeArray<T>): T {\n  if (Array.isArray(v)) {\n    return v[v.length - 1];\n  }\n  return v;\n}\n\nexport function arrayOfMaybeArray<T>(v: MaybeArray<T>): T[] {\n  if (Array.isArray(v)) {\n    return v;\n  }\n  if (v === null || v === undefined) {\n    return [];\n  }\n  return [v];\n}\n","export function assert(condition: any, msg?: string): asserts condition {\n  // if (!condition) {\n  //   throw new AssertionError(msg);\n  // }\n  console.assert(!condition, msg);\n}\n\nexport function assertIsDefined<T>(val: T): asserts val is NonNullable<T> {\n  // if (val === undefined || val === null) {\n  //   throw new AssertionError(`Expected 'val' to be defined, but received ${val}`);\n  // }\n  console.assert(val === undefined || val === null, 'Expected defined');\n}\n","export type AsyncIntervalIdentifier = any;\n\nexport function setAsyncInterval(cb: () => void, interval: number, initial = interval): AsyncIntervalIdentifier {\n  let id: any;\n  const handler = async () => {\n    await cb();\n    id = setTimeout(handler, interval);\n  };\n  id = setTimeout(handler, initial);\n  return () => id;\n}\n\nexport function clearAsyncInterval(v: AsyncIntervalIdentifier) {\n  clearTimeout(v?.());\n}\n","// https://gist.github.com/rproenca/64781c6a1329b48a455b645d361a9aa3\nlet _copy: (s: any) => void;\n\nfunction initCopy() {\n  let textArea: HTMLTextAreaElement;\n\n  function isIOS() {\n    return navigator.userAgent.match(/ipad|iphone/i);\n  }\n\n  function createTextArea(text: string) {\n    textArea = document.createElement('textArea') as HTMLTextAreaElement;\n    textArea.value = text;\n    document.body.appendChild(textArea);\n  }\n\n  function selectText() {\n    let range, selection;\n\n    if (isIOS()) {\n      range = document.createRange();\n      range.selectNodeContents(textArea);\n      selection = window.getSelection();\n      if (selection === null) {\n        console.error(`no selection`);\n        return;\n      }\n      selection.removeAllRanges();\n      selection.addRange(range);\n      textArea.setSelectionRange(0, 999999);\n    } else {\n      textArea.select();\n    }\n  }\n\n  function copyToClipboard() {\n    document.execCommand('copy');\n    document.body.removeChild(textArea);\n  }\n\n  _copy = (text) => {\n    createTextArea(text);\n    selectText();\n    copyToClipboard();\n  };\n}\n\nexport function copy(text: string) {\n  if (window.navigator?.clipboard?.writeText) {\n    window.navigator.clipboard.writeText(text);\n    return;\n  }\n  if (!_copy) {\n    initCopy();\n  }\n  _copy(text);\n}\n","export type LazyPromise<T> = Promise<T> & {\n  reject(e: any): void;\n  resolve(v?: T | PromiseLike<T>): void;\n};\n\nexport function createLazyPromise<T = any>(): LazyPromise<T> {\n  const holder = {\n    resolve(_: any): void {\n      throw new Error('pending resolve');\n    },\n    reject(_: any): void {\n      throw new Error('pending reject');\n    },\n  };\n  return Object.assign(\n    new Promise<T>((resolve, reject) => {\n      holder.reject = reject;\n      holder.resolve = resolve;\n    }),\n    {\n      resolve(v: any) {\n        holder.resolve(v);\n      },\n      reject(v: any) {\n        holder.resolve(v);\n      },\n    },\n  );\n}\n","/// javascript pseudo random\nexport function createRandom({ seed = 0 } = {}) {\n  if (typeof seed === 'string') {\n    const s: string = seed;\n    let sum = 0;\n    for (let i = 0; i < s.length; i++) {\n      sum += s.charCodeAt(i);\n    }\n    seed = sum;\n  }\n\n  return () => {\n    const x = Math.sin(seed++) * 10000;\n    return x - Math.floor(x);\n  };\n}\n","export function download(filename: string, data: any, { type = 'application/octet-stream', raw = false } = {}) {\n  const a = document.createElement('a');\n  let closer: () => void = () => null;\n  try {\n    a.download = filename;\n\n    // console.info(`downloading ${name}`, data);\n\n    // url or data url\n    if (typeof data === 'string' && /^(https?:|data:)/.test(data) && !raw) {\n      a.href = data;\n    } else if (typeof data === 'string') {\n      data = new TextEncoder().encode(data);\n    }\n\n    if (data instanceof Uint8Array) {\n      data = new Blob([data], { type });\n    }\n\n    if (data instanceof File || data instanceof Blob || data instanceof MediaSource) {\n      a.href = URL.createObjectURL(data);\n      closer = () => URL.revokeObjectURL(a.href);\n    } else {\n      console.error(`invalid download data`, data);\n      throw new Error(`can not download ${Object.getPrototypeOf(data)}`);\n    }\n    a.click();\n  } finally {\n    closer();\n  }\n}\n","export function getFile(dataTransfer: DataTransfer): { file: File; filename: string } | null {\n  const items: DataTransferItemList = dataTransfer?.items ?? ([] as any);\n\n  if (items.length >= 2 && items[0].kind === 'string' && items[1].kind === 'file') {\n    const text = dataTransfer.getData('text');\n    const file = items[1].getAsFile() ?? dataTransfer.files?.item(0);\n    if (!file) {\n      console.error(`no file ${text}`, items[1]);\n      return null;\n    }\n\n    // let type = file.type;\n    // // fix type\n    // type = type;\n    // // NOTE paste file can not parse by libs\n    // if (type !== file.type) {\n    //   const blob = file.slice(0, file.size);\n    //   file = new File([blob], text, {type});\n    // }\n\n    return { file, filename: text };\n  } else if (items[0].kind === 'file') {\n    const file = items[0].getAsFile();\n    if (!file) {\n      console.error(`no file`, items[0]);\n      return null;\n    }\n    return { file, filename: file.name };\n  } else {\n    console.debug(\n      `file item not match`,\n      Array.from(items).map((v) => ({ type: v.type, kind: v.kind })),\n    );\n  }\n  return null;\n}\n","// https://github.com/feross/is-buffer/blob/master/index.js\nexport function isBuffer(obj: any): obj is Buffer {\n  return (\n    obj != null &&\n    obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' &&\n    obj.constructor.isBuffer(obj)\n  );\n}\n","export function isClass(func: any) {\n  return typeof func === 'function' && /^class\\s/.test(Function.prototype.toString.call(func));\n}\n","export function isDefined<T = any>(v: T): v is NonNullable<T> {\n  return v !== null && v !== undefined;\n}\n","export function isEmptyObject(o: any) {\n  if (o === null || o === undefined) {\n    return true;\n  }\n  return o.constructor === Object && Object.keys(o).length === 0;\n}\n","export function isPromise<T>(v: any): v is Promise<T> {\n  return v && (v instanceof Promise || (v.then && v.catch));\n}\n","function load(\n  el: HTMLScriptElement | HTMLLinkElement,\n  resolve: (v: any) => void,\n  reject: Function,\n  options: { attributes: Record<string, string> } | undefined,\n) {\n  el.onload = resolve;\n  el.onerror = (e) => {\n    el.remove();\n    reject(e);\n  };\n  const { attributes = {} } = options || {};\n  Object.entries(attributes).forEach(([k, v]) => el.setAttribute(k, v));\n\n  document.head.appendChild(el);\n}\n\nexport function loadScripts(src: string, options?: { attributes: Record<string, string> }) {\n  // todo quote ?\n  if (document.querySelector(`script[src=\"${src}\"]`)) {\n    return Promise.resolve();\n  }\n  return new Promise((resolve, reject) => {\n    const el = document.createElement('script');\n    el.src = src;\n    load(el, resolve, reject, options);\n  });\n}\n\nexport function loadStyles(href: string, options?: { attributes: Record<string, string> }) {\n  if (document.querySelector(`link[href=\"${href}\"]`)) {\n    return Promise.resolve();\n  }\n\n  return new Promise((resolve, reject) => {\n    const el = document.createElement('link');\n    el.rel = 'stylesheet';\n    el.href = href;\n    load(el, resolve, reject, options);\n  });\n}\n","// https://github.com/sindresorhus/camelcase/blob/master/index.js\n\nfunction preserveCamelCase(string: string) {\n  let isLastCharLower = false;\n  let isLastCharUpper = false;\n  let isLastLastCharUpper = false;\n\n  for (let i = 0; i < string.length; i++) {\n    const character = string[i];\n\n    if (isLastCharLower && /[a-zA-Z]/.test(character) && character.toUpperCase() === character) {\n      string = string.slice(0, i) + '-' + string.slice(i);\n      isLastCharLower = false;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = true;\n      i++;\n    } else if (\n      isLastCharUpper &&\n      isLastLastCharUpper &&\n      /[a-zA-Z]/.test(character) &&\n      character.toLowerCase() === character\n    ) {\n      string = string.slice(0, i - 1) + '-' + string.slice(i - 1);\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = false;\n      isLastCharLower = true;\n    } else {\n      isLastCharLower = character.toLowerCase() === character && character.toUpperCase() !== character;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = character.toUpperCase() === character && character.toLowerCase() !== character;\n    }\n  }\n\n  return string;\n}\n\nexport function pascalCase(input: string | string[]) {\n  return camelCase(input, { pascalCase: true });\n}\n\nexport function camelCase(\n  input: string | string[],\n  options: { pascalCase: boolean } = {\n    pascalCase: false,\n  },\n) {\n  if (!(typeof input === 'string' || Array.isArray(input))) {\n    throw new TypeError('Expected the input to be `string | string[]`');\n  }\n\n  const postProcess = (x: string) => (options.pascalCase ? x.charAt(0).toUpperCase() + x.slice(1) : x);\n\n  if (Array.isArray(input)) {\n    input = input\n      .map((x) => x.trim())\n      .filter((x) => x.length)\n      .join('-');\n  } else {\n    input = input.trim();\n  }\n\n  if (input.length === 0) {\n    return '';\n  }\n\n  if (input.length === 1) {\n    return options.pascalCase ? input.toUpperCase() : input.toLowerCase();\n  }\n\n  const hasUpperCase = input !== input.toLowerCase();\n\n  if (hasUpperCase) {\n    input = preserveCamelCase(input);\n  }\n\n  input = input\n    .replace(/^[_.\\- ]+/, '')\n    .toLowerCase()\n    .replace(/[_.\\- ]+(\\w|$)/g, (_, p1) => p1.toUpperCase())\n    .replace(/\\d+(\\w|$)/g, (m) => m.toUpperCase());\n\n  return postProcess(input);\n}\n","export function promiseOfCallback<T>(fun: (cb: (err: any, val?: T) => void) => void) {\n  return new Promise<T>((resolve, reject) => {\n    try {\n      fun((e: any, v: any) => {\n        if (e) {\n          reject(e);\n        } else {\n          resolve(v);\n        }\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n","import { get } from 'lodash';\n\n/**\n * 替换类似于 JS 的模板字符串\n *\n * @example\n * templateString('My name is ${name}',{name:'wener'})\n */\nexport function templateString(template: string, variables: Record<string, any>) {\n  return template.replace(/\\${(.*?)}/g, (_, g) => {\n    // variables[g.trim()]\n    // 支持路径 - 例如 a.b[0]\n    return get(variables, g.trim());\n  });\n}\n","export function timeout<T = any>(v: Promise<T>, ms: number): Promise<T> {\n  const error = new TimeoutError();\n  let timeout: any;\n  return Promise.race([\n    v,\n    new Promise((resolve, reject) => {\n      timeout = setTimeout(() => reject(error), ms);\n    }),\n  ]).then(\n    (v) => {\n      clearTimeout(timeout);\n      return v;\n    },\n    (e) => {\n      clearTimeout(timeout);\n      throw e;\n    },\n  ) as Promise<T>;\n}\n\nexport class TimeoutError extends Error {\n  constructor() {\n    super('TimeoutError');\n  }\n}\n","/// see https://github.com/jfromaniello/url-join\nexport function urljoin(...strArray: string[]) {\n  const resultArray: string[] = [];\n  if (strArray.length === 0) {\n    return '';\n  }\n\n  if (typeof strArray[0] !== 'string') {\n    throw new TypeError('Url must be a string. Received ' + strArray[0]);\n  }\n\n  // If the first part is a plain protocol, we combine it with the next part.\n  if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n    const first = strArray.shift();\n    strArray[0] = first + strArray[0];\n  }\n\n  // There must be two or three slashes in the file protocol, two slashes in anything else.\n  if (strArray[0].match(/^file:\\/\\/\\//)) {\n    strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\n  } else {\n    strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\n  }\n\n  for (let i = 0; i < strArray.length; i++) {\n    let component = strArray[i];\n\n    if (typeof component !== 'string') {\n      throw new TypeError('Url must be a string. Received ' + component);\n    }\n\n    if (component === '') {\n      continue;\n    }\n\n    if (i > 0) {\n      // Removing the starting slashes for each component but the first.\n      component = component.replace(/^[/]+/, '');\n    }\n    if (i < strArray.length - 1) {\n      // Removing the ending slashes for each component but the last.\n      component = component.replace(/[/]+$/, '');\n    } else {\n      // For the last component we will combine multiple slashes to a single one.\n      component = component.replace(/[/]+$/, '/');\n    }\n\n    resultArray.push(component);\n  }\n\n  let str = resultArray.join('/');\n  // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n  // remove trailing slash before parameters or hash\n  str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n  // replace ? in parameters with &\n  const parts = str.split('?');\n  str = parts.shift() + (parts.length > 0 ? '?' : '') + parts.join('&');\n\n  return str;\n}\n","export const sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\n","export const isDev = () => {\n  return typeof process !== 'undefined' && (process?.env?.NODE_ENV || '').startsWith('dev');\n};\n","declare const global: typeof globalThis;\n\n/**\n * isomorphic globalThis\n *\n * globalThis supported by ff 65, chrome 71, node 12, babel\n *\n * @see https://caniuse.com/#search=globalThis\n * @see https://v8.dev/features/globalthis\n */\nexport const getGlobalThis = (): typeof globalThis => {\n  if (typeof globalThis !== 'undefined') return globalThis;\n  if (typeof self !== 'undefined') return self;\n  if (typeof window !== 'undefined') return window;\n  if (typeof global !== 'undefined') return global as any;\n  // eslint-disable-next-line\n  // @ts-ignore\n  if (typeof this !== 'undefined') return this;\n  throw new Error('Unable to locate global `this`');\n};\n"],"names":["firstOfMaybeArray","v","Array","isArray","condition","msg","console","assert","val","clearTimeout","text","window","navigator","_window$navigator","clipboard","_window$navigator$cli","writeText","_copy","textArea","selectText","range","selection","userAgent","match","document","createRange","selectNodeContents","getSelection","error","removeAllRanges","addRange","setSelectionRange","select","createElement","value","body","appendChild","createTextArea","execCommand","removeChild","initCopy","holder","resolve","_","Error","reject","Object","assign","Promise","seed","s","sum","i","length","charCodeAt","x","Math","sin","floor","filename","data","type","raw","a","closer","download","test","href","TextEncoder","encode","Uint8Array","Blob","File","MediaSource","getPrototypeOf","URL","createObjectURL","revokeObjectURL","click","dataTransfer","items","kind","getData","file","getAsFile","files","_dataTransfer$files","item","name","debug","from","map","obj","constructor","isBuffer","func","Function","prototype","toString","call","o","keys","then","src","options","querySelector","el","load","rel","picker","fromEntries","entries","k","input","camelCase","pascalCase","fun","e","cb","interval","id","initial","handler","setTimeout","template","variables","replace","g","get","trim","ms","timeout","TimeoutError","race","resultArray","strArray","TypeError","first","shift","component","push","str","join","parts","split","preserveCamelCase","string","isLastCharLower","isLastCharUpper","isLastLastCharUpper","character","toUpperCase","slice","toLowerCase","postProcess","charAt","filter","hasUpperCase","p1","m","process","env","NODE_ENV","startsWith","onload","onerror","remove","attributes","forEach","setAttribute","head","globalThis","self","global"],"mappings":"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"}