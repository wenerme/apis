{"version":3,"file":"wener-utils.system.js","sources":["../src/arrays/MaybeArray.ts","../src/asyncs/LazyPromise.ts","../src/asyncs/AsyncInterval.ts","../src/asyncs/sleep.ts","../src/asyncs/timeout.ts","../src/asyncs/isPromise.ts","../src/asyncs/promiseOfCallback.ts","../src/validations/asserts.ts","../src/validations/isDefined.ts","../src/validations/isEmptyObject.ts","../src/validations/isClass.ts","../src/strings/camelCase.ts","../src/strings/templates.ts","../src/strings/urljoin.ts","../src/maths/random.ts","../src/io/isBuffer.ts","../src/envs/isDev.ts","../src/browsers/clipboard.ts","../src/browsers/download.ts","../src/browsers/loaders.ts","../src/browsers/transfers.ts","../src/isomorphics/getGlobalThis.ts"],"sourcesContent":["export type MaybeArray<T> = T | T[];\n\nexport function objectOfMaybeArray<T = any>(\n  o: Record<string, MaybeArray<T>>,\n  keys: string[] | null = null,\n  picker = firstOfMaybeArray,\n): Record<string, T> {\n  if (keys === null) {\n    return Object.fromEntries(Object.entries(o).map(([k, v]) => [k, picker(v)]));\n  }\n  return Object.fromEntries(keys.map((v) => [v, picker(v)])) as any;\n}\nexport function firstOfMaybeArray<T>(v: MaybeArray<T>): T {\n  if (Array.isArray(v)) {\n    return v[0];\n  }\n  return v;\n}\n\nexport function lastOfMaybeArray<T>(v: MaybeArray<T>): T {\n  if (Array.isArray(v)) {\n    return v[v.length - 1];\n  }\n  return v;\n}\n\nexport function arrayOfMaybeArray<T>(v: MaybeArray<T>): T[] {\n  if (Array.isArray(v)) {\n    return v;\n  }\n  if (v === null || v === undefined) {\n    return [];\n  }\n  return [v];\n}\n","export type LazyPromise<T> = Promise<T> & {\n  reject(e: any): void;\n  resolve(v?: T | PromiseLike<T>): void;\n};\n\nexport function createLazyPromise<T = any>(): LazyPromise<T> {\n  const holder = {\n    resolve(_: any): void {\n      throw new Error('pending resolve');\n    },\n    reject(_: any): void {\n      throw new Error('pending reject');\n    },\n  };\n  return Object.assign(\n    new Promise<T>((resolve, reject) => {\n      holder.reject = reject;\n      holder.resolve = resolve;\n    }),\n    {\n      resolve(v: any) {\n        holder.resolve(v);\n      },\n      reject(v: any) {\n        holder.resolve(v);\n      },\n    },\n  );\n}\n","export type AsyncIntervalIdentifier = any;\n\nexport function setAsyncInterval(cb: () => void, interval: number, initial = interval): AsyncIntervalIdentifier {\n  let id: any;\n  const handler = async () => {\n    await cb();\n    id = setTimeout(handler, interval);\n  };\n  id = setTimeout(handler, initial);\n  return () => id;\n}\n\nexport function clearAsyncInterval(v: AsyncIntervalIdentifier) {\n  clearTimeout(v?.());\n}\n","export const sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\n","export function timeout<T = any>(v: Promise<T>, ms: number): Promise<T> {\n  const error = new TimeoutError();\n  let timeout: any;\n  return Promise.race([\n    v,\n    new Promise((resolve, reject) => {\n      timeout = setTimeout(() => reject(error), ms);\n    }),\n  ]).then(\n    (v) => {\n      clearTimeout(timeout);\n      return v;\n    },\n    (e) => {\n      clearTimeout(timeout);\n      throw e;\n    },\n  ) as Promise<T>;\n}\n\nexport class TimeoutError extends Error {\n  constructor() {\n    super('TimeoutError');\n  }\n}\n","export function isPromise<T>(v: any): v is Promise<T> {\n  return v && (v instanceof Promise || (v.then && v.catch));\n}\n","export function promiseOfCallback<T>(fun: (cb: (err: any, val?: T) => void) => void) {\n  return new Promise<T>((resolve, reject) => {\n    try {\n      fun((e: any, v: any) => {\n        if (e) {\n          reject(e);\n        } else {\n          resolve(v);\n        }\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n","export function assert(condition: any, msg?: string): asserts condition {\n  // if (!condition) {\n  //   throw new AssertionError(msg);\n  // }\n  console.assert(!condition, msg);\n}\n\nexport function assertIsDefined<T>(val: T): asserts val is NonNullable<T> {\n  // if (val === undefined || val === null) {\n  //   throw new AssertionError(`Expected 'val' to be defined, but received ${val}`);\n  // }\n  console.assert(val === undefined || val === null, 'Expected defined');\n}\n","export function isDefined<T = any>(v: T): v is NonNullable<T> {\n  return v !== null && v !== undefined;\n}\n","export function isEmptyObject(o: any) {\n  if (o === null || o === undefined) {\n    return true;\n  }\n  return o.constructor === Object && Object.keys(o).length === 0;\n}\n","export function isClass(func: any) {\n  return typeof func === 'function' && /^class\\s/.test(Function.prototype.toString.call(func));\n}\n","// https://github.com/sindresorhus/camelcase/blob/master/index.js\n\nfunction preserveCamelCase(string: string) {\n  let isLastCharLower = false;\n  let isLastCharUpper = false;\n  let isLastLastCharUpper = false;\n\n  for (let i = 0; i < string.length; i++) {\n    const character = string[i];\n\n    if (isLastCharLower && /[a-zA-Z]/.test(character) && character.toUpperCase() === character) {\n      string = string.slice(0, i) + '-' + string.slice(i);\n      isLastCharLower = false;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = true;\n      i++;\n    } else if (\n      isLastCharUpper &&\n      isLastLastCharUpper &&\n      /[a-zA-Z]/.test(character) &&\n      character.toLowerCase() === character\n    ) {\n      string = string.slice(0, i - 1) + '-' + string.slice(i - 1);\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = false;\n      isLastCharLower = true;\n    } else {\n      isLastCharLower = character.toLowerCase() === character && character.toUpperCase() !== character;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = character.toUpperCase() === character && character.toLowerCase() !== character;\n    }\n  }\n\n  return string;\n}\n\nexport function pascalCase(input: string | string[]) {\n  return camelCase(input, { pascalCase: true });\n}\n\nexport function camelCase(\n  input: string | string[],\n  options: { pascalCase: boolean } = {\n    pascalCase: false,\n  },\n) {\n  if (!(typeof input === 'string' || Array.isArray(input))) {\n    throw new TypeError('Expected the input to be `string | string[]`');\n  }\n\n  const postProcess = (x: string) => (options.pascalCase ? x.charAt(0).toUpperCase() + x.slice(1) : x);\n\n  if (Array.isArray(input)) {\n    input = input\n      .map((x) => x.trim())\n      .filter((x) => x.length)\n      .join('-');\n  } else {\n    input = input.trim();\n  }\n\n  if (input.length === 0) {\n    return '';\n  }\n\n  if (input.length === 1) {\n    return options.pascalCase ? input.toUpperCase() : input.toLowerCase();\n  }\n\n  const hasUpperCase = input !== input.toLowerCase();\n\n  if (hasUpperCase) {\n    input = preserveCamelCase(input);\n  }\n\n  input = input\n    .replace(/^[_.\\- ]+/, '')\n    .toLowerCase()\n    .replace(/[_.\\- ]+(\\w|$)/g, (_, p1) => p1.toUpperCase())\n    .replace(/\\d+(\\w|$)/g, (m) => m.toUpperCase());\n\n  return postProcess(input);\n}\n","import { get } from 'lodash';\n\n/**\n * 替换类似于 JS 的模板字符串\n *\n * @example\n * templateString('My name is ${name}',{name:'wener'})\n */\nexport function templateString(template: string, variables: Record<string, any>) {\n  return template.replace(/\\${(.*?)}/g, (_, g) => {\n    // variables[g.trim()]\n    // 支持路径 - 例如 a.b[0]\n    return get(variables, g.trim());\n  });\n}\n","/// see https://github.com/jfromaniello/url-join\nexport function urljoin(...strArray: string[]) {\n  const resultArray: string[] = [];\n  if (strArray.length === 0) {\n    return '';\n  }\n\n  if (typeof strArray[0] !== 'string') {\n    throw new TypeError('Url must be a string. Received ' + strArray[0]);\n  }\n\n  // If the first part is a plain protocol, we combine it with the next part.\n  if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n    const first = strArray.shift();\n    strArray[0] = first + strArray[0];\n  }\n\n  // There must be two or three slashes in the file protocol, two slashes in anything else.\n  if (strArray[0].match(/^file:\\/\\/\\//)) {\n    strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\n  } else {\n    strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\n  }\n\n  for (let i = 0; i < strArray.length; i++) {\n    let component = strArray[i];\n\n    if (typeof component !== 'string') {\n      throw new TypeError('Url must be a string. Received ' + component);\n    }\n\n    if (component === '') {\n      continue;\n    }\n\n    if (i > 0) {\n      // Removing the starting slashes for each component but the first.\n      component = component.replace(/^[/]+/, '');\n    }\n    if (i < strArray.length - 1) {\n      // Removing the ending slashes for each component but the last.\n      component = component.replace(/[/]+$/, '');\n    } else {\n      // For the last component we will combine multiple slashes to a single one.\n      component = component.replace(/[/]+$/, '/');\n    }\n\n    resultArray.push(component);\n  }\n\n  let str = resultArray.join('/');\n  // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n  // remove trailing slash before parameters or hash\n  str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n  // replace ? in parameters with &\n  const parts = str.split('?');\n  str = parts.shift() + (parts.length > 0 ? '?' : '') + parts.join('&');\n\n  return str;\n}\n","/// javascript pseudo random\nexport function createRandom({ seed = 0 } = {}) {\n  if (typeof seed === 'string') {\n    const s: string = seed;\n    let sum = 0;\n    for (let i = 0; i < s.length; i++) {\n      sum += s.charCodeAt(i);\n    }\n    seed = sum;\n  }\n\n  return () => {\n    const x = Math.sin(seed++) * 10000;\n    return x - Math.floor(x);\n  };\n}\n","// https://github.com/feross/is-buffer/blob/master/index.js\nexport function isBuffer(obj: any): obj is Buffer {\n  return (\n    obj != null &&\n    obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' &&\n    obj.constructor.isBuffer(obj)\n  );\n}\n","export const isDev = () => {\n  return typeof process !== 'undefined' && (process?.env?.NODE_ENV || '').startsWith('dev');\n};\n","// https://gist.github.com/rproenca/64781c6a1329b48a455b645d361a9aa3\nlet _copy: (s: any) => void;\n\nfunction initCopy() {\n  let textArea: HTMLTextAreaElement;\n\n  function isIOS() {\n    return navigator.userAgent.match(/ipad|iphone/i);\n  }\n\n  function createTextArea(text: string) {\n    textArea = document.createElement('textArea') as HTMLTextAreaElement;\n    textArea.value = text;\n    document.body.appendChild(textArea);\n  }\n\n  function selectText() {\n    let range, selection;\n\n    if (isIOS()) {\n      range = document.createRange();\n      range.selectNodeContents(textArea);\n      selection = window.getSelection();\n      if (selection === null) {\n        console.error(`no selection`);\n        return;\n      }\n      selection.removeAllRanges();\n      selection.addRange(range);\n      textArea.setSelectionRange(0, 999999);\n    } else {\n      textArea.select();\n    }\n  }\n\n  function copyToClipboard() {\n    document.execCommand('copy');\n    document.body.removeChild(textArea);\n  }\n\n  _copy = (text) => {\n    createTextArea(text);\n    selectText();\n    copyToClipboard();\n  };\n}\n\nexport function copy(text: string) {\n  if (window.navigator?.clipboard?.writeText) {\n    window.navigator.clipboard.writeText(text);\n    return;\n  }\n  if (!_copy) {\n    initCopy();\n  }\n  _copy(text);\n}\n","export function download(filename: string, data: any, { type = 'application/octet-stream', raw = false } = {}) {\n  const a = document.createElement('a');\n  let closer: () => void = () => null;\n  try {\n    a.download = filename;\n\n    // console.info(`downloading ${name}`, data);\n\n    // url or data url\n    if (typeof data === 'string' && /^(https?:|data:)/.test(data) && !raw) {\n      a.href = data;\n    } else if (typeof data === 'string') {\n      data = new TextEncoder().encode(data);\n    }\n\n    if (data instanceof Uint8Array) {\n      data = new Blob([data], { type });\n    }\n\n    if (data instanceof File || data instanceof Blob || data instanceof MediaSource) {\n      a.href = URL.createObjectURL(data);\n      closer = () => URL.revokeObjectURL(a.href);\n    } else {\n      console.error(`invalid download data`, data);\n      throw new Error(`can not download ${Object.getPrototypeOf(data)}`);\n    }\n    a.click();\n  } finally {\n    closer();\n  }\n}\n","function load(\n  el: HTMLScriptElement | HTMLLinkElement,\n  resolve: (v: any) => void,\n  reject: Function,\n  options: { attributes: Record<string, string> } | undefined,\n) {\n  el.onload = resolve;\n  el.onerror = (e) => {\n    el.remove();\n    reject(e);\n  };\n  const { attributes = {} } = options || {};\n  Object.entries(attributes).forEach(([k, v]) => el.setAttribute(k, v));\n\n  document.head.appendChild(el);\n}\n\nexport function loadScripts(src: string, options?: { attributes: Record<string, string> }) {\n  // todo quote ?\n  if (document.querySelector(`script[src=\"${src}\"]`)) {\n    return Promise.resolve();\n  }\n  return new Promise((resolve, reject) => {\n    const el = document.createElement('script');\n    el.src = src;\n    load(el, resolve, reject, options);\n  });\n}\n\nexport function loadStyles(href: string, options?: { attributes: Record<string, string> }) {\n  if (document.querySelector(`link[href=\"${href}\"]`)) {\n    return Promise.resolve();\n  }\n\n  return new Promise((resolve, reject) => {\n    const el = document.createElement('link');\n    el.rel = 'stylesheet';\n    el.href = href;\n    load(el, resolve, reject, options);\n  });\n}\n","export function getFile(dataTransfer: DataTransfer): { file: File; filename: string } | null {\n  const items: DataTransferItemList = dataTransfer?.items ?? ([] as any);\n\n  if (items.length >= 2 && items[0].kind === 'string' && items[1].kind === 'file') {\n    const text = dataTransfer.getData('text');\n    const file = items[1].getAsFile() ?? dataTransfer.files?.item(0);\n    if (!file) {\n      console.error(`no file ${text}`, items[1]);\n      return null;\n    }\n\n    // let type = file.type;\n    // // fix type\n    // type = type;\n    // // NOTE paste file can not parse by libs\n    // if (type !== file.type) {\n    //   const blob = file.slice(0, file.size);\n    //   file = new File([blob], text, {type});\n    // }\n\n    return { file, filename: text };\n  } else if (items[0].kind === 'file') {\n    const file = items[0].getAsFile();\n    if (!file) {\n      console.error(`no file`, items[0]);\n      return null;\n    }\n    return { file, filename: file.name };\n  } else {\n    console.debug(\n      `file item not match`,\n      Array.from(items).map((v) => ({ type: v.type, kind: v.kind })),\n    );\n  }\n  return null;\n}\n","declare const global: typeof globalThis;\n\n/**\n * isomorphic globalThis\n *\n * globalThis supported by ff 65, chrome 71, node 12, babel\n *\n * @see https://caniuse.com/#search=globalThis\n * @see https://v8.dev/features/globalthis\n */\nexport const getGlobalThis = (): typeof globalThis => {\n  if (typeof globalThis !== 'undefined') return globalThis;\n  if (typeof self !== 'undefined') return self;\n  if (typeof window !== 'undefined') return window;\n  if (typeof global !== 'undefined') return global as any;\n  // eslint-disable-next-line\n  // @ts-ignore\n  if (typeof this !== 'undefined') return this;\n  throw new Error('Unable to locate global `this`');\n};\n"],"names":["objectOfMaybeArray","o","keys","picker","firstOfMaybeArray","Object","fromEntries","entries","map","k","v","Array","isArray","lastOfMaybeArray","length","arrayOfMaybeArray","undefined","createLazyPromise","holder","resolve","_","Error","reject","assign","Promise","setAsyncInterval","cb","interval","initial","id","handler","setTimeout","clearAsyncInterval","clearTimeout","sleep","ms","timeout","error","TimeoutError","race","then","e","isPromise","promiseOfCallback","fun","assert","condition","msg","console","assertIsDefined","val","isDefined","isEmptyObject","constructor","isClass","func","test","Function","prototype","toString","call","preserveCamelCase","string","isLastCharLower","isLastCharUpper","isLastLastCharUpper","i","character","toUpperCase","slice","toLowerCase","pascalCase","input","camelCase","options","TypeError","postProcess","x","charAt","trim","filter","join","hasUpperCase","replace","p1","m","templateString","template","variables","g","get","urljoin","resultArray","strArray","match","first","shift","component","push","str","parts","split","createRandom","seed","s","sum","charCodeAt","Math","sin","floor","isBuffer","obj","isDev","process","env","NODE_ENV","startsWith","_copy","initCopy","textArea","isIOS","navigator","userAgent","createTextArea","text","document","createElement","value","body","appendChild","selectText","range","selection","createRange","selectNodeContents","window","getSelection","removeAllRanges","addRange","setSelectionRange","select","copyToClipboard","execCommand","removeChild","copy","clipboard","writeText","download","filename","data","type","raw","a","closer","href","TextEncoder","encode","Uint8Array","Blob","File","MediaSource","URL","createObjectURL","revokeObjectURL","getPrototypeOf","click","load","el","onload","onerror","remove","attributes","forEach","setAttribute","head","loadScripts","src","querySelector","loadStyles","rel","getFile","dataTransfer","items","kind","getData","file","getAsFile","files","item","name","debug","from","getGlobalThis","globalThis","self","global"],"mappings":"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"}